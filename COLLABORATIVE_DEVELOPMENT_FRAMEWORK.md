# Cursorä¸LovableååŒå¼€å‘æ¡†æ¶

## ğŸ¯ ååŒå¼€å‘ç›®æ ‡

å»ºç«‹Cursorä¸Lovableçš„ååŒå¼€å‘ç¯å¢ƒï¼Œå®ç°é«˜æ•ˆåˆ†å·¥åˆä½œï¼š

- **Lovableè´Ÿè´£**: å‰ç«¯å¼€å‘ã€æ•°æ®åº“è®¾è®¡ã€UI/UXå®ç°ã€Supabase Edge Functionsï¼ˆè½»é‡çº§é€»è¾‘ï¼‰
- **Cursorè´Ÿè´£**: éœ€æ±‚æ¢³ç†ã€Pythonåç«¯ï¼ˆå¤æ‚ç®—æ³•ï¼‰ã€ä¸šåŠ¡åˆ†æã€ç³»ç»Ÿæ¶æ„è®¾è®¡

## ğŸ“‹ åˆ†å·¥èŒè´£

### LovableèŒè´£èŒƒå›´
- âœ… **å‰ç«¯å¼€å‘**: React 19 + Vite + TypeScript + Tailwind CSS + shadcn/ui
- âœ… **UI/UXå®ç°**: ç”¨æˆ·ç•Œé¢ã€äº¤äº’è®¾è®¡ã€å“åº”å¼å¸ƒå±€
- âœ… **å‰ç«¯ç»„ä»¶**: å›¾è¡¨ç»„ä»¶ã€è¡¨å•ç»„ä»¶ã€å¯¼èˆªç»„ä»¶
- âœ… **å‰ç«¯è·¯ç”±**: é¡µé¢è·¯ç”±ã€çŠ¶æ€ç®¡ç†
- âœ… **åç«¯å¼€å‘**: **Supabase Edge Functions (Deno Runtime)** - è½»é‡çº§ä¸šåŠ¡é€»è¾‘
  - âœ… **æŠ€æœ¯æ ˆ**: Deno Runtime + TypeScript + Supabase SDK
  - âœ… **é€‚ç”¨èŒƒå›´**: ç®€å•CRUDã€ç®€å•æŸ¥è¯¢ã€O(n)ç®—æ³•ã€æ•°æ®éªŒè¯
  - âœ… **é™åˆ¶**: æ‰§è¡Œæ—¶é—´â‰¤10ç§’ï¼Œè®¡ç®—å¤æ‚åº¦O(n)æˆ–æ›´ä½
  - âš ï¸ **å¤æ‚ç®—æ³•**: é€šè¿‡APIè°ƒç”¨Cursorçš„FastAPIåç«¯
- âœ… **å‰ç«¯æµ‹è¯•**: ç»„ä»¶æµ‹è¯•ã€é›†æˆæµ‹è¯•
- âœ… **åç«¯æµ‹è¯•**: Edge Functionå•å…ƒæµ‹è¯•
- âœ… **æ•°æ®åº“è®¾è®¡**: Supabase PostgreSQL + Row Level Security + Real-time
- âœ… **Supabaseé›†æˆ**: æ•°æ®åº“é…ç½®ã€å®æ—¶è®¢é˜…ã€è®¤è¯ã€Edge Functionséƒ¨ç½²
- âœ… **æ•°æ®åº“è¿ç§»**: ä½¿ç”¨Supabase CLIï¼ˆéAlembicï¼‰

### CursorèŒè´£èŒƒå›´
- ğŸ¯ **éœ€æ±‚æ¢³ç†**: ä¸šåŠ¡éœ€æ±‚åˆ†æã€åŠŸèƒ½è§„æ ¼å®šä¹‰
- ğŸ¯ **ç³»ç»Ÿæ¶æ„**: æ•´ä½“æ¶æ„è®¾è®¡ã€æ¨¡å—åˆ’åˆ†
- ğŸ¯ **ä¸šåŠ¡åˆ†æ**: å•†ä¸šæ¨¡å¼åˆ†æã€ç®—æ³•è®¾è®¡
- ğŸ¯ **APIè®¾è®¡**: **FastAPIåç«¯APIè®¾è®¡** + Edge Functions APIè®¾è®¡
  - FastAPIç«¯ç‚¹è®¾è®¡ï¼ˆå¤æ‚ç®—æ³•ï¼‰
  - Edge Functionä»£ç æ¨¡æ¿ï¼ˆç®€å•é€»è¾‘ï¼‰
  - TypeScriptå’ŒPythonç±»å‹å®šä¹‰
  - è¾“å…¥è¾“å‡ºå¥‘çº¦
- ğŸ¯ **ç®—æ³•å®ç°**: **Pythonå¤æ‚ç®—æ³•å®ç°**
  - æœºå™¨å­¦ä¹ ç®—æ³•ï¼ˆXGBoost, ARIMA, MLPç­‰ï¼‰
  - å¤æ‚æ•°æ®å¤„ç†ï¼ˆShapleyå½’å› ç­‰ï¼‰
  - æ–‡æ¡£å¤„ç†å’ŒOCR
  - FastAPIæœåŠ¡ç»´æŠ¤
- ğŸ¯ **æŠ€æœ¯æŒ‡å¯¼**: æä¾›ç®—æ³•å®ç°æŒ‡å¯¼å’ŒæŠ€æœ¯æ”¯æŒ
- ğŸ¯ **æ–‡æ¡£ç¼–å†™**: æŠ€æœ¯æ–‡æ¡£ã€**Edge Functions APIæ–‡æ¡£**ã€ç®—æ³•æ–‡æ¡£ï¼ˆTypeScriptï¼‰
- ğŸ¯ **è´¨é‡ä¿è¯**: ä»£ç å®¡æŸ¥ã€æ¶æ„å®¡æŸ¥ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®

## ğŸ”„ ååŒå·¥ä½œæµ

### 1. éœ€æ±‚æ¢³ç†é˜¶æ®µ (Cursorä¸»å¯¼)
```
Cursorå·¥ä½œ:
â”œâ”€â”€ ä¸šåŠ¡éœ€æ±‚åˆ†æ
â”œâ”€â”€ åŠŸèƒ½è§„æ ¼å®šä¹‰
â”œâ”€â”€ APIæ¥å£è®¾è®¡
â”œâ”€â”€ æ•°æ®æ¨¡å‹è®¾è®¡
â””â”€â”€ æŠ€æœ¯æ¶æ„è§„åˆ’

è¾“å‡ºæ–‡æ¡£:
â”œâ”€â”€ éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦
â”œâ”€â”€ APIæ¥å£æ–‡æ¡£
â”œâ”€â”€ æ•°æ®åº“è®¾è®¡æ–‡æ¡£
â””â”€â”€ ç³»ç»Ÿæ¶æ„æ–‡æ¡£
```

### 2. å¼€å‘å®ç°é˜¶æ®µ (Lovableä¸»å¯¼)
```
Lovableå·¥ä½œ:
â”œâ”€â”€ å‰ç«¯ç•Œé¢å®ç° (React + Vite)
â”œâ”€â”€ åç«¯APIå®ç° (Supabase Edge Functions - å…¨éƒ¨åç«¯é€»è¾‘)
â”œâ”€â”€ æ•°æ®åº“è¡¨åˆ›å»º (Supabase PostgreSQL)
â”œâ”€â”€ æ•°æ®åº“è¿ç§» (Supabase CLI)
â”œâ”€â”€ UIç»„ä»¶å¼€å‘
â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘å¼€å‘ (å…¨éƒ¨åœ¨Edge Functionså®ç°)
â””â”€â”€ å‰åç«¯åŠŸèƒ½é›†æˆ

CursorååŠ©:
â”œâ”€â”€ æä¾›TypeScriptç®—æ³•å®ç°ä»£ç 
â”œâ”€â”€ æä¾›Edge Functionsä»£ç æ¨¡æ¿
â”œâ”€â”€ æŠ€æœ¯æ¶æ„å®¡æŸ¥
â”œâ”€â”€ ä»£ç è´¨é‡å®¡æŸ¥
â””â”€â”€ æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼ˆç¡®ä¿ç¬¦åˆEdge Functionsé™åˆ¶ï¼‰
```

### 3. é›†æˆæµ‹è¯•é˜¶æ®µ (å…±åŒåä½œ)
```
å…±åŒå·¥ä½œ:
â”œâ”€â”€ å‰åç«¯é›†æˆæµ‹è¯•
â”œâ”€â”€ åŠŸèƒ½éªŒè¯
â”œâ”€â”€ æ€§èƒ½æµ‹è¯•
â””â”€â”€ é—®é¢˜ä¿®å¤
```

## ğŸ“ é¡¹ç›®ç»“æ„åˆ†å·¥

### Lovableè´Ÿè´£çš„ç›®å½•
```
src/                          # Reactå‰ç«¯æºç  (Vite)
â”œâ”€â”€ components/               # Reactç»„ä»¶
â”œâ”€â”€ pages/                    # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ [é¡µé¢ç»„ä»¶]
â”œâ”€â”€ hooks/                    # è‡ªå®šä¹‰Hooks
â”œâ”€â”€ lib/                      # å·¥å…·åº“
â””â”€â”€ types/                    # TypeScriptç±»å‹å®šä¹‰

supabase/
â”œâ”€â”€ functions/                # Supabase Edge Functions
â”‚   â”œâ”€â”€ value-chain/         # ä»·å€¼é“¾åˆ†æAPI (è½»é‡çº§)
â”‚   â”œâ”€â”€ attribution/         # å½’å› åˆ†æAPI (ç®€å•æŸ¥è¯¢)
â”‚   â”œâ”€â”€ optimization/        # ä¼˜åŒ–å»ºè®®API (CRUD)
â”‚   â””â”€â”€ decision/            # å†³ç­–ç®¡ç†API (çŠ¶æ€ç®¡ç†)
â””â”€â”€ migrations/              # æ•°æ®åº“è¿ç§»æ–‡ä»¶

public/                       # é™æ€èµ„æº
â”œâ”€â”€ favicon.ico
â”œâ”€â”€ placeholder.svg
â””â”€â”€ robots.txt

# Lovableé…ç½®æ–‡ä»¶
package.json                 # é¡¹ç›®ä¾èµ–é…ç½®
vite.config.ts               # Viteæ„å»ºé…ç½®
tailwind.config.ts           # Tailwind CSSé…ç½®
tsconfig.json                # TypeScripté…ç½®
```

### Cursorè´Ÿè´£çš„ç›®å½•
```
docs/                       # æ–‡æ¡£
â”œâ”€â”€ requirements/           # éœ€æ±‚æ–‡æ¡£
â”œâ”€â”€ api/                   # APIæ–‡æ¡£
â”œâ”€â”€ architecture/          # æ¶æ„æ–‡æ¡£
â”œâ”€â”€ business/              # ä¸šåŠ¡æ–‡æ¡£
â””â”€â”€ algorithms/            # ç®—æ³•æ–‡æ¡£

algorithms/                 # ç®—æ³•å®ç°æŒ‡å¯¼
â”œâ”€â”€ shapley/               # Shapleyå½’å› ç®—æ³•
â”œâ”€â”€ optimization/          # ä¼˜åŒ–ç®—æ³•
â”œâ”€â”€ prediction/            # é¢„æµ‹ç®—æ³•
â””â”€â”€ decision/              # å†³ç­–ç®—æ³•

research/                   # ç ”ç©¶èµ„æ–™
â”œâ”€â”€ papers/                # ç›¸å…³è®ºæ–‡
â”œâ”€â”€ benchmarks/            # æ€§èƒ½åŸºå‡†
â””â”€â”€ experiments/           # å®éªŒæ•°æ®

scripts/                    # å·¥å…·è„šæœ¬
â”œâ”€â”€ analysis/              # åˆ†æè„šæœ¬
â”œâ”€â”€ testing/               # æµ‹è¯•è„šæœ¬
â””â”€â”€ deployment/            # éƒ¨ç½²è„šæœ¬

# éƒ¨ç½²é…ç½®
docker-compose.yml          # Dockerç¼–æ’
.github/workflows/          # CI/CDé…ç½®
```

## ğŸ¯ Cursoréœ€æ±‚æ¢³ç†å·¥ä½œé‡ç‚¹

### 1. å•†ä¸šæ¨¡å¼åŠ¨æ€ä¼˜åŒ–éœ€æ±‚åˆ†æ
- **ä»·å€¼é“¾åˆ†æéœ€æ±‚**: å¦‚ä½•é‡åŒ–ä»·å€¼é“¾å„ç¯èŠ‚æ•ˆç‡
- **å½’å› åˆ†æéœ€æ±‚**: å¦‚ä½•è®¡ç®—å„æ¸ é“/æ´»åŠ¨çš„è´¡çŒ®åº¦
- **å†³ç­–ç®¡ç†éœ€æ±‚**: å¦‚ä½•å®ç°å±‚çº§å†³ç­–ç®¡ç†
- **æ•ˆæœè¯„ä¼°éœ€æ±‚**: å¦‚ä½•é‡åŒ–å†³ç­–æ•ˆæœ

### 2. æŠ€æœ¯æ¶æ„éœ€æ±‚è®¾è®¡
- **APIæ¥å£è®¾è®¡**: **Supabase Edge Functions APIè®¾è®¡**ï¼ˆéFastAPIï¼‰
  - Edge Functionè·¯å¾„å’ŒHTTPæ–¹æ³•
  - TypeScriptç±»å‹å®šä¹‰
  - è¾“å…¥è¾“å‡ºå¥‘çº¦
  - é”™è¯¯å¤„ç†è§„èŒƒ
- **æ•°æ®æ¨¡å‹è®¾è®¡**: Supabase PostgreSQLè¡¨ç»“æ„ã€å…³ç³»è®¾è®¡ã€RLSç­–ç•¥
- **ä¸šåŠ¡é€»è¾‘è®¾è®¡**: **TypeScriptç®—æ³•å®ç°**ï¼ˆå¯ç›´æ¥ç”¨äºEdge Functionsï¼‰
- **é›†æˆéœ€æ±‚è®¾è®¡**: å‰åç«¯é›†æˆï¼ˆEdge Functionsè°ƒç”¨æ–¹å¼ï¼‰ã€ç¬¬ä¸‰æ–¹é›†æˆ

### 3. åŠŸèƒ½æ¨¡å—éœ€æ±‚å®šä¹‰
- **æ¨¡å—1: å…¨é“¾æ¡ä»·å€¼ä¼ é€’**
  - ä»·å€¼é“¾åˆ†æå¼•æ“éœ€æ±‚
  - å½’å› åˆ†æç®—æ³•éœ€æ±‚
  - ä¼˜åŒ–å»ºè®®ç”Ÿæˆéœ€æ±‚

- **æ¨¡å—2: åŠ¨æ€ç®¡ç†è„‰ç»œ**
  - æ•°æ®é‡‡é›†éœ€æ±‚
  - æŒ‡æ ‡è®¡ç®—éœ€æ±‚
  - åˆ†ææŠ¥å‘Šéœ€æ±‚

- **æ¨¡å—3: åˆ©ç›ŠååŒä¸é£é™©ç®¡æ§**
  - ä»·å€¼è´¡çŒ®è®¡ç®—éœ€æ±‚
  - åˆ©ç›Šåˆ†é…ç®—æ³•éœ€æ±‚
  - é£é™©ç›‘æ§éœ€æ±‚

- **æ¨¡å—4: ç°é‡‘æµå¥åº·ç®¡ç†**
  - ç°é‡‘æµåˆ†æéœ€æ±‚
  - NPVè®¡ç®—éœ€æ±‚
  - å¥åº·è¯„ä¼°éœ€æ±‚

- **æ¨¡å—5: å…³é”®é‡åŒ–æ–¹æ³•åº”ç”¨**
  - TOCç“¶é¢ˆå®šä½éœ€æ±‚
  - è¾¹é™…åˆ†æéœ€æ±‚
  - ä»·å€¼å¢é‡è®¡ç®—éœ€æ±‚

- **æ¨¡å—6: å†³ç­–ç®¡ç†æ”¯æ’‘ç³»ç»Ÿ**
  - å±‚çº§å†³ç­–ç®¡ç†éœ€æ±‚
  - å†³ç­–è¿½æº¯éœ€æ±‚
  - å®šæœŸæŠ¥å‘Šéœ€æ±‚

## ğŸ“ éœ€æ±‚æ¢³ç†è¾“å‡ºæ¨¡æ¿

### åŠŸèƒ½éœ€æ±‚æ–‡æ¡£æ¨¡æ¿
```markdown
# [åŠŸèƒ½åç§°] éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦

## 1. åŠŸèƒ½æ¦‚è¿°
- åŠŸèƒ½æè¿°
- ä¸šåŠ¡ä»·å€¼
- ç”¨æˆ·è§’è‰²

## 2. åŠŸèƒ½éœ€æ±‚
- åŠŸèƒ½åˆ—è¡¨
- è¾“å…¥è¾“å‡º
- ä¸šåŠ¡è§„åˆ™

## 3. æŠ€æœ¯éœ€æ±‚
- APIæ¥å£
- æ•°æ®æ¨¡å‹
- ç®—æ³•é€»è¾‘

## 4. éªŒæ”¶æ ‡å‡†
- åŠŸèƒ½éªŒæ”¶
- æ€§èƒ½éªŒæ”¶
- è´¨é‡éªŒæ”¶
```

### Supabase Edge Functions APIæ–‡æ¡£æ¨¡æ¿
```markdown
# [æ¨¡å—åç§°] Edge Functions APIæ–‡æ¡£

## å‡½æ•°è·¯å¾„
`supabase/functions/[function-name]/index.ts`

## è°ƒç”¨æ–¹å¼
```typescript
// å‰ç«¯è°ƒç”¨
const { data, error } = await supabase.functions.invoke('[function-name]', {
  body: { param1, param2 }
});
```

## è¾“å…¥å‚æ•° (JSON Body)
- `param1`: string - å‚æ•°è¯´æ˜
- `param2`: number - å‚æ•°è¯´æ˜

## è¾“å‡ºæ ¼å¼ (JSON Response)
```json
{
  "success": true,
  "data": { ... },
  "error": null
}
```

## é”™è¯¯å¤„ç†
- HTTP 400: è¾“å…¥å‚æ•°é”™è¯¯
- HTTP 500: å†…éƒ¨æœåŠ¡å™¨é”™è¯¯

## Edge Functionä»£ç æ¨¡æ¿
å‚è§ä¸‹é¢çš„Edge Functionç¤ºä¾‹æ¨¡æ¿
```

## ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

### Cursorå¼€å‘ç¯å¢ƒ
```bash
# åç«¯å¼€å‘ç¯å¢ƒ
cd backend
pip install -r requirements.txt
uvicorn app.main:app --reload

# æ–‡æ¡£ç”Ÿæˆ
cd docs
mkdocs serve
```

### Lovableå¼€å‘ç¯å¢ƒ
```bash
# å‰ç«¯å¼€å‘ç¯å¢ƒ
npm install
npm run dev

# Supabaseæœ¬åœ°å¼€å‘ç¯å¢ƒ
supabase start
supabase functions serve

# Edge Functionséƒ¨ç½²
supabase functions deploy [function-name]

# æ•°æ®åº“è¿ç§»
supabase migration new [migration-name]
supabase db push
```

## ğŸ“Š ååŒå¼€å‘æ£€æŸ¥æ¸…å•

### Cursorå·¥ä½œæ£€æŸ¥æ¸…å•
- [ ] éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦å®Œæˆ
- [ ] APIæ¥å£æ–‡æ¡£å®Œæˆ
- [ ] æ•°æ®æ¨¡å‹è®¾è®¡å®Œæˆ
- [ ] ä¸šåŠ¡é€»è¾‘å®ç°å®Œæˆ
- [ ] åç«¯æµ‹è¯•å®Œæˆ
- [ ] æŠ€æœ¯æ–‡æ¡£æ›´æ–°å®Œæˆ

### Lovableå·¥ä½œæ£€æŸ¥æ¸…å•
- [ ] å‰ç«¯ç•Œé¢å®ç°å®Œæˆ
- [ ] æ•°æ®åº“è¡¨åˆ›å»ºå®Œæˆ
- [ ] UIç»„ä»¶å¼€å‘å®Œæˆ
- [ ] å‰ç«¯åŠŸèƒ½é›†æˆå®Œæˆ
- [ ] å‰ç«¯æµ‹è¯•å®Œæˆ
- [ ] ç”¨æˆ·ç•Œé¢ä¼˜åŒ–å®Œæˆ

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¼€å§‹çš„å·¥ä½œ
1. **Cursor**: å¼€å§‹è¯¦ç»†çš„éœ€æ±‚æ¢³ç†å·¥ä½œ
2. **Lovable**: ç­‰å¾…Cursorçš„éœ€æ±‚è¾“å‡ºï¼Œå‡†å¤‡å‰ç«¯å¼€å‘
3. **å…±åŒ**: å»ºç«‹æ²Ÿé€šæœºåˆ¶ï¼Œç¡®ä¿ä¿¡æ¯åŒæ­¥

### æ²Ÿé€šæœºåˆ¶
- **éœ€æ±‚å˜æ›´**: é€šè¿‡GitHub Issuesè¿›è¡Œæ²Ÿé€š
- **æŠ€æœ¯è®¨è®º**: é€šè¿‡GitHub Discussionsè¿›è¡Œè®¨è®º
- **è¿›åº¦åŒæ­¥**: é€šè¿‡GitHub Projectsè¿›è¡Œè·Ÿè¸ª

---

## ğŸ“˜ Supabase Edge Functions APIè®¾è®¡èŒƒå¼

### âš ï¸ é‡è¦æŠ€æœ¯æ ˆçº¦æŸ

**Lovableåªèƒ½ä½¿ç”¨Supabase Edge Functionsï¼Œä¸èƒ½ä½¿ç”¨FastAPI Pythonåç«¯ã€‚**

æ‰€æœ‰Cursoræä¾›çš„APIè®¾è®¡å¿…é¡»ï¼š
- âœ… ä½¿ç”¨TypeScriptç¼–å†™
- âœ… ç¬¦åˆDeno Runtimeè§„èŒƒ
- âœ… ä»…ä½¿ç”¨Supabase SDKå’ŒDenoæ ‡å‡†åº“
- âœ… æ‰§è¡Œæ—¶é—´â‰¤10ç§’
- âœ… è®¡ç®—å¤æ‚åº¦O(n)æˆ–æ›´ä½

---

## ğŸ”§ Edge Functionç¤ºä¾‹æ¨¡æ¿

### æ¨¡æ¿1: åŸºç¡€CRUDæ“ä½œ

```typescript
// supabase/functions/basic-crud/index.ts

import { serve } from "https://deno.land/std@0.168.0/http/server.ts";
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

// ç±»å‹å®šä¹‰
interface RequestBody {
  action: 'create' | 'read' | 'update' | 'delete';
  table: string;
  data?: Record<string, any>;
  id?: string;
  filters?: Record<string, any>;
}

serve(async (req) => {
  try {
    // åˆ›å»ºSupabaseå®¢æˆ·ç«¯
    const supabaseClient = createClient(
      Deno.env.get('SUPABASE_URL') ?? '',
      Deno.env.get('SUPABASE_SERVICE_ROLE_KEY') ?? '',
      {
        auth: {
          autoRefreshToken: false,
          persistSession: false
        }
      }
    );

    // è§£æè¯·æ±‚ä½“
    const body: RequestBody = await req.json();

    // éªŒè¯è¾“å…¥å‚æ•°
    if (!body.action || !body.table) {
      return new Response(
        JSON.stringify({ success: false, error: 'Missing required fields: action, table' }),
        { 
          status: 400,
          headers: { 'Content-Type': 'application/json' }
        }
      );
    }

    let result;

    // æ‰§è¡ŒCRUDæ“ä½œ
    switch (body.action) {
      case 'create':
        if (!body.data) {
          return new Response(
            JSON.stringify({ success: false, error: 'Missing data for create operation' }),
            { status: 400, headers: { 'Content-Type': 'application/json' } }
          );
        }
        const { data: createData, error: createError } = await supabaseClient
          .from(body.table)
          .insert(body.data)
          .select();
        
        if (createError) throw createError;
        result = createData;
        break;

      case 'read':
        let query = supabaseClient.from(body.table).select('*');
        
        if (body.id) {
          query = query.eq('id', body.id);
        } else if (body.filters) {
          Object.entries(body.filters).forEach(([key, value]) => {
            query = query.eq(key, value);
          });
        }
        
        const { data: readData, error: readError } = await query;
        if (readError) throw readError;
        result = readData;
        break;

      case 'update':
        if (!body.id || !body.data) {
          return new Response(
            JSON.stringify({ success: false, error: 'Missing id or data for update operation' }),
            { status: 400, headers: { 'Content-Type': 'application/json' } }
          );
        }
        const { data: updateData, error: updateError } = await supabaseClient
          .from(body.table)
          .update(body.data)
          .eq('id', body.id)
          .select();
        
        if (updateError) throw updateError;
        result = updateData;
        break;

      case 'delete':
        if (!body.id) {
          return new Response(
            JSON.stringify({ success: false, error: 'Missing id for delete operation' }),
            { status: 400, headers: { 'Content-Type': 'application/json' } }
          );
        }
        const { error: deleteError } = await supabaseClient
          .from(body.table)
          .delete()
          .eq('id', body.id);
        
        if (deleteError) throw deleteError;
        result = { message: 'Deleted successfully' };
        break;

      default:
        return new Response(
          JSON.stringify({ success: false, error: 'Invalid action' }),
          { status: 400, headers: { 'Content-Type': 'application/json' } }
        );
    }

    // è¿”å›æˆåŠŸå“åº”
    return new Response(
      JSON.stringify({ success: true, data: result }),
      { 
        status: 200,
        headers: { 'Content-Type': 'application/json' }
      }
    );

  } catch (error) {
    // é”™è¯¯å¤„ç†
    console.error('Error:', error);
    return new Response(
      JSON.stringify({ 
        success: false, 
        error: error.message || 'Internal server error' 
      }),
      { 
        status: 500,
        headers: { 'Content-Type': 'application/json' }
      }
    );
  }
});
```

### æ¨¡æ¿2: ç®€å•ç®—æ³•è®¡ç®—ï¼ˆO(n)å¤æ‚åº¦ï¼‰

```typescript
// supabase/functions/simple-calculation/index.ts

import { serve } from "https://deno.land/std@0.168.0/http/server.ts";

interface RequestBody {
  values: number[];
  operation: 'sum' | 'average' | 'max' | 'min';
}

serve(async (req) => {
  try {
    const body: RequestBody = await req.json();

    // éªŒè¯è¾“å…¥
    if (!body.values || !Array.isArray(body.values) || body.values.length === 0) {
      return new Response(
        JSON.stringify({ success: false, error: 'Invalid values array' }),
        { status: 400, headers: { 'Content-Type': 'application/json' } }
      );
    }

    let result: number;

    // æ‰§è¡Œè®¡ç®—ï¼ˆO(n)å¤æ‚åº¦ï¼‰
    switch (body.operation) {
      case 'sum':
        result = body.values.reduce((acc, val) => acc + val, 0);
        break;

      case 'average':
        result = body.values.reduce((acc, val) => acc + val, 0) / body.values.length;
        break;

      case 'max':
        result = Math.max(...body.values);
        break;

      case 'min':
        result = Math.min(...body.values);
        break;

      default:
        return new Response(
          JSON.stringify({ success: false, error: 'Invalid operation' }),
          { status: 400, headers: { 'Content-Type': 'application/json' } }
        );
    }

    return new Response(
      JSON.stringify({ success: true, result }),
      { status: 200, headers: { 'Content-Type': 'application/json' } }
    );

  } catch (error) {
    return new Response(
      JSON.stringify({ success: false, error: error.message }),
      { status: 500, headers: { 'Content-Type': 'application/json' } }
    );
  }
});
```

### æ¨¡æ¿3: æ•°æ®åº“æŸ¥è¯¢ + ç®€å•å¤„ç†

```typescript
// supabase/functions/data-query/index.ts

import { serve } from "https://deno.land/std@0.168.0/http/server.ts";
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

interface RequestBody {
  table: string;
  filters?: Record<string, any>;
  limit?: number;
  offset?: number;
}

serve(async (req) => {
  try {
    const supabaseClient = createClient(
      Deno.env.get('SUPABASE_URL') ?? '',
      Deno.env.get('SUPABASE_SERVICE_ROLE_KEY') ?? '',
      {
        auth: {
          autoRefreshToken: false,
          persistSession: false
        }
      }
    );

    const body: RequestBody = await req.json();

    // æ„å»ºæŸ¥è¯¢
    let query = supabaseClient.from(body.table).select('*');

    // åº”ç”¨è¿‡æ»¤å™¨
    if (body.filters) {
      Object.entries(body.filters).forEach(([key, value]) => {
        query = query.eq(key, value);
      });
    }

    // åº”ç”¨åˆ†é¡µ
    if (body.limit) {
      query = query.limit(body.limit);
    }
    if (body.offset) {
      query = query.range(body.offset, body.offset + (body.limit || 10) - 1);
    }

    // æ‰§è¡ŒæŸ¥è¯¢
    const { data, error } = await query;

    if (error) throw error;

    // ç®€å•æ•°æ®å¤„ç†ï¼ˆO(n)å¤æ‚åº¦ï¼‰
    const processedData = data.map((item: any) => ({
      ...item,
      processedAt: new Date().toISOString()
    }));

    return new Response(
      JSON.stringify({ 
        success: true, 
        data: processedData,
        count: processedData.length
      }),
      { status: 200, headers: { 'Content-Type': 'application/json' } }
    );

  } catch (error) {
    return new Response(
      JSON.stringify({ success: false, error: error.message }),
      { status: 500, headers: { 'Content-Type': 'application/json' } }
    );
  }
});
```

### æ¨¡æ¿4: å‰ç«¯è°ƒç”¨ç¤ºä¾‹

```typescript
// å‰ç«¯è°ƒç”¨Edge Function

import { createClient } from '@supabase/supabase-js';

const supabase = createClient(
  import.meta.env.VITE_SUPABASE_URL,
  import.meta.env.VITE_SUPABASE_ANON_KEY
);

// è°ƒç”¨CRUDæ“ä½œ
async function createRecord(table: string, data: Record<string, any>) {
  const { data: result, error } = await supabase.functions.invoke('basic-crud', {
    body: {
      action: 'create',
      table,
      data
    }
  });

  if (error) {
    console.error('Error:', error);
    return null;
  }

  return result.data;
}

// è°ƒç”¨ç®—æ³•è®¡ç®—
async function calculateSum(values: number[]) {
  const { data: result, error } = await supabase.functions.invoke('simple-calculation', {
    body: {
      values,
      operation: 'sum'
    }
  });

  if (error) {
    console.error('Error:', error);
    return null;
  }

  return result.result;
}
```

---

## ğŸ“‹ Edge Functionsè®¾è®¡è§„èŒƒ

### å¿…é¡»éµå®ˆçš„è§„èŒƒ

1. **æ‰§è¡Œæ—¶é—´é™åˆ¶**: â‰¤10ç§’
   - å¦‚æœè®¡ç®—å¯èƒ½è¶…è¿‡10ç§’ï¼Œå¿…é¡»ç®€åŒ–ç®—æ³•æˆ–åˆ†æ‰¹å¤„ç†

2. **è®¡ç®—å¤æ‚åº¦**: O(n)æˆ–æ›´ä½
   - ä¸å…è®¸O(nÂ²)ã€O(n!)ç­‰å¤æ‚ç®—æ³•
   - å¦‚æœéœ€è¦å¤æ‚ç®—æ³•ï¼Œå¿…é¡»æä¾›ç®€åŒ–ç‰ˆæœ¬

3. **ä¾èµ–åº“é™åˆ¶**:
   - âœ… å…è®¸: Supabase SDK (`@supabase/supabase-js`)
   - âœ… å…è®¸: Denoæ ‡å‡†åº“ (`https://deno.land/std@...`)
   - âŒ ç¦æ­¢: npmåŒ…ï¼ˆé™¤éæœ‰Denoå…¼å®¹ç‰ˆæœ¬ï¼‰
   - âŒ ç¦æ­¢: Pythonåº“ã€ç³»ç»Ÿçº§åº“

4. **æ•°æ®é‡é™åˆ¶**: å•æ¬¡å¤„ç† < 1MB
   - å¤§æ–‡ä»¶å¤„ç†å¿…é¡»åˆ†æ‰¹æˆ–ä½¿ç”¨Supabase Storage

5. **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼
   ```typescript
   {
     success: false,
     error: "é”™è¯¯æè¿°"
   }
   ```

6. **æˆåŠŸå“åº”**: ç»Ÿä¸€çš„æˆåŠŸå“åº”æ ¼å¼
   ```typescript
   {
     success: true,
     data: { ... }
   }
   ```

---

**è¿™ä¸ªååŒå¼€å‘æ¡†æ¶ç¡®ä¿Cursorä¸“æ³¨äºéœ€æ±‚æ¢³ç†å’ŒTypeScriptç®—æ³•è®¾è®¡ï¼ŒLovableä¸“æ³¨äºEdge Functionså®ç°å’Œå‰ç«¯å¼€å‘ï¼Œå®ç°é«˜æ•ˆåˆ†å·¥åˆä½œï¼** ğŸ‰

