# BMOSç³»ç»Ÿä¸"å†³ç­–åˆ¶å®šä¸æ‰§è¡Œè·Ÿè¸ªç³»ç»Ÿ"é¡¶å±‚é€»è¾‘æ¡†æ¶å¯¹æ¯”åˆ†ææŠ¥å‘Š

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

### æ ¸å¿ƒå‘ç°
é€šè¿‡æ·±å…¥åˆ†æBMOSç³»ç»Ÿå½“å‰å®ç°ä¸ç”¨æˆ·æä¾›çš„"å†³ç­–åˆ¶å®šä¸æ‰§è¡Œè·Ÿè¸ªç³»ç»Ÿ"5å±‚æ¶æ„æ¡†æ¶ï¼Œå‘ç°BMOSç³»ç»Ÿåœ¨**å†³ç­–ç®¡ç†åŸºç¡€**æ–¹é¢å·²æœ‰è‰¯å¥½åŸºç¡€ï¼Œä½†åœ¨**ç³»ç»Ÿæ€§å†³ç­–æ¡†æ¶**ã€**é—­ç¯æœºåˆ¶**å’Œ**é«˜çº§ç®—æ³•å¼•æ“**æ–¹é¢å­˜åœ¨æ˜¾è‘—å·®è·ã€‚

### æ€»ä½“è¯„ä¼°
- **æ¶æ„åŒ¹é…åº¦**: 60% (3/5å±‚åŸºæœ¬åŒ¹é…)
- **é—­ç¯å®Œæ•´æ€§**: 40% (éƒ¨åˆ†å®ç°æ‰§è¡Œé—­ç¯ï¼Œç¼ºå°‘åˆ¶å®šå’Œå¤ç›˜é—­ç¯)
- **å¼•æ“èƒ½åŠ›**: 30% (ç¼ºå°‘ä¸€è‡´æ€§å¼•æ“å’Œå½±å“ä¼ æ’­å¼•æ“)
- **æ•°æ®æ¨¡å‹**: 70% (PostgreSQLå®ç°è‰¯å¥½ï¼Œä½†ç¼ºå°‘å›¾æ•°æ®åº“ç‰¹æ€§)

### å…³é”®å·®è·
1. **æˆ˜ç•¥å±‚(L1)å®Œå…¨ç¼ºå¤±** - æ— è‘£äº‹ä¼šé—¨æˆ·ã€åŒ—ææ˜ŸæŒ‡æ ‡ç®¡ç†
2. **3æ¡é—­ç¯æœºåˆ¶ä¸å®Œæ•´** - åˆ¶å®šé—­ç¯å’Œå¤ç›˜é—­ç¯è–„å¼±
3. **2ç±»æ ¸å¿ƒå¼•æ“ç¼ºå¤±** - ä¸€è‡´æ€§å¼•æ“å’Œå½±å“ä¼ æ’­å¼•æ“æœªå®ç°
4. **å†³ç­–å…³ç³»å›¾è°±ç®€åŒ–** - ç¼ºå°‘å¤æ‚çš„ä¾èµ–è¾¹å’Œå½±å“ä¼ æ’­æœºåˆ¶

---

## ğŸ—ï¸ 5å±‚æ¶æ„å¯¹æ¯”åˆ†æ

### L1 æˆ˜ç•¥å±‚ (Governance) - âŒ å®Œå…¨ç¼ºå¤±

| ç”¨æˆ·æ¡†æ¶è¦æ±‚ | BMOSå½“å‰å®ç° | å·®è·è¯„ä¼° |
|-------------|-------------|----------|
| ä½¿å‘½ã€æ„¿æ™¯ç®¡ç† | âŒ æ—  | **å…³é”®å·®è·** |
| åŒ—ææ˜ŸæŒ‡æ ‡ | âŒ æ—  | **å…³é”®å·®è·** |
| è‘£äº‹ä¼šé—¨æˆ· | âŒ æ—  | **å…³é”®å·®è·** |
| OKRåº“ç®¡ç† | âŒ æ—  | **å…³é”®å·®è·** |

**å½±å“**: ç¼ºå°‘æœ€é«˜å±‚å†³ç­–æŒ‡å¯¼ï¼Œæ— æ³•å½¢æˆå®Œæ•´çš„å†³ç­–å±‚çº§ä½“ç³»ã€‚

### L2 ç­–ç•¥å±‚ (Portfolio) - âš ï¸ éƒ¨åˆ†å®ç°

| ç”¨æˆ·æ¡†æ¶è¦æ±‚ | BMOSå½“å‰å®ç° | å·®è·è¯„ä¼° |
|-------------|-------------|----------|
| æŠ•èµ„ä¸»é¢˜ç®¡ç† | âš ï¸ é€šè¿‡ä»·å€¼é“¾åˆ†æéƒ¨åˆ†å®ç° | **é‡è¦å·®è·** |
| é¢„ç®—åŒ…ç®¡ç† | âš ï¸ é€šè¿‡æˆæœ¬åˆ†æéƒ¨åˆ†å®ç° | **é‡è¦å·®è·** |
| é«˜å±‚å†³ç­–(Decision-1) | âœ… æœ‰`hierarchical_decisions`è¡¨ | **åŸºæœ¬åŒ¹é…** |
| EPM/æŠ•èµ„æ²™ç›˜ | âŒ æ—  | **é‡è¦å·®è·** |

**BMOSä¼˜åŠ¿**: 
- æœ‰å®Œæ•´çš„å±‚çº§å†³ç­–è¡¨ç»“æ„
- æ”¯æŒå†³ç­–åˆ†è§£æœºåˆ¶
- æœ‰KPIè·Ÿè¸ªåŠŸèƒ½

### L3 è®¡åˆ’å±‚ (Program) - âœ… åŸºæœ¬å®ç°

| ç”¨æˆ·æ¡†æ¶è¦æ±‚ | BMOSå½“å‰å®ç° | å·®è·è¯„ä¼° |
|-------------|-------------|----------|
| éƒ¨é—¨çº§å†³ç­–(Decision-2...n) | âœ… æœ‰æˆ˜æœ¯å±‚å†³ç­–å®ç° | **åŸºæœ¬åŒ¹é…** |
| ç›®æ ‡ã€KRç®¡ç† | âœ… æœ‰`decision_kpi`è¡¨ | **åŸºæœ¬åŒ¹é…** |
| è¡ŒåŠ¨è®¡åˆ’ | âœ… æœ‰`decision_execution_link`è¡¨ | **åŸºæœ¬åŒ¹é…** |
| è®¡åˆ’ç®¡ç† | âš ï¸ é€šè¿‡åŠ¨æ€ç®¡ç†å¼•æ“éƒ¨åˆ†å®ç° | **ä¸€èˆ¬å·®è·** |

**BMOSä¼˜åŠ¿**:
- å®Œæ•´çš„3å±‚å†³ç­–æ¶æ„(æˆ˜ç•¥-æˆ˜æœ¯-æ‰§è¡Œ)
- å†³ç­–åˆ†è§£å¼•æ“(`DecisionDecompositionEngine`)
- å†³ç­–æ‰§è¡Œå¼•æ“(`DecisionExecutionEngine`)

### L4 æ‰§è¡Œå±‚ (Project & Ops) - âœ… è‰¯å¥½å®ç°

| ç”¨æˆ·æ¡†æ¶è¦æ±‚ | BMOSå½“å‰å®ç° | å·®è·è¯„ä¼° |
|-------------|-------------|----------|
| ä»»åŠ¡ç®¡ç† | âœ… æœ‰æ‰§è¡Œå±‚å†³ç­– | **åŸºæœ¬åŒ¹é…** |
| å·¥å•ç®¡ç† | âš ï¸ é€šè¿‡æ‰§è¡ŒåŠ¨ä½œéƒ¨åˆ†å®ç° | **ä¸€èˆ¬å·®è·** |
| å®é™…å€¼è·Ÿè¸ª | âœ… æœ‰KPIå®é™…å€¼è·Ÿè¸ª | **åŸºæœ¬åŒ¹é…** |
| Jira/ERPæ¥å£ | âŒ æ—  | **é‡è¦å·®è·** |

**BMOSä¼˜åŠ¿**:
- å®Œæ•´çš„æ‰§è¡Œè·Ÿè¸ªæœºåˆ¶
- å®é™…å€¼ä¸ç›®æ ‡å€¼å¯¹æ¯”
- æ‰§è¡ŒçŠ¶æ€ç®¡ç†

### L5 æ•°æ®å±‚ (Data Lake) - âš ï¸ éƒ¨åˆ†å®ç°

| ç”¨æˆ·æ¡†æ¶è¦æ±‚ | BMOSå½“å‰å®ç° | å·®è·è¯„ä¼° |
|-------------|-------------|----------|
| å†³ç­–èŠ‚ç‚¹å­˜å‚¨ | âœ… æœ‰`hierarchical_decisions`è¡¨ | **åŸºæœ¬åŒ¹é…** |
| ä¾èµ–è¾¹ç®¡ç† | âš ï¸ é€šè¿‡`decision_decomposition`è¡¨éƒ¨åˆ†å®ç° | **é‡è¦å·®è·** |
| KPIå®é™…å€¼ | âœ… æœ‰`decision_kpi`è¡¨ | **åŸºæœ¬åŒ¹é…** |
| å˜æ›´äº‹ä»¶ | âŒ æ—  | **é‡è¦å·®è·** |
| å›¾æ•°æ®åº“+æ—¶åºåº“ | âŒ ä»…PostgreSQL | **å…³é”®å·®è·** |

**BMOSä¼˜åŠ¿**:
- å®Œæ•´çš„æ•°æ®æ¨¡å‹è®¾è®¡
- æ”¯æŒå¤šç§Ÿæˆ·(RLS)
- è‰¯å¥½çš„ç´¢å¼•ä¼˜åŒ–

---

## ğŸ”„ 3æ¡é—­ç¯åˆ†æ

### 1. åˆ¶å®šé—­ç¯ (Plan) - âŒ ä¸¥é‡ç¼ºå¤±

| ç”¨æˆ·æ¡†æ¶è¦æ±‚ | BMOSå½“å‰å®ç° | å·®è·è¯„ä¼° |
|-------------|-------------|----------|
| éœ€æ±‚æ•è· | âŒ æ—  | **å…³é”®å·®è·** |
| æ¡†æ¶å‡çº§æµç¨‹ | âŒ æ—  | **å…³é”®å·®è·** |
| å¯¹é½ç®—æ³• | âŒ æ—  | **å…³é”®å·®è·** |
| ç›®æ ‡ä¸€è‡´æ€§æ£€æŸ¥ | âŒ æ—  | **å…³é”®å·®è·** |
| èµ„æºå†²çªæ£€æµ‹ | âŒ æ—  | **å…³é”®å·®è·** |
| å†»ç»“å¿«ç…§ | âŒ æ—  | **å…³é”®å·®è·** |
| Decision-Baseline | âŒ æ—  | **å…³é”®å·®è·** |

**å½±å“**: æ— æ³•å®ç°"éœ€æ±‚â†’æ¡†æ¶â†’å¯¹é½â†’å†»ç»“"çš„å®Œæ•´åˆ¶å®šæµç¨‹ã€‚

### 2. æ‰§è¡Œé—­ç¯ (Do-Check) - âš ï¸ éƒ¨åˆ†å®ç°

| ç”¨æˆ·æ¡†æ¶è¦æ±‚ | BMOSå½“å‰å®ç° | å·®è·è¯„ä¼° |
|-------------|-------------|----------|
| å®é™…å€¼æŠ“å– | âœ… æœ‰æ•°æ®é‡‡é›†æœºåˆ¶ | **åŸºæœ¬åŒ¹é…** |
| åå·®è®¡ç®— | âœ… æœ‰KPIå¯¹æ¯” | **åŸºæœ¬åŒ¹é…** |
| æ ¹å› å®šä½ | âš ï¸ é€šè¿‡å½’å› åˆ†æéƒ¨åˆ†å®ç° | **é‡è¦å·®è·** |
| çº å/å˜æ›´ | âŒ æ—  | **é‡è¦å·®è·** |
| åå·®é—¨é™ | âŒ æ—  | **é‡è¦å·®è·** |
| å½±å“ä¼ æ’­ | âŒ æ—  | **å…³é”®å·®è·** |

**BMOSä¼˜åŠ¿**:
- æœ‰`DecisionExecutionEngine`
- æœ‰æ‰§è¡Œè·Ÿè¸ªæœºåˆ¶
- æœ‰æ•°æ®é‡‡é›†å’ŒæŒ‡æ ‡è®¡ç®—

### 3. å¤ç›˜é—­ç¯ (Act) - âŒ ä¸¥é‡ç¼ºå¤±

| ç”¨æˆ·æ¡†æ¶è¦æ±‚ | BMOSå½“å‰å®ç° | å·®è·è¯„ä¼° |
|-------------|-------------|----------|
| ç»“æœè¯„ä¼° | âŒ æ—  | **å…³é”®å·®è·** |
| å‡è®¾æ£€éªŒ | âŒ æ—  | **å…³é”®å·®è·** |
| çŸ¥è¯†æ²‰æ·€ | âš ï¸ æœ‰ä¼ä¸šè®°å¿†ç³»ç»Ÿ | **é‡è¦å·®è·** |
| æ¡†æ¶ä¿®æ­£ | âŒ æ—  | **å…³é”®å·®è·** |
| å†³ç­–è¯„åˆ†å¡ | âŒ æ—  | **å…³é”®å·®è·** |
| Post-mortem | âŒ æ—  | **å…³é”®å·®è·** |

**BMOSä¼˜åŠ¿**:
- æœ‰ä¼ä¸šè®°å¿†ç³»ç»Ÿ(`EnterpriseMemoryService`)
- æœ‰æ¨¡å¼è¯†åˆ«å’Œæ´å¯Ÿç”Ÿæˆ
- æœ‰æ¨èç³»ç»Ÿ

---

## âš™ï¸ 2ç±»å¼•æ“è¯„ä¼°

### 1. ä¸€è‡´æ€§å¼•æ“ - âŒ å®Œå…¨ç¼ºå¤±

| ç”¨æˆ·æ¡†æ¶è¦æ±‚ | BMOSå½“å‰å®ç° | å·®è·è¯„ä¼° |
|-------------|-------------|----------|
| çº¿æ€§è§„åˆ’æ£€èµ„æºå†²çª | âŒ æ—  | **å…³é”®å·®è·** |
| ç›®æ ‡å‘é‡ä½™å¼¦ç›¸ä¼¼åº¦ | âŒ æ—  | **å…³é”®å·®è·** |
| å¾ªç¯ä¾èµ–æ£€æµ‹(DFS) | âŒ æ—  | **å…³é”®å·®è·** |
| é€šè¿‡/ä¸é€šè¿‡æ˜ç»†æŠ¥å‘Š | âŒ æ—  | **å…³é”®å·®è·** |

**å½±å“**: æ— æ³•å®ç°å†³ç­–é—´çš„å†²çªæ£€æµ‹å’Œä¸€è‡´æ€§éªŒè¯ã€‚

### 2. å½±å“ä¼ æ’­å¼•æ“ - âŒ å®Œå…¨ç¼ºå¤±

| ç”¨æˆ·æ¡†æ¶è¦æ±‚ | BMOSå½“å‰å®ç° | å·®è·è¯„ä¼° |
|-------------|-------------|----------|
| è´å¶æ–¯ç½‘ç»œæ±‚è‡´å› èŠ‚ç‚¹ | âŒ æ—  | **å…³é”®å·®è·** |
| è’™ç‰¹å¡ç½—æ¨¡æ‹Ÿ | âŒ æ—  | **å…³é”®å·®è·** |
| å½±å“åº¦è¯„åˆ†(PageRankå˜ç§) | âŒ æ—  | **å…³é”®å·®è·** |
| å—å½±å“å†³ç­–Top-N | âŒ æ—  | **å…³é”®å·®è·** |
| é£é™©çƒ­åº¦å›¾ | âŒ æ—  | **å…³é”®å·®è·** |

**å½±å“**: æ— æ³•å®ç°å†³ç­–å½±å“çš„ä¼ æ’­åˆ†æå’Œé£é™©è¯„ä¼°ã€‚

---

## ğŸ—„ï¸ æ•°æ®æ¨¡å‹åˆ†æ

### PostgreSQL vs å›¾æ•°æ®åº“éœ€æ±‚

| åŠŸèƒ½éœ€æ±‚ | PostgreSQLå®ç° | å›¾æ•°æ®åº“ä¼˜åŠ¿ | å·®è·è¯„ä¼° |
|---------|---------------|-------------|----------|
| å†³ç­–èŠ‚ç‚¹å­˜å‚¨ | âœ… è‰¯å¥½ | åŸç”ŸèŠ‚ç‚¹æ”¯æŒ | **ä¸€èˆ¬å·®è·** |
| ä¾èµ–è¾¹ç®¡ç† | âš ï¸ é€šè¿‡å¤–é”® | åŸç”Ÿè¾¹æ”¯æŒ | **é‡è¦å·®è·** |
| å¤æ‚å›¾æŸ¥è¯¢ | âš ï¸ é€’å½’CTE | åŸç”Ÿå›¾æŸ¥è¯¢ | **é‡è¦å·®è·** |
| å½±å“ä¼ æ’­è®¡ç®— | âŒ å¤æ‚ | åŸç”Ÿå›¾ç®—æ³• | **å…³é”®å·®è·** |
| è·¯å¾„åˆ†æ | âš ï¸ å¤æ‚ | åŸç”Ÿè·¯å¾„æŸ¥è¯¢ | **é‡è¦å·®è·** |

### å½“å‰æ•°æ®æ¨¡å‹ä¼˜åŠ¿
- **å®Œæ•´æ€§**: 23å¼ æ ¸å¿ƒè¡¨è¦†ç›–ä¸šåŠ¡å…¨æµç¨‹
- **æ ‡å‡†åŒ–**: éµå¾ªæ˜Ÿå‹æ¨¡å‹è®¾è®¡
- **æ€§èƒ½**: è‰¯å¥½çš„ç´¢å¼•ä¼˜åŒ–
- **å®‰å…¨**: å®Œæ•´çš„RLSå¤šç§Ÿæˆ·æ”¯æŒ

### å›¾æ•°æ®åº“éœ€æ±‚åˆ†æ
- **å†³ç­–å…³ç³»å›¾è°±**: éœ€è¦å¤æ‚çš„èŠ‚ç‚¹-è¾¹å…³ç³»
- **ä¾èµ–è¾¹æƒé‡**: éœ€è¦è¾¹å±æ€§ç®¡ç†
- **å½±å“ä¼ æ’­**: éœ€è¦å›¾ç®—æ³•æ”¯æŒ
- **è·¯å¾„æŸ¥è¯¢**: éœ€è¦é«˜æ•ˆçš„å›¾éå†

---

## ğŸ“Š å·®è·æ€»ç»“

### å…³é”®å·®è· (Critical Gaps)
1. **æˆ˜ç•¥å±‚å®Œå…¨ç¼ºå¤±** - æ— ä½¿å‘½æ„¿æ™¯ã€åŒ—ææ˜ŸæŒ‡æ ‡ç®¡ç†
2. **åˆ¶å®šé—­ç¯ç¼ºå¤±** - æ— éœ€æ±‚æ•è·ã€å¯¹é½ç®—æ³•ã€å†»ç»“æœºåˆ¶
3. **å¤ç›˜é—­ç¯ç¼ºå¤±** - æ— ç»“æœè¯„ä¼°ã€å‡è®¾æ£€éªŒã€è¯„åˆ†å¡
4. **ä¸€è‡´æ€§å¼•æ“ç¼ºå¤±** - æ— èµ„æºå†²çªæ£€æµ‹ã€ç›®æ ‡ä¸€è‡´æ€§éªŒè¯
5. **å½±å“ä¼ æ’­å¼•æ“ç¼ºå¤±** - æ— è´å¶æ–¯ç½‘ç»œã€è’™ç‰¹å¡ç½—æ¨¡æ‹Ÿ
6. **å›¾æ•°æ®åº“ç‰¹æ€§ç¼ºå¤±** - æ— å¤æ‚å›¾æŸ¥è¯¢ã€å½±å“ä¼ æ’­è®¡ç®—

### é‡è¦å·®è· (Important Gaps)
1. **æŠ•èµ„æ²™ç›˜ç¼ºå¤±** - æ— EPM/æŠ•èµ„ç®¡ç†ç•Œé¢
2. **åå·®é—¨é™æœºåˆ¶ç¼ºå¤±** - æ— è‡ªåŠ¨å‘Šè­¦å’Œçº å
3. **å˜æ›´äº‹ä»¶è·Ÿè¸ªç¼ºå¤±** - æ— å†³ç­–å˜æ›´å†å²
4. **æ ¹å› å®šä½èƒ½åŠ›ä¸è¶³** - å½’å› åˆ†æä¸å¤Ÿæ·±å…¥
5. **å›¾æŸ¥è¯¢èƒ½åŠ›ä¸è¶³** - é€’å½’CTEæ€§èƒ½æœ‰é™

### ä¸€èˆ¬å·®è· (Minor Gaps)
1. **å·¥å•ç®¡ç†ç®€åŒ–** - æ‰§è¡ŒåŠ¨ä½œç®¡ç†ä¸å¤Ÿç²¾ç»†
2. **è®¡åˆ’ç®¡ç†åˆ†æ•£** - ç¼ºå°‘ç»Ÿä¸€çš„è®¡åˆ’ç®¡ç†ç•Œé¢
3. **æ—¶åºæ•°æ®ä¼˜åŒ–** - ç¼ºå°‘ä¸“é—¨çš„æ—¶åºæ•°æ®åº“

---

## ğŸ› ï¸ åŸºäºPostgreSQLçš„æ”¹è¿›å»ºè®®

### 1. æˆ˜ç•¥å±‚å®ç°æ–¹æ¡ˆ

#### 1.1 ä½¿å‘½æ„¿æ™¯ç®¡ç†
```sql
-- åˆ›å»ºæˆ˜ç•¥ç›®æ ‡è¡¨
CREATE TABLE strategic_objectives (
    objective_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tenant_id UUID NOT NULL REFERENCES tenants(tenant_id),
    objective_type VARCHAR(50) NOT NULL, -- 'mission', 'vision', 'north_star'
    objective_content TEXT NOT NULL,
    priority_level INT DEFAULT 1,
    target_date DATE,
    status VARCHAR(20) DEFAULT 'active',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- åˆ›å»ºåŒ—ææ˜ŸæŒ‡æ ‡è¡¨
CREATE TABLE north_star_metrics (
    metric_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tenant_id UUID NOT NULL REFERENCES tenants(tenant_id),
    metric_name VARCHAR(200) NOT NULL,
    metric_description TEXT,
    target_value DECIMAL(15,2),
    current_value DECIMAL(15,2),
    measurement_frequency VARCHAR(20), -- 'daily', 'weekly', 'monthly'
    calculation_method TEXT,
    data_source VARCHAR(200),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 1.2 è‘£äº‹ä¼šé—¨æˆ·åŠŸèƒ½
- åˆ›å»ºæˆ˜ç•¥ä»ªè¡¨ç›˜è§†å›¾
- å®ç°OKRç®¡ç†ç•Œé¢
- æ·»åŠ æˆ˜ç•¥å†³ç­–å®¡æ‰¹æµç¨‹

### 2. åˆ¶å®šé—­ç¯å®ç°æ–¹æ¡ˆ

#### 2.1 éœ€æ±‚æ•è·æœºåˆ¶
```sql
-- åˆ›å»ºå†³ç­–éœ€æ±‚è¡¨
CREATE TABLE decision_requirements (
    requirement_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tenant_id UUID NOT NULL REFERENCES tenants(tenant_id),
    parent_decision_id UUID REFERENCES hierarchical_decisions(decision_id),
    requirement_type VARCHAR(50) NOT NULL, -- 'strategic', 'tactical', 'operational'
    requirement_content TEXT NOT NULL,
    requester_id UUID REFERENCES user_profiles(user_id),
    priority_level INT DEFAULT 1,
    status VARCHAR(20) DEFAULT 'pending', -- 'pending', 'approved', 'rejected'
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 2.2 å¯¹é½ç®—æ³•å®ç°
```python
class DecisionAlignmentEngine:
    def __init__(self):
        self.resource_conflict_detector = ResourceConflictDetector()
        self.goal_consistency_checker = GoalConsistencyChecker()
        self.circular_dependency_detector = CircularDependencyDetector()
    
    async def check_alignment(self, decision_id: str) -> Dict[str, Any]:
        """æ£€æŸ¥å†³ç­–å¯¹é½æ€§"""
        # 1. èµ„æºå†²çªæ£€æµ‹
        resource_conflicts = await self.resource_conflict_detector.detect_conflicts(decision_id)
        
        # 2. ç›®æ ‡ä¸€è‡´æ€§æ£€æŸ¥
        goal_consistency = await self.goal_consistency_checker.check_consistency(decision_id)
        
        # 3. å¾ªç¯ä¾èµ–æ£€æµ‹
        circular_deps = await self.circular_dependency_detector.detect_circular_deps(decision_id)
        
        return {
            "decision_id": decision_id,
            "resource_conflicts": resource_conflicts,
            "goal_consistency": goal_consistency,
            "circular_dependencies": circular_deps,
            "alignment_score": self.calculate_alignment_score(resource_conflicts, goal_consistency, circular_deps),
            "recommendations": self.generate_alignment_recommendations(resource_conflicts, goal_consistency, circular_deps)
        }
```

#### 2.3 å†»ç»“å¿«ç…§æœºåˆ¶
```sql
-- åˆ›å»ºå†³ç­–åŸºçº¿è¡¨
CREATE TABLE decision_baselines (
    baseline_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    decision_id UUID NOT NULL REFERENCES hierarchical_decisions(decision_id),
    baseline_version INT NOT NULL,
    baseline_data JSONB NOT NULL, -- å®Œæ•´çš„å†³ç­–å¿«ç…§
    frozen_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    frozen_by UUID REFERENCES user_profiles(user_id),
    status VARCHAR(20) DEFAULT 'active' -- 'active', 'superseded'
);
```

### 3. å¤ç›˜é—­ç¯å®ç°æ–¹æ¡ˆ

#### 3.1 å†³ç­–è¯„åˆ†å¡
```sql
-- åˆ›å»ºå†³ç­–è¯„åˆ†è¡¨
CREATE TABLE decision_scorecards (
    scorecard_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    decision_id UUID NOT NULL REFERENCES hierarchical_decisions(decision_id),
    evaluation_period_start DATE NOT NULL,
    evaluation_period_end DATE NOT NULL,
    target_achievement_score DECIMAL(5,2), -- ç›®æ ‡è¾¾æˆåº¦ 40%
    budget_consumption_score DECIMAL(5,2), -- é¢„ç®—æ¶ˆè€—ç‡ 20%
    parent_contribution_score DECIMAL(5,2), -- å¯¹ä¸Šçº§å†³ç­–è´¡çŒ®åº¦ 20%
    downstream_impact_score DECIMAL(5,2), -- ä¸‹æ¸¸å½±å“å·®è¯„ç‡ 20%
    total_score DECIMAL(5,2) GENERATED ALWAYS AS (
        target_achievement_score * 0.4 + 
        budget_consumption_score * 0.2 + 
        parent_contribution_score * 0.2 + 
        downstream_impact_score * 0.2
    ) STORED,
    evaluator_id UUID REFERENCES user_profiles(user_id),
    evaluation_date TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 3.2 å‡è®¾æ£€éªŒæœºåˆ¶
```python
class AssumptionValidator:
    def __init__(self):
        self.hypothesis_tracker = HypothesisTracker()
        self.actual_data_collector = ActualDataCollector()
    
    async def validate_assumptions(self, decision_id: str) -> Dict[str, Any]:
        """éªŒè¯å†³ç­–å‡è®¾"""
        # 1. è·å–å†³ç­–å‡è®¾
        assumptions = await self.hypothesis_tracker.get_decision_assumptions(decision_id)
        
        # 2. æ”¶é›†å®é™…æ•°æ®
        actual_data = await self.actual_data_collector.collect_actual_data(decision_id)
        
        # 3. å¯¹æ¯”åˆ†æ
        validation_results = []
        for assumption in assumptions:
            actual_value = actual_data.get(assumption['metric_name'])
            if actual_value is not None:
                deviation = abs(actual_value - assumption['expected_value']) / assumption['expected_value']
                validation_results.append({
                    "assumption_id": assumption['assumption_id'],
                    "metric_name": assumption['metric_name'],
                    "expected_value": assumption['expected_value'],
                    "actual_value": actual_value,
                    "deviation": deviation,
                    "is_valid": deviation <= assumption['tolerance_threshold'],
                    "status": "valid" if deviation <= assumption['tolerance_threshold'] else "invalid"
                })
        
        return {
            "decision_id": decision_id,
            "validation_results": validation_results,
            "overall_validity": all(r['is_valid'] for r in validation_results),
            "invalid_assumptions": [r for r in validation_results if not r['is_valid']]
        }
```

### 4. ä¸€è‡´æ€§å¼•æ“å®ç°æ–¹æ¡ˆ

#### 4.1 èµ„æºå†²çªæ£€æµ‹
```python
class ResourceConflictDetector:
    def __init__(self):
        self.db_service = DatabaseService()
    
    async def detect_conflicts(self, decision_id: str) -> List[Dict[str, Any]]:
        """æ£€æµ‹èµ„æºå†²çª"""
        # 1. è·å–å†³ç­–èµ„æºéœ€æ±‚
        resource_requirements = await self.get_decision_resource_requirements(decision_id)
        
        # 2. è·å–åŒæœŸå…¶ä»–å†³ç­–çš„èµ„æºéœ€æ±‚
        concurrent_decisions = await self.get_concurrent_decisions(decision_id)
        
        # 3. æ£€æµ‹å†²çª
        conflicts = []
        for requirement in resource_requirements:
            for concurrent_decision in concurrent_decisions:
                conflict = await self.check_resource_conflict(requirement, concurrent_decision)
                if conflict:
                    conflicts.append(conflict)
        
        return conflicts
    
    async def check_resource_conflict(self, req1: Dict, req2: Dict) -> Optional[Dict]:
        """æ£€æŸ¥ä¸¤ä¸ªèµ„æºéœ€æ±‚æ˜¯å¦å†²çª"""
        if (req1['resource_type'] == req2['resource_type'] and 
            req1['time_period'] == req2['time_period'] and
            req1['required_amount'] + req2['required_amount'] > req1['available_amount']):
            return {
                "resource_type": req1['resource_type'],
                "time_period": req1['time_period'],
                "conflict_type": "insufficient_resource",
                "required_total": req1['required_amount'] + req2['required_amount'],
                "available_amount": req1['available_amount'],
                "conflicting_decisions": [req1['decision_id'], req2['decision_id']]
            }
        return None
```

#### 4.2 ç›®æ ‡ä¸€è‡´æ€§æ£€æŸ¥
```python
class GoalConsistencyChecker:
    def __init__(self):
        self.vector_similarity_calculator = VectorSimilarityCalculator()
    
    async def check_consistency(self, decision_id: str) -> Dict[str, Any]:
        """æ£€æŸ¥ç›®æ ‡ä¸€è‡´æ€§"""
        # 1. è·å–å†³ç­–ç›®æ ‡å‘é‡
        decision_goals = await self.get_decision_goals(decision_id)
        decision_vector = self.vectorize_goals(decision_goals)
        
        # 2. è·å–åŒçº§å†³ç­–ç›®æ ‡å‘é‡
        sibling_decisions = await self.get_sibling_decisions(decision_id)
        sibling_vectors = [self.vectorize_goals(goals) for goals in sibling_decisions]
        
        # 3. è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦
        similarities = []
        for i, sibling_vector in enumerate(sibling_vectors):
            similarity = self.vector_similarity_calculator.cosine_similarity(
                decision_vector, sibling_vector
            )
            similarities.append({
                "sibling_decision_id": sibling_decisions[i]['decision_id'],
                "cosine_similarity": similarity,
                "is_consistent": similarity >= 0.5  # é˜ˆå€¼å¯é…ç½®
            })
        
        return {
            "decision_id": decision_id,
            "similarities": similarities,
            "overall_consistency": all(s['is_consistent'] for s in similarities),
            "inconsistent_decisions": [s for s in similarities if not s['is_consistent']]
        }
```

### 5. å½±å“ä¼ æ’­å¼•æ“å®ç°æ–¹æ¡ˆ

#### 5.1 è´å¶æ–¯ç½‘ç»œå®ç°
```python
class BayesianNetworkEngine:
    def __init__(self):
        self.network_builder = NetworkBuilder()
        self.inference_engine = InferenceEngine()
    
    async def find_causal_nodes(self, decision_id: str, deviation_value: float) -> List[Dict[str, Any]]:
        """ä½¿ç”¨è´å¶æ–¯ç½‘ç»œæ‰¾åˆ°æœ€å¯èƒ½çš„è‡´å› èŠ‚ç‚¹"""
        # 1. æ„å»ºå†³ç­–å½±å“ç½‘ç»œ
        network = await self.network_builder.build_decision_network(decision_id)
        
        # 2. è®¾ç½®è§‚å¯Ÿåˆ°çš„åå·®
        evidence = {decision_id: deviation_value}
        
        # 3. è¿›è¡Œè´å¶æ–¯æ¨ç†
        causal_probabilities = await self.inference_engine.infer_causal_probabilities(
            network, evidence
        )
        
        # 4. æ’åºå¹¶è¿”å›Top-N
        sorted_causes = sorted(
            causal_probabilities.items(),
            key=lambda x: x[1],
            reverse=True
        )
        
        return [
            {
                "node_id": node_id,
                "causal_probability": prob,
                "node_type": network.nodes[node_id]['type'],
                "node_description": network.nodes[node_id]['description']
            }
            for node_id, prob in sorted_causes[:10]  # Top-10
        ]
```

#### 5.2 è’™ç‰¹å¡ç½—æ¨¡æ‹Ÿå®ç°
```python
class MonteCarloSimulator:
    def __init__(self):
        self.random_generator = RandomGenerator()
        self.statistical_analyzer = StatisticalAnalyzer()
    
    async def simulate_impact_propagation(self, decision_id: str, simulation_runs: int = 1000) -> Dict[str, Any]:
        """è’™ç‰¹å¡ç½—æ¨¡æ‹Ÿå½±å“ä¼ æ’­"""
        # 1. è·å–å†³ç­–å½±å“ç½‘ç»œ
        network = await self.get_decision_impact_network(decision_id)
        
        # 2. è®¾ç½®æ¨¡æ‹Ÿå‚æ•°
        simulation_results = []
        
        for run in range(simulation_runs):
            # 3. éšæœºé‡‡æ ·å½±å“æƒé‡
            random_weights = self.random_generator.sample_weights(network)
            
            # 4. è®¡ç®—å½±å“ä¼ æ’­
            propagated_impacts = self.calculate_impact_propagation(network, random_weights)
            
            simulation_results.append(propagated_impacts)
        
        # 5. ç»Ÿè®¡åˆ†æ
        statistical_analysis = self.statistical_analyzer.analyze_simulation_results(simulation_results)
        
        return {
            "decision_id": decision_id,
            "simulation_runs": simulation_runs,
            "statistical_analysis": statistical_analysis,
            "confidence_intervals": self.calculate_confidence_intervals(simulation_results),
            "risk_heatmap": self.generate_risk_heatmap(statistical_analysis)
        }
```

### 6. å›¾æ•°æ®åº“ç‰¹æ€§å®ç°æ–¹æ¡ˆ

#### 6.1 ä½¿ç”¨é€’å½’CTEæ¨¡æ‹Ÿå›¾æŸ¥è¯¢
```sql
-- å†³ç­–ä¾èµ–å…³ç³»æŸ¥è¯¢
WITH RECURSIVE decision_dependencies AS (
    -- åŸºç¡€æƒ…å†µï¼šç›´æ¥ä¾èµ–
    SELECT 
        parent_decision_id,
        child_decision_id,
        1 as depth,
        ARRAY[parent_decision_id, child_decision_id] as path
    FROM decision_decomposition
    WHERE parent_decision_id = $1
    
    UNION ALL
    
    -- é€’å½’æƒ…å†µï¼šé—´æ¥ä¾èµ–
    SELECT 
        dd.parent_decision_id,
        dc.child_decision_id,
        dd.depth + 1,
        dd.path || dc.child_decision_id
    FROM decision_dependencies dd
    JOIN decision_decomposition dc ON dd.child_decision_id = dc.parent_decision_id
    WHERE NOT dc.child_decision_id = ANY(dd.path)  -- é¿å…å¾ªç¯
)
SELECT * FROM decision_dependencies;
```

#### 6.2 ä½¿ç”¨JSONBå­˜å‚¨å›¾å±æ€§
```sql
-- åˆ›å»ºå†³ç­–å…³ç³»è¡¨
CREATE TABLE decision_relationships (
    relationship_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    source_decision_id UUID NOT NULL REFERENCES hierarchical_decisions(decision_id),
    target_decision_id UUID NOT NULL REFERENCES hierarchical_decisions(decision_id),
    relationship_type VARCHAR(50) NOT NULL, -- 'parent_child', 'dependency', 'trigger'
    relationship_properties JSONB, -- å­˜å‚¨è¾¹çš„å±æ€§
    weight DECIMAL(5,4) DEFAULT 1.0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_decision_relationships_source ON decision_relationships(source_decision_id);
CREATE INDEX idx_decision_relationships_target ON decision_relationships(target_decision_id);
CREATE INDEX idx_decision_relationships_type ON decision_relationships(relationship_type);
CREATE INDEX idx_decision_relationships_properties ON decision_relationships USING GIN(relationship_properties);
```

#### 6.3 ä½¿ç”¨ç‰©åŒ–è§†å›¾ä¼˜åŒ–æŸ¥è¯¢
```sql
-- åˆ›å»ºå†³ç­–å½±å“ä¼ æ’­ç‰©åŒ–è§†å›¾
CREATE MATERIALIZED VIEW decision_impact_propagation AS
WITH RECURSIVE impact_calculation AS (
    -- åŸºç¡€æƒ…å†µï¼šç›´æ¥å½±å“
    SELECT 
        source_decision_id,
        target_decision_id,
        weight,
        1 as propagation_depth,
        weight as cumulative_impact
    FROM decision_relationships
    WHERE relationship_type = 'dependency'
    
    UNION ALL
    
    -- é€’å½’æƒ…å†µï¼šé—´æ¥å½±å“
    SELECT 
        ic.source_decision_id,
        dr.target_decision_id,
        dr.weight,
        ic.propagation_depth + 1,
        ic.cumulative_impact * dr.weight
    FROM impact_calculation ic
    JOIN decision_relationships dr ON ic.target_decision_id = dr.source_decision_id
    WHERE ic.propagation_depth < 5  -- é™åˆ¶é€’å½’æ·±åº¦
)
SELECT 
    source_decision_id,
    target_decision_id,
    propagation_depth,
    cumulative_impact,
    CASE 
        WHEN cumulative_impact > 0.8 THEN 'high'
        WHEN cumulative_impact > 0.5 THEN 'medium'
        ELSE 'low'
    END as impact_level
FROM impact_calculation;

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_impact_propagation_source ON decision_impact_propagation(source_decision_id);
CREATE INDEX idx_impact_propagation_target ON decision_impact_propagation(target_decision_id);
CREATE INDEX idx_impact_propagation_level ON decision_impact_propagation(impact_level);
```

---

## ğŸ“ˆ æ”¹è¿›ä¼˜å…ˆçº§çŸ©é˜µ

### é«˜ä¼˜å…ˆçº§ (ç«‹å³å®æ–½)
1. **æˆ˜ç•¥å±‚å»ºè®¾** - ä½¿å‘½æ„¿æ™¯ã€åŒ—ææ˜ŸæŒ‡æ ‡ç®¡ç†
2. **åˆ¶å®šé—­ç¯å®Œå–„** - éœ€æ±‚æ•è·ã€å¯¹é½ç®—æ³•ã€å†»ç»“æœºåˆ¶
3. **å¤ç›˜é—­ç¯å»ºè®¾** - è¯„åˆ†å¡ã€å‡è®¾æ£€éªŒã€çŸ¥è¯†æ²‰æ·€
4. **ä¸€è‡´æ€§å¼•æ“å®ç°** - èµ„æºå†²çªæ£€æµ‹ã€ç›®æ ‡ä¸€è‡´æ€§éªŒè¯

### ä¸­ä¼˜å…ˆçº§ (3-6ä¸ªæœˆ)
1. **å½±å“ä¼ æ’­å¼•æ“å®ç°** - è´å¶æ–¯ç½‘ç»œã€è’™ç‰¹å¡ç½—æ¨¡æ‹Ÿ
2. **å›¾æ•°æ®åº“ç‰¹æ€§ä¼˜åŒ–** - é€’å½’CTEã€JSONBã€ç‰©åŒ–è§†å›¾
3. **åå·®é—¨é™æœºåˆ¶** - è‡ªåŠ¨å‘Šè­¦ã€çº åå»ºè®®
4. **å˜æ›´äº‹ä»¶è·Ÿè¸ª** - å†³ç­–å˜æ›´å†å²ã€å½±å“åˆ†æ

### ä½ä¼˜å…ˆçº§ (6-12ä¸ªæœˆ)
1. **å›¾æ•°æ®åº“è¿ç§»è¯„ä¼°** - Neo4j/TigerGraphé›†æˆ
2. **é«˜çº§å¯è§†åŒ–** - å†³ç­–å…³ç³»å›¾è°±ã€é£é™©çƒ­åº¦å›¾
3. **AIå¢å¼ºåŠŸèƒ½** - æ™ºèƒ½æ¨èã€è‡ªåŠ¨ä¼˜åŒ–
4. **å¤–éƒ¨æ•°æ®é›†æˆ** - è¡Œä¸šæ•°æ®ã€å®è§‚æ•°æ®

---

## ğŸ’° å·¥ä½œé‡ä¼°ç®—

### å¼€å‘å·¥ä½œé‡ (äººæœˆ)
- **æˆ˜ç•¥å±‚å»ºè®¾**: 2äººæœˆ
- **åˆ¶å®šé—­ç¯**: 3äººæœˆ
- **å¤ç›˜é—­ç¯**: 2äººæœˆ
- **ä¸€è‡´æ€§å¼•æ“**: 2äººæœˆ
- **å½±å“ä¼ æ’­å¼•æ“**: 3äººæœˆ
- **å›¾æ•°æ®åº“ç‰¹æ€§**: 1äººæœˆ
- **æµ‹è¯•å’Œä¼˜åŒ–**: 1äººæœˆ

**æ€»è®¡**: 14äººæœˆ

### æŠ€æœ¯é£é™©
- **ä¸­ç­‰é£é™©**: è´å¶æ–¯ç½‘ç»œå’Œè’™ç‰¹å¡ç½—æ¨¡æ‹Ÿçš„ç®—æ³•å¤æ‚åº¦
- **ä½é£é™©**: PostgreSQLå›¾æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–
- **ä½é£é™©**: ç°æœ‰ç³»ç»Ÿé›†æˆ

### é¢„æœŸæ•ˆæœ
- **å†³ç­–æ•ˆç‡æå‡**: 50%
- **å†²çªæ£€æµ‹å‡†ç¡®ç‡**: 85%
- **å½±å“åˆ†æè¦†ç›–åº¦**: 90%
- **å¤ç›˜è´¨é‡æå‡**: 60%

---

## ğŸ¯ ç»“è®ºä¸å»ºè®®

### æ ¸å¿ƒç»“è®º
BMOSç³»ç»Ÿåœ¨**æ•°æ®åŸºç¡€**å’Œ**æ‰§è¡Œè·Ÿè¸ª**æ–¹é¢å·²æœ‰è‰¯å¥½åŸºç¡€ï¼Œä½†åœ¨**ç³»ç»Ÿæ€§å†³ç­–æ¡†æ¶**æ–¹é¢å­˜åœ¨æ˜¾è‘—å·®è·ã€‚é€šè¿‡åŸºäºPostgreSQLçš„æ”¹è¿›æ–¹æ¡ˆï¼Œå¯ä»¥åœ¨ä¸å¼•å…¥æ–°æŠ€æœ¯æ ˆçš„å‰æä¸‹ï¼Œå®ç°80%çš„æ¡†æ¶è¦æ±‚ã€‚

### å…³é”®å»ºè®®
1. **ä¼˜å…ˆå»ºè®¾æˆ˜ç•¥å±‚** - å»ºç«‹å®Œæ•´çš„å†³ç­–å±‚çº§ä½“ç³»
2. **é‡ç‚¹å®Œå–„3æ¡é—­ç¯** - ç‰¹åˆ«æ˜¯åˆ¶å®šé—­ç¯å’Œå¤ç›˜é—­ç¯
3. **é€æ­¥å®ç°2ç±»å¼•æ“** - å…ˆå®ç°ä¸€è‡´æ€§å¼•æ“ï¼Œå†å®ç°å½±å“ä¼ æ’­å¼•æ“
4. **ä¼˜åŒ–PostgreSQLå›¾æŸ¥è¯¢** - é€šè¿‡é€’å½’CTEå’Œç‰©åŒ–è§†å›¾æå‡æ€§èƒ½

### å®æ–½è·¯å¾„
1. **Phase 1** (1-2ä¸ªæœˆ): æˆ˜ç•¥å±‚å»ºè®¾ + åˆ¶å®šé—­ç¯åŸºç¡€
2. **Phase 2** (2-3ä¸ªæœˆ): å¤ç›˜é—­ç¯ + ä¸€è‡´æ€§å¼•æ“
3. **Phase 3** (3-4ä¸ªæœˆ): å½±å“ä¼ æ’­å¼•æ“ + å›¾æŸ¥è¯¢ä¼˜åŒ–
4. **Phase 4** (4-6ä¸ªæœˆ): é«˜çº§åŠŸèƒ½ + æ€§èƒ½ä¼˜åŒ–

é€šè¿‡è¿™ä¸ªæ”¹è¿›æ–¹æ¡ˆï¼ŒBMOSç³»ç»Ÿå°†èƒ½å¤Ÿå®ç°"å†³ç­–åˆ¶å®šä¸æ‰§è¡Œè·Ÿè¸ªç³»ç»Ÿ"çš„æ ¸å¿ƒè¦æ±‚ï¼Œæˆä¸ºä¼ä¸šå†³ç­–ç®¡ç†çš„æœ‰åŠ›å·¥å…·ã€‚

