# 边际分析UI/UX设计规范

## 概述

本文档定义了边际影响分析系统的9个核心页面设计，包括清单管理、仪表盘、分析页面和监控页面。

## 设计原则

- **一致性**: 统一的设计语言和交互模式
- **可访问性**: 符合WCAG 2.1 AA标准
- **响应式**: 支持桌面、平板、移动设备
- **性能**: 页面加载时间<3秒
- **用户体验**: 直观易用的界面设计

## 技术栈

- **前端框架**: React 19 + TypeScript
- **UI组件库**: shadcn/ui + Tailwind CSS
- **图表库**: Recharts + D3.js
- **状态管理**: Zustand
- **路由**: React Router v6

## 页面设计规范

### 1. 资产清单管理页面

#### 页面路径
`/assets`

#### 页面布局
```
┌─────────────────────────────────────────────────────────┐
│ Header: BMOS Insight - 资产清单管理                    │
├─────────────────────────────────────────────────────────┤
│ 面包屑: 首页 > 边际分析 > 资产清单                      │
├─────────────────────────────────────────────────────────┤
│ 操作栏: [新增资产] [批量导入] [导出] [筛选] [搜索]      │
├─────────────────────────────────────────────────────────┤
│ 数据表格:                                               │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 资产编码 │ 资产名称 │ 类型 │ 成本 │ NPV │ 状态 │ 操作 │ │
│ ├─────────────────────────────────────────────────────┤ │
│ │ ASSET-001 │ 生产设备A │ 有形 │ 100万 │ 120万 │ 活跃 │ 编辑 │ │
│ │ ASSET-002 │ 生产设备B │ 有形 │ 150万 │ 135万 │ 活跃 │ 编辑 │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ 分页: [< 上一页] [1] [2] [3] [下一页 >] 共100条记录     │
└─────────────────────────────────────────────────────────┘
```

#### 组件结构
```typescript
interface AssetListPageProps {
  // 页面属性
}

const AssetListPage: React.FC<AssetListPageProps> = () => {
  return (
    <div className="container mx-auto p-6">
      <PageHeader 
        title="资产清单管理"
        breadcrumb={['首页', '边际分析', '资产清单']}
      />
      
      <ActionBar>
        <Button variant="default">新增资产</Button>
        <Button variant="outline">批量导入</Button>
        <Button variant="outline">导出</Button>
        <AssetFilter />
        <SearchInput placeholder="搜索资产..." />
      </ActionBar>
      
      <AssetTable 
        data={assets}
        onEdit={handleEdit}
        onDelete={handleDelete}
        onViewNPV={handleViewNPV}
      />
      
      <Pagination 
        current={page}
        total={total}
        onChange={handlePageChange}
      />
    </div>
  );
};
```

#### 关键功能
- **CRUD操作**: 创建、读取、更新、删除资产
- **NPV计算**: 实时计算和显示资产净现值
- **批量操作**: 支持批量导入、导出、删除
- **高级筛选**: 按类型、状态、成本范围筛选
- **实时搜索**: 支持资产名称、编码搜索

### 2. 能力清单管理页面

#### 页面路径
`/capabilities`

#### 页面布局
```
┌─────────────────────────────────────────────────────────┐
│ Header: BMOS Insight - 能力清单管理                    │
├─────────────────────────────────────────────────────────┤
│ 面包屑: 首页 > 边际分析 > 能力清单                      │
├─────────────────────────────────────────────────────────┤
│ 操作栏: [新增能力] [批量导入] [导出] [筛选] [搜索]      │
├─────────────────────────────────────────────────────────┤
│ 数据表格:                                               │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 能力编码 │ 能力名称 │ 类型 │ 级别 │ 贡献% │ 价值 │ 操作 │ │
│ ├─────────────────────────────────────────────────────┤ │
│ │ CAP-001 │ 数据分析 │ 技术 │ 高级 │ 25% │ 12.5万 │ 编辑 │ │
│ │ CAP-002 │ 项目管理 │ 管理 │ 专家 │ 30% │ 18万 │ 编辑 │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ 分页: [< 上一页] [1] [2] [3] [下一页 >] 共50条记录      │
└─────────────────────────────────────────────────────────┘
```

#### 关键功能
- **能力分类**: 技术、业务、管理、运营能力
- **级别管理**: 初级、中级、高级、专家级别
- **贡献度计算**: 自动计算能力贡献百分比
- **价值量化**: 基于稳定成果的能力价值计算

### 3. 价值评估项管理页面

#### 页面路径
`/value-items`

#### 页面布局
```
┌─────────────────────────────────────────────────────────┐
│ Header: BMOS Insight - 价值评估项管理                   │
├─────────────────────────────────────────────────────────┤
│ 面包屑: 首页 > 边际分析 > 价值评估项                    │
├─────────────────────────────────────────────────────────┤
│ 操作栏: [新增评估项] [批量导入] [导出] [筛选] [搜索]    │
├─────────────────────────────────────────────────────────┤
│ 数据表格:                                               │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 产品 │ 评估项 │ 类别 │ 权重 │ 当前得分 │ 目标得分 │ 操作 │ │
│ ├─────────────────────────────────────────────────────┤ │
│ │ 产品A │ 产品质量 │ 内在 │ 30% │ 8.5 │ 9.0 │ 编辑 │ │
│ │ 产品A │ 品牌认知 │ 认知 │ 25% │ 7.8 │ 8.5 │ 编辑 │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ 分页: [< 上一页] [1] [2] [3] [下一页 >] 共30条记录      │
└─────────────────────────────────────────────────────────┘
```

#### 关键功能
- **三类价值**: 内在价值、认知价值、体验价值
- **权重配置**: 可配置评估项权重
- **得分管理**: 当前得分、目标得分、历史趋势
- **产品关联**: 与产品SKU的关联管理

### 4. 资产价值仪表盘

#### 页面路径
`/dashboards/asset-value`

#### 页面布局
```
┌─────────────────────────────────────────────────────────┐
│ Header: BMOS Insight - 资产价值仪表盘                   │
├─────────────────────────────────────────────────────────┤
│ 面包屑: 首页 > 仪表盘 > 资产价值                        │
├─────────────────────────────────────────────────────────┤
│ 筛选器: [时间范围] [资产类型] [成本范围] [应用]          │
├─────────────────────────────────────────────────────────┤
│ 关键指标卡片:                                           │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐         │
│ │ 总资产数 │ │ 总NPV │ │ 平均ROI │ │ 活跃率 │         │
│ │   100   │ │ 1500万 │ │  15%   │ │  85%   │         │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘         │
├─────────────────────────────────────────────────────────┤
│ 图表区域:                                               │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ NPV趋势图 (折线图)                                  │ │
│ └─────────────────────────────────────────────────────┘ │
│ ┌─────────────────┐ ┌─────────────────────────────────┐ │
│ │ 资产类型分布     │ │ 成本vs NPV散点图                │ │
│ │ (饼图)          │ │                                 │ │
│ └─────────────────┘ └─────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 关键功能
- **NPV趋势**: 资产净现值时间趋势
- **ROI分析**: 投资回报率分析
- **类型分布**: 资产类型分布统计
- **成本效益**: 成本与NPV关系分析

### 5. 能力价值仪表盘

#### 页面路径
`/dashboards/capability-value`

#### 页面布局
```
┌─────────────────────────────────────────────────────────┐
│ Header: BMOS Insight - 能力价值仪表盘                   │
├─────────────────────────────────────────────────────────┤
│ 面包屑: 首页 > 仪表盘 > 能力价值                        │
├─────────────────────────────────────────────────────────┤
│ 筛选器: [时间范围] [能力类型] [级别] [应用]              │
├─────────────────────────────────────────────────────────┤
│ 关键指标卡片:                                           │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐         │
│ │ 总能力数 │ │ 总价值 │ │ 平均贡献 │ │ 专家级 │         │
│ │   50    │ │ 500万  │ │  25%   │ │  15个  │         │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘         │
├─────────────────────────────────────────────────────────┤
│ 图表区域:                                               │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 能力价值趋势图 (折线图)                              │ │
│ └─────────────────────────────────────────────────────┘ │
│ ┌─────────────────┐ ┌─────────────────────────────────┐ │
│ │ 能力类型分布     │ │ 贡献度vs价值热力图              │ │
│ │ (饼图)          │ │                                 │ │
│ └─────────────────┘ └─────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 关键功能
- **价值趋势**: 能力价值时间趋势
- **贡献分析**: 能力贡献度分析
- **类型分布**: 能力类型分布统计
- **热力图**: 贡献度与价值关系

### 6. 产品价值雷达图

#### 页面路径
`/dashboards/product-value`

#### 页面布局
```
┌─────────────────────────────────────────────────────────┐
│ Header: BMOS Insight - 产品价值雷达图                  │
├─────────────────────────────────────────────────────────┤
│ 面包屑: 首页 > 仪表盘 > 产品价值                        │
├─────────────────────────────────────────────────────────┤
│ 筛选器: [产品选择] [时间范围] [评估标准] [应用]         │
├─────────────────────────────────────────────────────────┤
│ 雷达图区域:                                             │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 产品价值雷达图 (多产品对比)                          │
│ │ 当前产品: 产品A (8.15分)                            │ │
│ │ 对比产品: 产品B (7.8分)                             │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ 详细分析:                                               │
│ ┌─────────────────┐ ┌─────────────────────────────────┐ │
│ │ 三类价值得分     │ │ 评估项详情                     │ │
│ │ 内在: 8.2       │ │ 产品质量: 8.5 (权重30%)        │ │
│ │ 认知: 7.8       │ │ 品牌认知: 7.8 (权重25%)        │ │
│ │ 体验: 8.5       │ │ 用户体验: 8.5 (权重45%)        │ │
│ └─────────────────┘ └─────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 关键功能
- **雷达图**: 三类价值雷达图展示
- **多产品对比**: 支持多产品价值对比
- **详细分析**: 评估项详细得分
- **趋势分析**: 产品价值历史趋势

### 7. 边际影响分析仪表盘

#### 页面路径
`/dashboards/marginal-analysis`

#### 页面布局
```
┌─────────────────────────────────────────────────────────┐
│ Header: BMOS Insight - 边际影响分析仪表盘              │
├─────────────────────────────────────────────────────────┤
│ 面包屑: 首页 > 仪表盘 > 边际影响分析                    │
├─────────────────────────────────────────────────────────┤
│ 筛选器: [分析范围] [时间周期] [目标指标] [应用]          │
├─────────────────────────────────────────────────────────┤
│ 分析结果:                                               │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ Shapley边际贡献分析                                 │ │
│ │ 目标指标: 收入 (1000万)                             │ │
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ 生产设备A: 60% (600万) ████████████████████    │ │ │
│ │ │ 数据分析能力: 40% (400万) ████████████████      │ │ │
│ │ └─────────────────────────────────────────────────┘ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ 时间序列分析:                                           │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 收入趋势预测 (未来3个月)                            │ │
│ │ 当前: 1200万 → 预测: 1300万 (置信度85%)             │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 关键功能
- **Shapley分析**: 边际贡献分析结果
- **时间序列**: 趋势预测和置信区间
- **交互式图表**: 支持钻取和筛选
- **导出功能**: 分析结果导出

### 8. 动态反馈监控页面

#### 页面路径
`/monitoring/dynamic-feedback`

#### 页面布局
```
┌─────────────────────────────────────────────────────────┐
│ Header: BMOS Insight - 动态反馈监控                    │
├─────────────────────────────────────────────────────────┤
│ 面包屑: 首页 > 监控 > 动态反馈                          │
├─────────────────────────────────────────────────────────┤
│ 筛选器: [反馈类型] [状态] [时间范围] [应用]              │
├─────────────────────────────────────────────────────────┤
│ 反馈配置列表:                                           │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 配置名称 │ 类型 │ 状态 │ 触发次数 │ 最后触发 │ 操作 │ │
│ ├─────────────────────────────────────────────────────┤ │
│ │ 利润再投资 │ 利润 │ 活跃 │ 5次 │ 2024-01-20 │ 编辑 │ │
│ │ 资源分配 │ 资源 │ 活跃 │ 3次 │ 2024-01-18 │ 编辑 │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ 执行历史:                                               │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 时间轴显示反馈执行历史                              │ │
│ │ 2024-01-20: 利润再投资触发 → 资源分配执行           │ │
│ │ 2024-01-18: 资源分配触发 → 能力提升执行             │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 关键功能
- **配置管理**: 动态反馈配置管理
- **执行监控**: 反馈执行状态监控
- **历史记录**: 反馈执行历史记录
- **实时通知**: 反馈触发实时通知

### 9. 模型诊断页面

#### 页面路径
`/monitoring/model-diagnostics`

#### 页面布局
```
┌─────────────────────────────────────────────────────────┐
│ Header: BMOS Insight - 模型诊断                        │
├─────────────────────────────────────────────────────────┤
│ 面包屑: 首页 > 监控 > 模型诊断                          │
├─────────────────────────────────────────────────────────┤
│ 模型状态概览:                                           │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐         │
│ │ Shapley │ │ 时间序列│ │ NPV模型 │ │ 能力价值│         │
│ │ 正常    │ │ 正常    │ │ 正常    │ │ 正常    │         │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘         │
├─────────────────────────────────────────────────────────┤
│ 模型性能指标:                                           │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 模型类型 │ 准确率 │ R² │ MAE │ RMSE │ 最后训练 │ 状态 │ │
│ ├─────────────────────────────────────────────────────┤ │
│ │ Shapley │ 85% │ 0.82 │ 5万 │ 7.5万 │ 2024-01-20 │ 正常 │ │
│ │ 时间序列│ 82% │ 0.78 │ 7.5万 │ 10万 │ 2024-01-20 │ 正常 │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ 模型诊断详情:                                           │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 数据质量检查: ✅ 通过                               │ │
│ │ 特征重要性: 生产设备(60%) > 数据分析(40%)           │ │
│ │ 预测置信度: 85% (良好)                              │ │
│ │ 建议: 模型性能良好，无需重训练                      │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 关键功能
- **模型状态**: 各模型运行状态监控
- **性能指标**: 模型准确率、误差指标
- **诊断报告**: 模型诊断和优化建议
- **重训练**: 模型重训练触发

## 通用组件设计

### 1. 页面头部组件
```typescript
interface PageHeaderProps {
  title: string;
  breadcrumb: string[];
  actions?: React.ReactNode;
}

const PageHeader: React.FC<PageHeaderProps> = ({ title, breadcrumb, actions }) => {
  return (
    <div className="flex items-center justify-between mb-6">
      <div>
        <Breadcrumb items={breadcrumb} />
        <h1 className="text-2xl font-bold">{title}</h1>
      </div>
      {actions && <div className="flex gap-2">{actions}</div>}
    </div>
  );
};
```

### 2. 数据表格组件
```typescript
interface DataTableProps<T> {
  data: T[];
  columns: ColumnDef<T>[];
  onEdit?: (item: T) => void;
  onDelete?: (item: T) => void;
  onView?: (item: T) => void;
  loading?: boolean;
}

const DataTable = <T,>({ data, columns, onEdit, onDelete, onView, loading }: DataTableProps<T>) => {
  return (
    <div className="rounded-md border">
      <Table>
        <TableHeader>
          {columns.map((column) => (
            <TableHead key={column.id}>{column.header}</TableHead>
          ))}
        </TableHeader>
        <TableBody>
          {data.map((row, index) => (
            <TableRow key={index}>
              {columns.map((column) => (
                <TableCell key={column.id}>
                  {column.cell ? column.cell(row) : row[column.accessorKey]}
                </TableCell>
              ))}
            </TableRow>
          ))}
        </TableBody>
      </Table>
    </div>
  );
};
```

### 3. 图表组件
```typescript
interface ChartProps {
  data: any[];
  type: 'line' | 'bar' | 'pie' | 'radar' | 'scatter';
  title?: string;
  height?: number;
  width?: number;
}

const Chart: React.FC<ChartProps> = ({ data, type, title, height = 400, width = 800 }) => {
  return (
    <div className="w-full">
      {title && <h3 className="text-lg font-semibold mb-4">{title}</h3>}
      <ResponsiveContainer width="100%" height={height}>
        {/* 根据type渲染不同图表 */}
      </ResponsiveContainer>
    </div>
  );
};
```

## 响应式设计

### 断点设置
```css
/* Tailwind CSS 断点 */
sm: '640px'   /* 手机 */
md: '768px'   /* 平板 */
lg: '1024px'  /* 桌面 */
xl: '1280px'  /* 大桌面 */
2xl: '1536px' /* 超大桌面 */
```

### 移动端适配
- **导航**: 折叠式侧边栏
- **表格**: 横向滚动
- **图表**: 自适应尺寸
- **操作**: 触摸友好的按钮尺寸

## 无障碍设计

### WCAG 2.1 AA 合规
- **颜色对比度**: 至少4.5:1
- **键盘导航**: 支持Tab键导航
- **屏幕阅读器**: 语义化HTML标签
- **焦点指示**: 清晰的焦点状态

### 国际化支持
- **多语言**: 支持中英文切换
- **日期格式**: 本地化日期显示
- **数字格式**: 本地化数字格式
- **货币**: 本地化货币显示

## 性能优化

### 加载优化
- **代码分割**: 按页面分割代码
- **懒加载**: 图表组件懒加载
- **缓存**: API响应缓存
- **预加载**: 关键资源预加载

### 渲染优化
- **虚拟滚动**: 大数据表格虚拟滚动
- **防抖**: 搜索输入防抖
- **节流**: 滚动事件节流
- **Memo**: React.memo优化

## 测试策略

### 单元测试
- **组件测试**: Jest + React Testing Library
- **工具函数测试**: Jest
- **API测试**: MSW模拟

### 集成测试
- **页面测试**: Cypress
- **用户流程测试**: Playwright
- **性能测试**: Lighthouse

### 可访问性测试
- **自动化测试**: axe-core
- **手动测试**: 键盘导航测试
- **屏幕阅读器**: NVDA/JAWS测试


