# 复杂单据导入 UI/UX 设计文档

**创建时间**: 2025-01-23  
**版本**: 1.0  
**状态**: ✅ **设计完成，待Lovable实施**

---

## 📋 设计概述

### 设计目标

创建一个直观、高效的导入界面，支持：
1. ✅ 清晰的数据展示和操作
2. ✅ 智能的引导和反馈机制
3. ✅ 流畅的人机交互流程

### 整体布局

**双栏布局**：
- **左侧**：数据记录表格（核心区域）
- **右侧**：人机对话面板（引导和反馈区域）

---

## 🎨 界面布局设计

### 整体结构

```
┌─────────────────────────────────────────────────────────────────┐
│  导入页面标题                                            [关闭]  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────────────────────────────┐  ┌───────────────────┐ │
│  │  左侧：数据记录表格                │  │  右侧：人机对话面板 │ │
│  │                                  │  │                    │ │
│  │  ┌────────────────────────────┐ │  │  ┌───────────────┐ │ │
│  │  │  操作功能栏                 │ │  │  │  系统消息区   │ │ │
│  │  │  [上传文件] [字段映射] ...  │ │  │  │               │ │ │
│  │  └────────────────────────────┘ │  │  │  信息反馈      │ │ │
│  │                                  │  │  │  操作引导      │ │ │
│  │  ┌────────────────────────────┐ │  │  └───────────────┘ │ │
│  │  │  表格概要信息              │ │  │                    │ │
│  │  │  总计: 100 | 成功: 85 | ...│ │  │  ┌───────────────┐ │ │
│  │  └────────────────────────────┘ │  │  │  操作按钮区   │ │ │
│  │                                  │  │  │               │ │ │
│  │  ┌────────────────────────────┐ │  │  │  [确认导入]   │ │ │
│  │  │                            │ │  │  │  [批量修正]   │ │ │
│  │  │    数据记录表格             │ │  │  │  [跳过]      │ │ │
│  │  │                            │ │  │  │               │ │ │
│  │  │  单据号 | 客户 | 产品 | ... │ │  │  └───────────────┘ │ │
│  │  │  DOC001| 客户A| 产品1| ... │ │  │                    │ │
│  │  │  DOC002| 客户B| 产品2| ... │ │  │  ┌───────────────┐ │ │
│  │  │  ...  | ... | ... | ... │ │  │  │  操作反馈区   │ │ │
│  │  │                            │ │  │  │               │ │ │
│  │  │                            │ │  │  │  操作结果      │ │ │
│  │  │                            │ │  │  │  进度提示      │ │ │
│  │  └────────────────────────────┘ │  │  └───────────────┘ │ │
│  │                                  │  │                    │ │
│  │  ┌────────────────────────────┐ │  │                    │ │
│  │  │  分页/滚动                  │ │  │                    │ │
│  │  └────────────────────────────┘ │  │                    │ │
│  └──────────────────────────────────┘  └───────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📊 左侧：数据记录表格

### 1. 操作功能栏（表格上方）

**位置**：表格顶部，固定栏

**功能按钮**：

| 按钮 | 功能 | 状态 | 说明 |
|------|------|------|------|
| `[上传文件]` | 上传Excel/CSV文件 | 初始状态显示 | 文件选择对话框 |
| `[字段映射]` | 进入字段映射界面 | 上传后显示 | 显示映射配置对话框 |
| `[格式检测]` | 自动检测单据格式 | 映射后显示 | 显示格式检测结果 |
| `[批量匹配]` | 批量匹配主数据 | 检测后显示 | 执行主数据匹配 |
| `[批量修正]` | 批量修正问题数据 | 有问题时显示 | 批量处理问题记录 |
| `[导入临时表]` | 导入到临时表 | 处理完成后显示 | 执行阶段1导入 |
| `[确认导入]` | 确认导入正式表 | 临时表修正后显示 | 执行阶段3导入 |
| `[导出报告]` | 导出导入报告 | 完成后显示 | 导出Excel报告 |
| `[刷新]` | 刷新表格数据 | 始终显示 | 刷新表格内容 |

**布局**：
```
┌────────────────────────────────────────────────────────┐
│  [上传文件] [字段映射] [格式检测] [批量匹配] [批量修正] │
│  [导入临时表] [确认导入] [导出报告] [刷新]            │
└────────────────────────────────────────────────────────┘
```

### 2. 表格概要信息（表格上方，操作栏下方）

**显示内容**：

```
┌────────────────────────────────────────────────────────┐
│  数据概览：                                             │
│  总计: 100 条 | 成功: 85 条 | 待处理: 15 条 | 已废弃: 0 条 │
│  质量评分: 85% | 匹配成功率: 90%                          │
│  批次ID: batch-2025-01-23-001                            │
└────────────────────────────────────────────────────────┘
```

**信息项**：
- **总计**：导入的总记录数
- **成功**：已成功处理（高置信度自动匹配）的记录数
- **待处理**：需要用户决策的记录数（低置信度、匹配失败、计算冲突等）
- **已废弃**：用户选择废弃的记录数
- **质量评分**：整体数据质量评分（0-100%）
- **匹配成功率**：主数据匹配成功率（0-100%）
- **批次ID**：当前导入批次ID

**状态颜色**：
- 总计：`默认色`
- 成功：`绿色`
- 待处理：`橙色`
- 已废弃：`灰色`
- 质量评分：`根据分数显示颜色`（>=90%绿色，70-90%橙色，<70%红色）

### 3. 数据记录表格（核心区域）

**表格列结构**：

**基础列**（始终显示）：
- `行号`：源文件行号
- `状态`：记录状态（成功、待处理、已废弃等）
- `单据号`：单据号
- `单据日期`：单据日期

**单据头列**（根据格式显示）：
- `客户名称`：客户/供应商名称
- `经营主体`：经营主体名称
- `不含税金额`：不含税金额
- `税额`：税额
- `价税合计`：价税合计

**明细列**（根据格式显示）：
- `产品名称`：产品/物料名称
- `数量`：数量
- `单价`：单价
- `计量单位`：计量单位

**匹配列**（匹配后显示）：
- `经营主体ID`：匹配后的经营主体ID（带匹配状态图标）
- `往来单位ID`：匹配后的往来单位ID（带匹配状态图标）
- `产品ID`：匹配后的产品ID（带匹配状态图标）
- `计量单位ID`：匹配后的计量单位ID（带匹配状态图标）

**问题列**（有问题时显示）：
- `问题类型`：问题类型（主数据匹配、计算冲突等）
- `问题描述`：问题描述
- `操作`：操作按钮（选择匹配、创建新、废弃等）

**表格特性**：

1. **行状态标识**：
   - `✅ 绿色行`：成功匹配，无需处理
   - `⚠️ 橙色行`：待处理，需要用户决策
   - `❌ 红色行`：严重问题，必须处理
   - `🚫 灰色行`：已废弃，不导入

2. **可排序**：所有列支持排序

3. **可筛选**：
   - 按状态筛选（成功、待处理、已废弃）
   - 按问题类型筛选
   - 按匹配状态筛选

4. **可搜索**：支持单据号、客户名称等字段搜索

5. **行选择**：支持单选和多选（用于批量操作）

6. **行操作菜单**：
   - 右键菜单：查看详情、编辑、选择匹配、创建新、废弃等

7. **分页/虚拟滚动**：
   - 小数据量（<1000行）：分页显示
   - 大数据量（>=1000行）：虚拟滚动

**表格示例**：

```
┌────┬────┬────────┬────────────┬────────┬────────┬────────┬────────┬──────┐
│行号│状态│单据号  │客户名称    │产品名称│数量   │不含税金额│税额    │操作  │
├────┼────┼────────┼────────────┼────────┼────────┼────────┼────────┼──────┤
│ 1  │✅  │DOC001  │客户A       │产品1   │10     │1000.00 │130.00 │      │
│ 2  │✅  │DOC001  │客户A       │产品2   │5      │500.00  │65.00  │      │
│ 3  │⚠️  │DOC002  │客户B       │产品3   │8      │800.00  │104.00 │[选择]│
│ 4  │⚠️  │DOC003  │客户C       │产品4   │?      │???     │???    │[修正]│
│ 5  │❌  │DOC004  │客户D       │产品5   │10     │1000.00 │150.00 │[修正]│
└────┴────┴────────┴────────────┴────────┴────────┴────────┴────────┴──────┘
```

**状态图标说明**：
- `✅`：成功匹配，自动应用
- `⚠️`：待处理，需要用户决策
- `❌`：严重问题，必须处理
- `🚫`：已废弃，不导入
- `❓`：匹配中，等待结果

---

## 💬 右侧：人机对话面板（仿Cursor风格）

### 设计理念

右侧对话面板采用**聊天式交互设计**，仿照Cursor的人机对话界面：
- ✅ 消息流式布局，按时间顺序显示
- ✅ 用户消息和系统消息分别显示（用户在右侧，系统在左侧）
- ✅ 消息卡片式设计，清晰易读
- ✅ 可展开/折叠的详细信息
- ✅ 交互式操作按钮嵌入消息中
- ✅ 实时状态显示（执行中、成功、失败）
- ✅ 工具调用和执行结果展示

### 面板结构

**单区域流式布局**：
- 所有消息（系统反馈、操作引导、用户操作、执行结果）都在同一个消息流中按时间顺序显示
- 消息自动滚动到最新
- 支持搜索历史消息

### 1. 系统消息区（上部）

**功能**：显示导入过程中的自动执行信息和系统反馈

**消息类型**：

1. **进度消息**：
   ```
   📊 正在分析文件结构...
   🔍 正在检测单据格式...
   🎯 正在匹配主数据...
   ✅ 已完成 85/100 条记录的匹配
   ```

2. **成功消息**：
   ```
   ✅ 文件解析成功，发现 100 条记录
   ✅ 格式检测成功：检测到格式1（多行明细对应重复单据头）
   ✅ 字段映射成功：10/10 个字段已映射
   ✅ 主数据匹配成功：85/100 条记录自动匹配
   ```

3. **警告消息**：
   ```
   ⚠️ 检测到 15 条记录需要用户处理：
      - 10 条记录的主数据匹配不唯一
      - 3 条记录的计算字段冲突
      - 2 条记录的单据头匹配失败
   ```

4. **错误消息**：
   ```
   ❌ 文件格式错误，无法解析
   ❌ 必填字段缺失，无法继续
   ```

5. **提示消息**：
   ```
   💡 建议：批量处理相似的问题记录
   💡 提示：可以选择"创建新记录"来添加新的主数据
   ```

**消息样式**：

```
┌─────────────────────────────────────┐
│  📊 系统消息                         │
├─────────────────────────────────────┤
│                                      │
│  [时间] ✅ 文件解析成功，发现 100 条记录│
│  [时间] ✅ 格式检测：格式1（置信度95%） │
│  [时间] ✅ 字段映射完成：10/10 个字段  │
│  [时间] 🎯 主数据匹配进行中...        │
│  [时间] ✅ 匹配完成：85/100 自动匹配  │
│  [时间] ⚠️ 15 条记录需要用户处理      │
│                                      │
│  [滚动区域]                          │
│                                      │
└─────────────────────────────────────┘
```

**消息特性**：
- 按时间倒序显示（最新在上）
- 支持滚动查看历史消息
- 消息分类（成功、警告、错误、提示）
- 可点击消息查看详情
- 自动滚动到最新消息

### 对话流布局

**整体布局**：
```
┌─────────────────────────────────────────────┐
│  💬 导入助手                      [搜索] [设置]│
├─────────────────────────────────────────────┤
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:30:10]     │     │
│  │ ✅ 欢迎使用数据导入功能              │     │
│  │ 请上传Excel或CSV文件开始导入          │     │
│  │                                       │     │
│  │ [上传文件]                           │     │
│  └─────────────────────────────────────┘     │
│                                               │
│              ┌─────────────────────────────────┐
│              │ [10:30:15] 👤 您                 │
│              │ 已上传文件：purchase_order.xlsx  │
│              └─────────────────────────────────┘
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:30:16]     │     │
│  │ 📊 正在分析文件结构...               │     │
│  │    ▓▓▓▓▓▓▓▓░░░░░░░░ 50%            │     │
│  └─────────────────────────────────────┘     │
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:30:20]     │     │
│  │ ✅ 文件解析成功                      │     │
│  │                                       │     │
│  │ 发现 100 条记录                       │     │
│  │ • 单据头字段：10 个                   │     │
│  │ • 明细字段：8 个                     │     │
│  │                                       │     │
│  │ [查看详情 ▼]                         │     │
│  └─────────────────────────────────────┘     │
│                                               │
│              ┌─────────────────────────────────┐
│              │ [10:30:25] 👤 您                 │
│              │ ✅ 已确认文件解析结果             │
│              └─────────────────────────────────┘
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:30:26]     │     │
│  │ 🔧 执行：智能字段映射                │     │
│  │                                       │     │
│  │ 正在分析字段相似度...                 │     │
│  │ ▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░ 75%             │     │
│  └─────────────────────────────────────┘     │
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:30:30]     │     │
│  │ ✅ 字段映射完成                      │     │
│  │                                       │     │
│  │ **推荐映射结果：**                    │     │
│  │ 1. 采购订单号 → 单据号（置信度98%）    │     │
│  │ 2. 订单日期 → 单据日期（置信度95%）    │     │
│  │ 3. 物料名称 → 产品名称（置信度82%）    │     │
│  │                                       │     │
│  │ [确认映射] [手动调整] [查看全部 ▼]     │     │
│  └─────────────────────────────────────┘     │
│                                               │
│              ┌─────────────────────────────────┐
│              │ [10:30:35] 👤 您                 │
│              │ ✅ 已确认所有推荐的字段映射       │
│              └─────────────────────────────────┘
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:30:36]     │     │
│  │ 🔍 正在检测单据格式...               │     │
│  └─────────────────────────────────────┘     │
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:30:40]     │     │
│  │ ✅ 格式检测完成                      │     │
│  │                                       │     │
│  │ **检测结果：**                        │     │
│  │ 格式：格式1（多行明细对应重复单据头）   │     │
│  │ 置信度：95%                           │     │
│  │                                       │     │
│  │ [确认格式] [手动选择格式]             │     │
│  └─────────────────────────────────────┘     │
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:30:45]     │     │
│  │ 🎯 正在匹配主数据...                 │     │
│  │                                       │     │
│  │ 进度：85/100 条记录                   │     │
│  │ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░ 85%             │     │
│  └─────────────────────────────────────┘     │
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:30:50]     │     │
│  │ ✅ 主数据匹配完成                    │     │
│  │                                       │     │
│  │ **匹配结果：**                        │     │
│  │ • 自动匹配成功：85 条                 │     │
│  │ • 需要用户处理：15 条                 │     │
│  │                                       │     │
│  │ ⚠️ **需要处理的问题：**                │     │
│  │ • 主数据匹配不唯一：10 条             │     │
│  │ • 计算字段冲突：3 条                  │     │
│  │ • 单据头匹配失败：2 条                │     │
│  │                                       │     │
│  │ [批量处理匹配问题] [批量修正计算冲突]   │     │
│  │ [处理单据头匹配] [查看问题详情 ▼]      │     │
│  └─────────────────────────────────────┘     │
│                                               │
│              ┌─────────────────────────────────┐
│              │ [10:31:00] 👤 您                 │
│              │ 📦 批量处理：主数据匹配           │
│              │                                   │
│              │ 已选择 10 条记录进行批量处理      │
│              │ • 选择匹配项：8 条               │
│              │ • 创建新记录：2 条               │
│              │                                   │
│              │ [执行]                          │
│              └─────────────────────────────────┘
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:31:05]     │     │
│  │ 🔄 正在执行批量处理...               │     │
│  │                                       │     │
│  │ 进度：8/10 条记录                     │     │
│  │ ▓▓▓▓▓▓▓▓▓▓░░ 80%                    │     │
│  └─────────────────────────────────────┘     │
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:31:10]     │     │
│  │ ✅ 批量处理完成                      │     │
│  │                                       │     │
│  │ **执行结果：**                        │     │
│  │ • 成功处理：8 条                      │     │
│  │ • 创建新记录：2 条                    │     │
│  │ • 失败：0 条                          │     │
│  │                                       │     │
│  │ [导入到临时表] [继续处理其他问题]      │     │
│  └─────────────────────────────────────┘     │
│                                               │
│              ┌─────────────────────────────────┐
│              │ [10:31:15] 👤 您                 │
│              │ ✅ 已确认导入到临时表             │
│              └─────────────────────────────────┘
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:31:16]     │     │
│  │ 🔄 正在导入到临时表...               │     │
│  │                                       │     │
│  │ 进度：50/100 条记录                   │     │
│  │ ▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░ 50%              │     │
│  │                                       │     │
│  │ 预计剩余时间：30秒                     │     │
│  │                                       │     │
│  │ [取消]                                │     │
│  └─────────────────────────────────────┘     │
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:31:45]     │     │
│  │ ✅ 导入临时表成功                     │     │
│  │                                       │     │
│  │ **导入结果：**                        │     │
│  │ • 成功导入：100 条记录                 │     │
│  │ • 执行时间：30秒                       │     │
│  │ • 批次ID：batch-2025-01-23-001        │     │
│  │                                       │     │
│  │ [确认导入到正式表] [继续修正]          │     │
│  └─────────────────────────────────────┘     │
│                                               │
│  ┌─────────────────────────────────────┐     │
│  │ 🤖 系统助手          [10:32:00]     │     │
│  │ ✅ 导入正式表完成                     │     │
│  │                                       │     │
│  │ **最终结果：**                        │     │
│  │ • 成功导入：100 条记录                 │     │
│  │ • 数据质量评分：85%                    │     │
│  │ • 匹配成功率：90%                      │     │
│  │                                       │     │
│  │ [查看导入报告] [导出报告] [继续导入]   │     │
│  └─────────────────────────────────────┘     │
│                                               │
│  [滚动到底部]                                 │
│                                               │
└─────────────────────────────────────────────┘
```

### 对话面板功能特性

1. **消息流式布局**
   - 所有消息按时间顺序从上到下排列
   - 系统消息在左侧，用户消息在右侧
   - 自动滚动到最新消息
   - 支持手动滚动查看历史

2. **消息交互**
   - 可展开/折叠详细信息
   - 可复制消息内容
   - 可查看消息详情
   - 可取消正在执行的操作

3. **实时状态更新**
   - 执行中的操作显示进度条
   - 操作完成立即更新状态
   - 失败操作显示错误详情和重试按钮

4. **操作按钮嵌入消息**
   - 操作按钮直接嵌入在相关消息中
   - 点击按钮后，系统自动执行并在下方添加新的消息
   - 支持多选操作（批量处理）

5. **搜索和筛选**
   - 顶部搜索框：搜索历史消息
   - 按消息类型筛选（成功、警告、错误、操作等）
   - 按时间范围筛选

6. **设置选项**
   - 自动滚动开关
   - 消息提示音开关
   - 消息保留时间设置

---

## 🔄 完整交互流程

### 流程1：文件上传 → 字段映射

1. **用户操作**：点击左侧"上传文件"按钮
2. **系统反馈**：右侧显示"📊 正在分析文件结构..."
3. **系统反馈**：右侧显示"✅ 文件解析成功，发现 100 条记录"
4. **系统反馈**：右侧显示"🔍 正在智能映射字段..."
5. **系统反馈**：右侧显示"✅ 字段映射推荐完成：10/10 个字段已推荐"
6. **操作引导**：右侧显示"📝 下一步操作：[确认字段映射] [手动调整映射]"
7. **表格更新**：左侧表格显示解析后的数据
8. **用户操作**：在右侧点击"确认字段映射"或"手动调整映射"

### 流程2：格式检测 → 主数据匹配

1. **系统反馈**：右侧显示"🔍 正在检测单据格式..."
2. **系统反馈**：右侧显示"✅ 格式检测：格式1（置信度95%）"
3. **操作引导**：右侧显示"📝 下一步操作：[确认格式] [继续处理]"
4. **用户操作**：点击"继续处理"
5. **系统反馈**：右侧显示"🎯 正在匹配主数据..."
6. **系统反馈**：右侧显示"✅ 匹配完成：85/100 自动匹配"
7. **系统反馈**：右侧显示"⚠️ 15 条记录需要用户处理"
8. **操作引导**：右侧显示问题列表和处理按钮
9. **表格更新**：左侧表格高亮显示待处理的行（橙色/红色）

### 流程3：问题处理 → 导入临时表

1. **用户操作**：在左侧表格中选择待处理的行（或点击右侧批量处理按钮）
2. **系统反馈**：右侧显示选中的记录详情
3. **操作引导**：右侧显示处理选项（选择匹配、创建新、废弃）
4. **用户操作**：点击"选择匹配项"或"创建新记录"
5. **系统反馈**：右侧显示"✅ 操作成功：已处理 3 条记录"
6. **表格更新**：左侧表格更新选中行的状态（橙色→绿色）
7. **概要更新**：左侧表格上方概要信息更新（待处理：15→12）
8. **操作引导**：所有问题处理完成后，右侧显示"📝 [导入到临时表]"

### 流程4：导入临时表 → 确认导入

1. **用户操作**：点击右侧"导入到临时表"按钮
2. **系统反馈**：右侧显示"🔄 正在导入到临时表..."
3. **系统反馈**：右侧显示进度条："进度：50/100 条记录 ▓▓▓▓▓▓░░░░░░ 50%"
4. **系统反馈**：右侧显示"✅ 导入成功：100 条记录已导入临时表"
5. **操作引导**：右侧显示"📝 [确认导入到正式表]"
6. **用户操作**：点击"确认导入到正式表"
7. **系统反馈**：右侧显示"🔄 正在导入到正式表..."
8. **系统反馈**：右侧显示"✅ 导入完成：100 条记录已成功导入正式表"
9. **操作引导**：右侧显示"📝 [查看导入报告] [导出报告] [继续导入]"

---

## 🎯 关键交互细节

### 1. 实时更新机制

- **表格自动刷新**：操作后自动刷新表格内容
- **概要信息实时更新**：操作后立即更新统计数据
- **消息实时推送**：操作后立即显示反馈消息
- **按钮状态动态更新**：根据当前状态动态显示/隐藏按钮

### 2. 响应式设计

- **小屏幕**：右侧面板可折叠为侧边栏
- **大屏幕**：保持双栏布局
- **表格自适应**：根据屏幕大小调整列显示

### 3. 错误处理

- **网络错误**：显示重试按钮
- **操作失败**：显示错误详情和建议
- **数据异常**：高亮显示异常行，提供修正建议

### 4. 性能优化

- **虚拟滚动**：大数据量表格使用虚拟滚动
- **懒加载**：分页加载表格数据
- **防抖处理**：搜索和筛选操作防抖
- **批量操作**：批量处理时显示进度条

---

## 📱 响应式布局

### 桌面端（≥1024px）

```
┌─────────────────────────────────────────────────────────────┐
│  左侧：60% 宽度                       右侧：40% 宽度         │
│  ┌──────────────────────┐            ┌──────────────────┐  │
│  │  操作功能栏           │            │  系统消息区       │  │
│  ├──────────────────────┤            ├──────────────────┤  │
│  │  表格概要信息         │            │  操作按钮区       │  │
│  ├──────────────────────┤            ├──────────────────┤  │
│  │                      │            │  操作反馈区       │  │
│  │    数据记录表格        │            │                  │  │
│  │                      │            │                  │  │
│  │                      │            │                  │  │
│  └──────────────────────┘            └──────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

### 平板端（768px - 1023px）

```
┌─────────────────────────────────────────────────────────────┐
│  左侧：100% 宽度                                            │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  操作功能栏                                           │  │
│  ├──────────────────────────────────────────────────────┤  │
│  │  表格概要信息                                         │  │
│  ├──────────────────────────────────────────────────────┤  │
│  │    数据记录表格                                       │  │
│  │                                                      │  │
│  └──────────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  右侧：100% 宽度                                      │  │
│  │  [折叠/展开] 人机对话面板                             │  │
│  └──────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

### 移动端（<768px）

```
┌─────────────────────────────────────────────────────────────┐
│  左侧：100% 宽度                                            │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  操作功能栏（图标化）                                  │  │
│  ├──────────────────────────────────────────────────────┤  │
│  │  表格概要信息                                         │  │
│  ├──────────────────────────────────────────────────────┤  │
│  │    数据记录表格                                       │  │
│  │                                                      │  │
│  └──────────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  [展开] 人机对话面板                                  │  │
│  └──────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

---

## 🎨 视觉设计规范（Cursor风格）

### 颜色方案

**对话面板颜色**：
- **系统消息背景**：`#f7f7f8`（浅灰色，左侧消息）
- **用户消息背景**：`#007AFF`（蓝色，右侧消息）
- **系统消息文字**：`#1f1f23`（深灰色）
- **用户消息文字**：`#ffffff`（白色）
- **消息边框**：`#e4e4e7`（浅灰色边框）

**状态颜色**：
- **成功**：`#10b981`（绿色）
- **警告**：`#f59e0b`（橙色）
- **错误**：`#ef4444`（红色）
- **信息**：`#3b82f6`（蓝色）
- **执行中**：`#8b5cf6`（紫色）

**按钮颜色**：
- **主操作按钮**：`#007AFF`（蓝色背景，白色文字）
- **辅助按钮**：`#f3f4f6`（灰色背景，深色文字）
- **危险按钮**：`#ef4444`（红色背景，白色文字）
- **链接按钮**：`#007AFF`（蓝色文字，无背景）

**表格行颜色**：
- **成功行**：`#f0fdf4`（浅绿色背景）
- **待处理行**：`#fffbeb`（浅橙色背景）
- **错误行**：`#fef2f2`（浅红色背景）
- **已废弃行**：`#f9fafb`（灰色背景）

### 消息卡片样式

**系统消息卡片**（左侧）：
```css
background: #f7f7f8;
border: 1px solid #e4e4e7;
border-radius: 12px;
padding: 12px 16px;
margin: 8px 60px 8px 8px;  /* 左侧对齐 */
max-width: 70%;
```

**用户消息卡片**（右侧）：
```css
background: #007AFF;
color: #ffffff;
border-radius: 12px;
padding: 12px 16px;
margin: 8px 8px 8px 60px;  /* 右侧对齐 */
max-width: 70%;
```

**代码块样式**：
```css
background: #1e1e1e;
color: #d4d4d4;
border-radius: 6px;
padding: 12px;
font-family: 'Consolas', 'Monaco', monospace;
font-size: 13px;
```

### 字体规范

- **消息标题**：14px，粗体
- **消息正文**：14px，常规
- **消息时间**：12px，浅灰色
- **代码块文字**：13px，等宽字体
- **按钮文字**：14px，中粗

### 间距规范

- **消息间距**：8px
- **消息内边距**：12px 16px
- **按钮间距**：8px
- **代码块内边距**：12px
- **面板内边距**：16px

### 动画效果

1. **消息出现动画**：
   - 淡入效果：`opacity: 0 → 1`，持续时间 0.3s
   - 滑动效果：从下方滑入，持续时间 0.3s

2. **进度条动画**：
   - 平滑填充动画，实时更新

3. **按钮悬停效果**：
   - 背景色加深：`hover: opacity: 0.9`
   - 过渡时间：0.2s

4. **展开/折叠动画**：
   - 高度过渡：`max-height` 动画，持续时间 0.3s

---

## 📝 实施建议

### 优先级

**优先级1：核心功能**
1. ✅ 左侧表格基础功能（展示、筛选、搜索）
2. ✅ 右侧消息区（显示系统反馈）
3. ✅ 右侧操作按钮区（引导操作）
4. ✅ 右侧反馈区（显示操作结果）

**优先级2：增强功能**
5. ⏳ 表格行选择（单选、多选）
6. ⏳ 批量操作功能
7. ⏳ 实时更新机制
8. ⏳ 响应式布局

**优先级3：优化功能**
9. ⏳ 虚拟滚动（大数据量）
10. ⏳ 操作历史记录
11. ⏳ 快捷键支持

### 技术栈建议

- **前端框架**：React / Vue
- **UI组件库**：Ant Design / Element UI
- **表格组件**：Ant Design Table / ag-Grid（大数据量）
- **消息组件**：自定义消息流组件
- **状态管理**：Redux / Vuex

---

## 📚 相关文档

- [复杂单据导入完整指南](./COMPLEX_DOCUMENT_IMPORT_COMPLETE_GUIDE.md)
- [分工策略文档](./COMPLEX_IMPORT_DIVISION_STRATEGY.md)

---

**文档版本**: 1.0  
**最后更新**: 2025-01-23  
**设计者**: Cursor (UI/UX设计)  
**实施方**: Lovable (前端开发)

