# å…¨é“¾è·¯å¢é‡å…¬å¼æ±‡æ€»è®¾è®¡

## ğŸ“‹ ç®—æ³•æ¦‚è¿°

åŸºäºç”¨æˆ·æ¾„æ¸…ï¼Œå…¨é“¾è·¯å¢é‡å…¬å¼å®ç°**22ä¸ªâ–³å‡½æ•°**çš„å®Œæ•´è®¡ç®—ï¼Œæ”¯æŒä»æ ¸å¿ƒèµ„äº§åˆ°åˆ©æ¶¦çš„å…¨é“¾è·¯è¾¹é™…å½±å“åˆ†æã€‚æ‰€æœ‰å˜é‡å‡ä¸ºæœˆåº¦å¢é‡ï¼ˆâ–³=æœ¬æœˆå€¼-ä¸Šæœˆå€¼ï¼‰ï¼Œç¡®ä¿æ•°æ®å¯è¿½æº¯ã€è®¡ç®—å¯è½åœ°ã€‚

## ğŸ”— åŸºæœ¬æ•°æ®é“¾å’Œæ•ˆèƒ½å½±å“å…³ç³»

### æ•°æ®é“¾æµç¨‹
```
å®é™…æˆæœ¬ â†’ ç›®æ ‡æˆæœ¬ï¼ˆç«å“æˆæœ¬åŠ æƒå¹³å‡ï¼‰ â†’ äº§å“ç‰¹æ€§ä»·å€¼ â†’ äº§å“å†…åœ¨ä»·å€¼ â†’ å®¢æˆ·è®¤çŸ¥ä»·å€¼ â†’ å®¢æˆ·ä½“éªŒä»·å€¼ â†’ é”€å”®æ”¶å…¥
```

### æ•ˆèƒ½å½±å“å…³ç³»
```
ç”Ÿäº§æ•ˆèƒ½ â†’ å½±å“å®é™…æˆæœ¬-ç«å“æˆæœ¬ï¼ˆæˆæœ¬ä¼˜åŠ¿ï¼‰
ç ”å‘æ•ˆèƒ½ â†’ å½±å“äº§å“ç‰¹æ€§ä»·å€¼
äº§å“æ•ˆèƒ½ â†’ å½±å“äº§å“å†…åœ¨ä»·å€¼-äº§å“ç‰¹æ€§ä»·å€¼
æ’­ä¼ æ•ˆèƒ½ â†’ å½±å“å®¢æˆ·è®¤çŸ¥ä»·å€¼
äº¤ä»˜æ•ˆèƒ½ â†’ å½±å“å®¢æˆ·ä½“éªŒä»·å€¼
æ¸ é“æ•ˆèƒ½ â†’ å½±å“é”€å”®æ”¶å…¥
```

### æ•°æ®é“¾è¯´æ˜
1. **æˆæœ¬å±‚**ï¼šå®é™…æˆæœ¬ä¸ç›®æ ‡æˆæœ¬ï¼ˆç«å“æˆæœ¬åŠ æƒå¹³å‡ï¼‰çš„å¯¹æ¯”
2. **ä»·å€¼å±‚**ï¼šäº§å“ç‰¹æ€§ä»·å€¼ â†’ äº§å“å†…åœ¨ä»·å€¼ â†’ å®¢æˆ·è®¤çŸ¥ä»·å€¼ â†’ å®¢æˆ·ä½“éªŒä»·å€¼
3. **æ”¶å…¥å±‚**ï¼šå®¢æˆ·ä»·å€¼è½¬åŒ–ä¸ºé”€å”®æ”¶å…¥
4. **æ•ˆèƒ½å±‚**ï¼šå„ç¯èŠ‚æ•ˆèƒ½å½±å“å¯¹åº”çš„ä»·å€¼åˆ›é€ ç¯èŠ‚

### æ•°æ®é“¾æµç¨‹å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®é™…æˆæœ¬   â”‚â”€â”€â”€â–¶â”‚ ç›®æ ‡æˆæœ¬    â”‚â”€â”€â”€â–¶â”‚äº§å“ç‰¹æ€§ä»·å€¼â”‚â”€â”€â”€â–¶â”‚äº§å“å†…åœ¨ä»·å€¼â”‚
â”‚             â”‚    â”‚(ç«å“æˆæœ¬åŠ æƒ)â”‚    â”‚             â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿäº§æ•ˆèƒ½   â”‚    â”‚  ç ”å‘æ•ˆèƒ½   â”‚    â”‚  äº§å“æ•ˆèƒ½   â”‚    â”‚  æ’­ä¼ æ•ˆèƒ½   â”‚
â”‚å½±å“æˆæœ¬ä¼˜åŠ¿ â”‚    â”‚å½±å“ç‰¹æ€§ä»·å€¼ â”‚    â”‚å½±å“å†…åœ¨ä»·å€¼â”‚    â”‚å½±å“è®¤çŸ¥ä»·å€¼â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                              â”‚
                                                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚å®¢æˆ·ä½“éªŒä»·å€¼ â”‚â”€â”€â”€â–¶â”‚  é”€å”®æ”¶å…¥   â”‚    â”‚  äº¤ä»˜æ•ˆèƒ½   â”‚    â”‚  æ¸ é“æ•ˆèƒ½   â”‚
â”‚             â”‚    â”‚             â”‚    â”‚å½±å“ä½“éªŒä»·å€¼ â”‚    â”‚å½±å“é”€å”®æ”¶å…¥ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ç”¨æˆ·è¯´æ˜æŒ‡å¼•

### ä»€ä¹ˆæ˜¯å…¨é“¾è·¯å¢é‡åˆ†æï¼Ÿ
å…¨é“¾è·¯å¢é‡åˆ†ææ˜¯åˆ†æä¼ä¸šä»·å€¼åˆ›é€ å…¨è¿‡ç¨‹çš„ç³»ç»Ÿæ–¹æ³•ã€‚å®ƒä»æ ¸å¿ƒèµ„äº§å¼€å§‹ï¼Œé€šè¿‡æ ¸å¿ƒèƒ½åŠ›ã€æ•ˆç‡ã€äº§å“ä»·å€¼ï¼Œæœ€ç»ˆåˆ°æ”¶å…¥å’Œåˆ©æ¶¦ï¼Œå½¢æˆå®Œæ•´çš„ä»·å€¼åˆ›é€ é“¾æ¡ã€‚

### ä¸ºä»€ä¹ˆéœ€è¦å…¨é“¾è·¯å¢é‡åˆ†æï¼Ÿ
- **ä»·å€¼åˆ›é€ ç†è§£**ï¼šç†è§£ä¼ä¸šä»·å€¼åˆ›é€ çš„å®Œæ•´è¿‡ç¨‹
- **è¾¹é™…å½±å“åˆ†æ**ï¼šåˆ†ææ¯ä¸ªè¦ç´ å˜åŒ–å¯¹åˆ©æ¶¦çš„è¾¹é™…å½±å“
- **å•†ä¸šæ¨¡å¼ä¼˜åŒ–**ï¼šè¯†åˆ«å•†ä¸šæ¨¡å¼ä¼˜åŒ–çš„å…³é”®ç‚¹

### åˆ†æé“¾æ¡è¯´æ˜
1. **æ ¸å¿ƒèµ„äº§**ï¼šç”Ÿäº§ã€ç ”å‘ã€æ’­ä¼ ã€äº¤ä»˜ã€æ¸ é“äº”å¤§èµ„äº§
2. **æ ¸å¿ƒèƒ½åŠ›**ï¼šä¸èµ„äº§å¯¹åº”çš„äº”å¤§æ ¸å¿ƒèƒ½åŠ›
3. **äº§å“ä»·å€¼**ï¼šå†…åœ¨ä»·å€¼ã€è®¤çŸ¥ä»·å€¼ã€ä½“éªŒä»·å€¼
4. **æ•ˆèƒ½æŒ‡æ ‡**ï¼šäº§å‡ºä¸æŠ•å…¥çš„æ¯”å€¼ï¼Œè¡¡é‡æ•ˆç‡
5. **æ”¶å…¥åˆ©æ¶¦**ï¼šé¦–å•ã€å¤è´­ã€è¿½é”€æ”¶å…¥ï¼Œæœ€ç»ˆåˆ©æ¶¦

### å¢é‡è®¡ç®—è¯´æ˜
- **æœˆåº¦å¢é‡**ï¼šæ‰€æœ‰å˜é‡éƒ½æ˜¯æœˆåº¦å¢é‡ï¼ˆæœ¬æœˆå€¼-ä¸Šæœˆå€¼ï¼‰
- **æ•ˆèƒ½è®¡ç®—**ï¼šæ•ˆèƒ½ = ç»“æœå˜é‡ Ã· (èƒ½åŠ›Ã—æƒé‡1 + èµ„äº§Ã—æƒé‡2)
- **è¾¹é™…å½±å“**ï¼šåˆ†ææ¯ä¸ªè¦ç´ å˜åŒ–å¯¹æœ€ç»ˆåˆ©æ¶¦çš„å½±å“
- **åŠ¨æ€åé¦ˆ**ï¼šåˆ©æ¶¦åå“ºèµ„äº§ï¼Œèƒ½åŠ›ä¼˜åŒ–ä»·å€¼

### æ•ˆèƒ½æŒ‡æ ‡è¯´æ˜
- **ç”Ÿäº§æ•ˆèƒ½**ï¼šäº§å“æˆæœ¬ä¼˜åŠ¿ Ã· (ç”Ÿäº§èƒ½åŠ›Ã—a2 + ç”Ÿäº§èµ„äº§Ã—b2) â†’ å½±å“å®é™…æˆæœ¬-ç«å“æˆæœ¬
- **ç ”å‘æ•ˆèƒ½**ï¼šäº§å“ç‰¹æ€§ä¼°å€¼ Ã· (ç ”å‘èƒ½åŠ›Ã—a3 + ç ”å‘èµ„äº§Ã—b3) â†’ å½±å“äº§å“ç‰¹æ€§ä»·å€¼
- **äº§å“æ•ˆèƒ½**ï¼š(äº§å“å†…åœ¨ä»·å€¼-äº§å“ç‰¹æ€§ä»·å€¼) Ã· (è®¾è®¡èƒ½åŠ›Ã—a1 + è®¾è®¡èµ„äº§Ã—b1) â†’ å½±å“äº§å“å†…åœ¨ä»·å€¼-äº§å“ç‰¹æ€§ä»·å€¼
- **æ’­ä¼ æ•ˆèƒ½**ï¼šï¼ˆå®¢æˆ·è®¤çŸ¥ä»·å€¼-äº§å“å†…åœ¨ä»·å€¼ï¼‰ Ã· (æ’­ä¼ èƒ½åŠ›Ã—a4 + æ’­ä¼ èµ„äº§Ã—b4) â†’ å½±å“å®¢æˆ·è®¤çŸ¥ä»·å€¼-äº§å“å†…åœ¨ä»·å€¼
- **äº¤ä»˜æ•ˆèƒ½**ï¼šï¼ˆå®¢æˆ·ä½“éªŒä»·å€¼-äº§å“å†…åœ¨ä»·å€¼ï¼‰ Ã· (äº¤ä»˜èƒ½åŠ›Ã—a5 + äº¤ä»˜èµ„äº§Ã—b5) â†’ å½±å“å®¢æˆ·ä½“éªŒä»·å€¼-äº§å“å†…åœ¨ä»·å€¼
- **æ¸ é“æ•ˆèƒ½**ï¼šäº§å“é”€å”®æ”¶å…¥ Ã· (æ¸ é“èƒ½åŠ›Ã—a6 + æ¸ é“èµ„äº§Ã—b6) â†’ å½±å“é”€å”®æ”¶å…¥

### ä½¿ç”¨åœºæ™¯
- **å•†ä¸šæ¨¡å¼åˆ†æ**ï¼šå…¨é¢åˆ†æå•†ä¸šæ¨¡å¼çš„ä»·å€¼åˆ›é€ è¿‡ç¨‹
- **æŠ•èµ„å†³ç­–æ”¯æŒ**ï¼šä¸ºèµ„äº§å’Œèƒ½åŠ›æŠ•èµ„æä¾›æ•°æ®æ”¯æŒ
- **ä¼˜åŒ–æŒ‡å¯¼**ï¼šè¯†åˆ«å•†ä¸šæ¨¡å¼ä¼˜åŒ–çš„å…³é”®ç‚¹

## ğŸ¯ æ ¸å¿ƒå…¬å¼ä½“ç³»

### 1. 6å¤§æ ¸å¿ƒèµ„äº§æ¨¡å—ï¼ˆéœ€æ±‚å¯¼å‘ç‰ˆï¼‰

#### 1.1 ç”Ÿäº§èµ„äº§
```
â–³ç”Ÿäº§èµ„äº§ = Î£ï¼ˆç¬¬nå¹´ç”Ÿäº§èµ„äº§ç°é‡‘æµå¢é‡ Ã— æŠ˜ç°ç³»æ•°ï¼‰Ã· 60
å…¶ä¸­ï¼šç¬¬nå¹´ç°é‡‘æµå¢é‡ = å½“å¹´æœ‰èµ„äº§ç°é‡‘æµ - å†å²åŸºå‡†ç°é‡‘æµ
æŠ˜ç°ç³»æ•° = 1/(1+r)^nï¼ˆr=ä¼ä¸šWACC=8%ï¼Œn=1-5å¹´ï¼‰
```

#### 1.2 äº§å“è®¾è®¡èµ„äº§ï¼ˆéœ€æ±‚å¯¼å‘ï¼šæ´å¯Ÿ-è½¬åŒ–-éªŒè¯ï¼‰
```
â–³äº§å“è®¾è®¡èµ„äº§ = Î£ï¼ˆéœ€æ±‚å¯¼å‘èµ„äº§ç¬¬nå¹´ç°é‡‘æµå¢é‡ Ã— æŠ˜ç°ç³»æ•°ï¼‰Ã· 60
å…¶ä¸­ï¼šéœ€æ±‚å¯¼å‘èµ„äº§ç¬¬nå¹´ç°é‡‘æµå¢é‡ = éœ€æ±‚æ´å¯Ÿæ•ˆç‡æå‡ + éœ€æ±‚åŒ¹é…æº¢ä»· + éœ€æ±‚éªŒè¯æˆæœ¬èŠ‚çœ
æŠ˜ç°ç³»æ•° = 1/(1+r)^nï¼ˆr=ä¼ä¸šWACC=8%ï¼Œn=1-5å¹´ï¼‰

éœ€æ±‚å¯¼å‘èµ„äº§æ„æˆï¼š
1. å®¢æˆ·éœ€æ±‚æ•°æ®åº“ï¼šè°ƒç ”å‘¨æœŸèŠ‚çœ + éœ€æ±‚åŒ¹é…æº¢ä»· + å¤è´­å¢é‡
2. éœ€æ±‚-äº§å“æ˜ å°„æ¨¡æ¿ï¼šè®¾è®¡å‘¨æœŸèŠ‚çœ + æ¨¡æ¿æˆæƒæ”¶å…¥
3. å®¢æˆ·éªŒè¯å·¥å…·åº“ï¼šéªŒè¯æˆæœ¬èŠ‚çœ + æå‰ä¸Šå¸‚å¢æ”¶
```

#### 1.3 ç ”å‘èµ„äº§ï¼ˆæŠ€æœ¯åˆ›æ–°ï¼šæ–°æŠ€æœ¯/æ–°å·¥è‰ºåˆ›æ–°ï¼‰
```
â–³ç ”å‘èµ„äº§ = Î£ï¼ˆç¬¬nå¹´ç ”å‘èµ„äº§ç°é‡‘æµå¢é‡ Ã— æŠ˜ç°ç³»æ•°ï¼‰Ã· 60
å…¶ä¸­ï¼šç¬¬nå¹´ç°é‡‘æµå¢é‡ = å½“å¹´ä¸“åˆ©æˆæƒæ”¶å…¥ - è¡Œä¸šåŸºå‡†æ”¶å…¥
æŠ˜ç°ç³»æ•° = 1/(1+r)^nï¼ˆr=ä¼ä¸šWACC=8%ï¼Œn=1-5å¹´ï¼‰

ç ”å‘èµ„äº§æ„æˆï¼š
1. æ–°æŠ€æœ¯ä¸“åˆ©ï¼šä¸“åˆ©æˆæƒæ”¶å…¥ + æŠ€æœ¯å£å’æº¢ä»·
2. å®éªŒè®¾å¤‡ï¼šæŠ€æœ¯éªŒè¯æ•ˆç‡æå‡ + æŠ€æœ¯å¼€å‘æˆæœ¬èŠ‚çœ
3. æŠ€æœ¯æ–‡æ¡£ï¼šæŠ€æœ¯è½¬ç§»æ”¶å…¥ + æŠ€æœ¯å’¨è¯¢è´¹
```

#### 1.4 ç”Ÿäº§èµ„äº§ï¼ˆè§„æ¨¡åŒ–åˆ¶é€ ï¼šäº§å“è§„æ¨¡åŒ–åˆ¶é€ ï¼‰
```
â–³ç”Ÿäº§èµ„äº§ = Î£ï¼ˆç¬¬nå¹´ç”Ÿäº§èµ„äº§ç°é‡‘æµå¢é‡ Ã— æŠ˜ç°ç³»æ•°ï¼‰Ã· 60
å…¶ä¸­ï¼šç¬¬nå¹´ç°é‡‘æµå¢é‡ = å½“å¹´æœ‰èµ„äº§ç°é‡‘æµ - å†å²åŸºå‡†ç°é‡‘æµ
æŠ˜ç°ç³»æ•° = 1/(1+r)^nï¼ˆr=ä¼ä¸šWACC=8%ï¼Œn=1-5å¹´ï¼‰

ç”Ÿäº§èµ„äº§æ„æˆï¼š
1. ç”Ÿäº§è®¾å¤‡ï¼šäº§èƒ½æå‡æ”¶ç›Š + è®¾å¤‡æ•ˆç‡æ”¶ç›Š
2. ä¾›åº”é“¾åè®®ï¼šé‡‡è´­æˆæœ¬èŠ‚çœ + ä¾›åº”ç¨³å®šæ€§æ”¶ç›Š
3. å·¥è‰ºæ ‡å‡†ï¼šè´¨é‡æå‡æ”¶ç›Š + å·¥è‰ºæ•ˆç‡æ”¶ç›Š
```

#### 1.5 æ’­ä¼ èµ„äº§ï¼ˆä»·å€¼ä¼ é€’ï¼šäº§å“ä»·å€¼ä¼ é€’ï¼‰
```
â–³æ’­ä¼ èµ„äº§ = Î£ï¼ˆç¬¬nå¹´æ’­ä¼ èµ„äº§ç°é‡‘æµå¢é‡ Ã— æŠ˜ç°ç³»æ•°ï¼‰Ã· 60
å…¶ä¸­ï¼šç¬¬nå¹´ç°é‡‘æµå¢é‡ = å½“å¹´å“ç‰Œç°é‡‘æµå¢é‡ - å†å²åŸºå‡†ç°é‡‘æµ
æŠ˜ç°ç³»æ•° = 1/(1+r)^nï¼ˆr=ä¼ä¸šWACC=8%ï¼Œn=1-5å¹´ï¼‰

æ’­ä¼ èµ„äº§æ„æˆï¼š
1. å“ç‰ŒIPï¼šå“ç‰Œæº¢ä»·æ”¶å…¥ + IPæˆæƒæ”¶å…¥
2. æ’­ä¼ æ¸ é“ï¼šæ¸ é“è§¦è¾¾æ”¶ç›Š + å†…å®¹ä¼ æ’­æ”¶ç›Š
3. å†…å®¹æ¨¡æ¿ï¼šå†…å®¹åˆ¶ä½œæˆæœ¬èŠ‚çœ + å†…å®¹æ•ˆç‡æ”¶ç›Š
```

#### 1.6 æ¸ é“èµ„äº§ï¼ˆé”€å”®è½åœ°ï¼šäº§å“é”€å”®è½åœ°ï¼‰
```
â–³æ¸ é“èµ„äº§ = Î£ï¼ˆç¬¬nå¹´æ¸ é“èµ„äº§ç°é‡‘æµå¢é‡ Ã— æŠ˜ç°ç³»æ•°ï¼‰Ã· 60
å…¶ä¸­ï¼šç¬¬nå¹´ç°é‡‘æµå¢é‡ = å½“å¹´é—¨åº—è¥æ”¶ - å†å²åŸºå‡†è¥æ”¶
æŠ˜ç°ç³»æ•° = 1/(1+r)^nï¼ˆr=ä¼ä¸šWACC=8%ï¼Œn=1-5å¹´ï¼‰

æ¸ é“èµ„äº§æ„æˆï¼š
1. é—¨åº—ç½‘ç»œï¼šé¦–å•è½¬åŒ–æ”¶ç›Š + é—¨åº—å“ç‰Œæ”¶ç›Š
2. æ¸ é“åè®®ï¼šå¤è´­è½¬åŒ–æ”¶ç›Š + æ¸ é“æ•ˆç‡æ”¶ç›Š
3. å®¢æˆ·æ•°æ®åº“ï¼šè¿½é”€è½¬åŒ–æ”¶ç›Š + ç²¾å‡†è¥é”€æ”¶ç›Š
```

#### 1.7 äº¤ä»˜èµ„äº§ï¼ˆå±¥çº¦æœåŠ¡ï¼šäº§å“å±¥çº¦æœåŠ¡ï¼‰
```
â–³äº¤ä»˜èµ„äº§ = Î£ï¼ˆç¬¬nå¹´äº¤ä»˜èµ„äº§ç°é‡‘æµå¢é‡ Ã— æŠ˜ç°ç³»æ•°ï¼‰Ã· 60
å…¶ä¸­ï¼šç¬¬nå¹´ç°é‡‘æµå¢é‡ = å½“å¹´äº¤ä»˜èŠ‚çœæˆæœ¬ - è¡Œä¸šåŸºå‡†æˆæœ¬
æŠ˜ç°ç³»æ•° = 1/(1+r)^nï¼ˆr=ä¼ä¸šWACC=8%ï¼Œn=1-5å¹´ï¼‰

äº¤ä»˜èµ„äº§æ„æˆï¼š
1. ç‰©æµç½‘ç»œï¼šç‰©æµæˆæœ¬èŠ‚çœ + ç‰©æµæ•ˆç‡æ”¶ç›Š
2. äº¤ä»˜æ ‡å‡†ï¼šæœåŠ¡è´¨é‡æ”¶ç›Š + æ ‡å‡†æ•ˆç‡æ”¶ç›Š
3. æœåŠ¡æµç¨‹ï¼šæœåŠ¡æˆæœ¬èŠ‚çœ + æœåŠ¡æ•ˆç‡æ”¶ç›Š
```

### 2. 6å¤§æ ¸å¿ƒèƒ½åŠ›æ¨¡å—ï¼ˆéœ€æ±‚å¯¼å‘ç‰ˆï¼‰

#### 2.2 ç ”å‘èƒ½åŠ›ï¼ˆæŠ€æœ¯åˆ›æ–°ï¼šæ–°æŠ€æœ¯/æ–°å·¥è‰ºåˆ›æ–°ï¼‰
```
â–³ç ”å‘èƒ½åŠ›ä»·å€¼ = ï¼ˆä¸“åˆ©äº§å‡ºæ”¶ç›Š + æŠ€æœ¯éªŒè¯æ•ˆç‡æ”¶ç›Š + æŠ€æœ¯è½¬ç§»æ”¶ç›Šï¼‰Ã— è´¡çŒ®ç™¾åˆ†æ¯” Ã· 12
å…¶ä¸­ï¼šè´¡çŒ®ç™¾åˆ†æ¯” = åŸºäºæŠ€æœ¯æˆæœçš„æŠ€æœ¯åˆ›æ–°é©±åŠ¨å æ¯”

ç¨³å®šæˆæœæ ‡å‡†ï¼ˆéœ€è¿ç»­6ä¸ªæœˆè¾¾æ ‡ï¼‰ï¼š
1. ä¸“åˆ©äº§å‡ºï¼šå¹´åº¦ä¸“åˆ©äº§å‡ºâ‰¥10é¡¹ï¼Œä¸”æŠ€æœ¯è½¬åŒ–ç‡â‰¥80%
2. æŠ€æœ¯éªŒè¯æ•ˆç‡ï¼šæŠ€æœ¯éªŒè¯å‘¨æœŸæ¯”è¡Œä¸šå‡å€¼çŸ­â‰¥30%ï¼Œä¸”éªŒè¯æˆåŠŸç‡â‰¥90%
3. æŠ€æœ¯è½¬ç§»ï¼šæŠ€æœ¯è½¬ç§»æ”¶å…¥æ¯”è¡Œä¸šå‡å€¼é«˜â‰¥20%
```

#### 2.3 ç”Ÿäº§èƒ½åŠ›ï¼ˆè§„æ¨¡åŒ–åˆ¶é€ ï¼šäº§å“è§„æ¨¡åŒ–åˆ¶é€ ï¼‰
```
â–³ç”Ÿäº§èƒ½åŠ›ä»·å€¼ = ï¼ˆäº§èƒ½è¾¾æ ‡æ”¶ç›Š + ç”Ÿäº§åˆæ ¼æ”¶ç›Š + å·¥è‰ºæ•ˆç‡æ”¶ç›Šï¼‰Ã— è´¡çŒ®ç™¾åˆ†æ¯” Ã· 12
å…¶ä¸­ï¼šè´¡çŒ®ç™¾åˆ†æ¯” = åŸºäºåˆ¶é€ æˆæœçš„åˆ¶é€ èƒ½åŠ›é©±åŠ¨å æ¯”

ç¨³å®šæˆæœæ ‡å‡†ï¼ˆéœ€è¿ç»­6ä¸ªæœˆè¾¾æ ‡ï¼‰ï¼š
1. äº§èƒ½è¾¾æ ‡ç‡ï¼šæœˆåº¦äº§èƒ½è¾¾æ ‡ç‡â‰¥95%
2. ç”Ÿäº§åˆæ ¼ç‡ï¼šæœˆåº¦ç”Ÿäº§åˆæ ¼ç‡â‰¥98%
3. å·¥è‰ºæ•ˆç‡ï¼šå·¥è‰ºæ•ˆç‡æ¯”è¡Œä¸šå‡å€¼é«˜â‰¥15%
```

#### 2.4 æ’­ä¼ èƒ½åŠ›ï¼ˆä»·å€¼ä¼ é€’ï¼šäº§å“ä»·å€¼ä¼ é€’ï¼‰
```
â–³æ’­ä¼ èƒ½åŠ›ä»·å€¼ = ï¼ˆè§¦è¾¾å‡†ç¡®æ”¶ç›Š + å†…å®¹è½¬åŒ–æ”¶ç›Š + å“ç‰Œæº¢ä»·æ”¶ç›Šï¼‰Ã— è´¡çŒ®ç™¾åˆ†æ¯” Ã· 12
å…¶ä¸­ï¼šè´¡çŒ®ç™¾åˆ†æ¯” = åŸºäºä¼ æ’­æˆæœçš„ä»·å€¼ä¼ é€’é©±åŠ¨å æ¯”

ç¨³å®šæˆæœæ ‡å‡†ï¼ˆéœ€è¿ç»­6ä¸ªæœˆè¾¾æ ‡ï¼‰ï¼š
1. è§¦è¾¾å‡†ç¡®ç‡ï¼šç›®æ ‡å®¢æˆ·è§¦è¾¾å‡†ç¡®ç‡â‰¥85%
2. å†…å®¹è½¬åŒ–ç‡ï¼šå†…å®¹è½¬åŒ–ç‡æ¯”è¡Œä¸šå‡å€¼é«˜â‰¥20%
3. å“ç‰Œæº¢ä»·ï¼šå“ç‰Œæº¢ä»·æ”¶å…¥æ¯”è¡Œä¸šå‡å€¼é«˜â‰¥15%
```

#### 2.5 æ¸ é“èƒ½åŠ›ï¼ˆé”€å”®è½åœ°ï¼šäº§å“é”€å”®è½åœ°ï¼‰
```
â–³æ¸ é“èƒ½åŠ›ä»·å€¼ = ï¼ˆé¦–å•è½¬åŒ–æ”¶ç›Š + å¤è´­è½¬åŒ–æ”¶ç›Š + è¿½é”€è½¬åŒ–æ”¶ç›Šï¼‰Ã— è´¡çŒ®ç™¾åˆ†æ¯” Ã· 12
å…¶ä¸­ï¼šè´¡çŒ®ç™¾åˆ†æ¯” = åŸºäºé”€å”®è½¬åŒ–æˆæœçš„æ¸ é“èƒ½åŠ›é©±åŠ¨å æ¯”

ç¨³å®šæˆæœæ ‡å‡†ï¼ˆéœ€è¿ç»­6ä¸ªæœˆè¾¾æ ‡ï¼‰ï¼š
1. é¦–å•è½¬åŒ–ç‡ï¼šæ¸ é“é¦–å•è½¬åŒ–ç‡â‰¥25%
2. å¤è´­è½¬åŒ–ç‡ï¼šæ¸ é“å¤è´­è½¬åŒ–ç‡â‰¥40%
3. è¿½é”€è½¬åŒ–ç‡ï¼šæ¸ é“è¿½é”€è½¬åŒ–ç‡â‰¥15%
```

#### 2.6 äº¤ä»˜èƒ½åŠ›ï¼ˆå±¥çº¦æœåŠ¡ï¼šäº§å“å±¥çº¦æœåŠ¡ï¼‰
```
â–³äº¤ä»˜èƒ½åŠ›ä»·å€¼ = ï¼ˆå‡†æ—¶äº¤ä»˜æ”¶ç›Š + äº¤ä»˜æ»¡æ„åº¦æ”¶ç›Š + æœåŠ¡æ•ˆç‡æ”¶ç›Šï¼‰Ã— è´¡çŒ®ç™¾åˆ†æ¯” Ã· 12
å…¶ä¸­ï¼šè´¡çŒ®ç™¾åˆ†æ¯” = åŸºäºå±¥çº¦æˆæœçš„äº¤ä»˜èƒ½åŠ›é©±åŠ¨å æ¯”

ç¨³å®šæˆæœæ ‡å‡†ï¼ˆéœ€è¿ç»­6ä¸ªæœˆè¾¾æ ‡ï¼‰ï¼š
1. å‡†æ—¶äº¤ä»˜ç‡ï¼šå‡†æ—¶äº¤ä»˜ç‡â‰¥95%
2. äº¤ä»˜æ»¡æ„åº¦ï¼šäº¤ä»˜æ»¡æ„åº¦â‰¥92%
3. æœåŠ¡æ•ˆç‡ï¼šæœåŠ¡æ•ˆç‡æ¯”è¡Œä¸šå‡å€¼é«˜â‰¥20%
```

#### 2.1 äº§å“è®¾è®¡èƒ½åŠ›ï¼ˆéœ€æ±‚å¯¼å‘ï¼šæ´å¯Ÿ-è½¬åŒ–-éªŒè¯ï¼‰
```
â–³äº§å“è®¾è®¡èƒ½åŠ›ä»·å€¼ = ï¼ˆéœ€æ±‚åŒ¹é…æº¢ä»·æ”¶ç›Š + å¤è´­å¢é‡æ”¶ç›Š + éªŒè¯æˆæœ¬èŠ‚çœæ”¶ç›Šï¼‰Ã— è®¾è®¡èƒ½åŠ›è´¡çŒ®ç™¾åˆ†æ¯” Ã· 12
å…¶ä¸­ï¼šè®¾è®¡èƒ½åŠ›è´¡çŒ®ç™¾åˆ†æ¯” = åŸºäºç”¨æˆ·è°ƒç ”çš„éœ€æ±‚é©±åŠ¨å æ¯”

ç¨³å®šæˆæœæ ‡å‡†ï¼ˆéœ€è¿ç»­6ä¸ªæœˆè¾¾æ ‡ï¼Œèšç„¦éœ€æ±‚ï¼‰ï¼š
1. éœ€æ±‚æ´å¯Ÿå‡†ç¡®ç‡ï¼šæœˆåº¦"æ´å¯Ÿçš„å®¢æˆ·éœ€æ±‚"ä¸"å®é™…è´­ä¹°éœ€æ±‚"çš„åŒ¹é…ç‡â‰¥85%
2. éœ€æ±‚è½¬åŒ–è½åœ°ç‡ï¼šæœˆåº¦"æ´å¯Ÿçš„æ ¸å¿ƒéœ€æ±‚"è½¬åŒ–ä¸ºäº§å“å®é™…åŠŸèƒ½çš„æ¯”ä¾‹â‰¥90%
3. éœ€æ±‚éªŒè¯æ»¡æ„åº¦ï¼šæœˆåº¦"éœ€æ±‚è½åœ°äº§å“"çš„å®¢æˆ·æ»¡æ„åº¦â‰¥92%
```

### 3. æ•ˆç‡ä¸äº§å“ä»·å€¼æ¨¡å—ï¼ˆ7ä¸ªâ–³å‡½æ•°ï¼‰

#### 3.1 ç”Ÿäº§æ•ˆèƒ½
```
â–³ç”Ÿäº§æ•ˆèƒ½ = â–³äº§å“æˆæœ¬ä¼˜åŠ¿ Ã· (â–³ç”Ÿäº§èƒ½åŠ› Ã— a2 + â–³ç”Ÿäº§èµ„äº§ Ã— b2)
å…¶ä¸­ï¼ša2 = ç”Ÿäº§èƒ½åŠ›æƒé‡ï¼Œb2 = ç”Ÿäº§èµ„äº§æƒé‡
äº§å“æˆæœ¬ä¼˜åŠ¿ = ç«å“æˆæœ¬ - ä¼ä¸šäº§å“æˆæœ¬
```

#### 3.2 äº§å“ç‰¹æ€§ä»·å€¼
```
â–³äº§å“ç‰¹æ€§ä»·å€¼ = åŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼æ–¹æ³•è®¡ç®—çš„æ€»ä¼°å€¼ Ã— éœ€æ±‚åŒ¹é…ä¿®æ­£ç³»æ•°
å…¶ä¸­ï¼šéœ€æ±‚åŒ¹é…ä¿®æ­£ç³»æ•° = ï¼ˆéœ€æ±‚æ´å¯Ÿå‡†ç¡®ç‡Ã—0.6 + éœ€æ±‚è½¬åŒ–è½åœ°ç‡Ã—0.4ï¼‰

ç‰¹æ€§ä»·å€¼è®¡ç®—æ–¹æ³•ï¼š
1. å†…éƒ¨ä»·å·®æ³•ï¼šç‰¹æ€§ä»·å€¼=ï¼ˆå«ç‰¹æ€§ç‰ˆå”®ä»·-åŸºç¡€ç‰ˆå”®ä»·ï¼‰-ç‰¹æ€§è¾¹é™…æˆæœ¬
2. å¤–éƒ¨ç«å“æ³•ï¼šç‰¹æ€§ä»·å€¼=ï¼ˆç«å“ç‰¹æ€§é€‰è£…ä»·-ç«å“è¾¹é™…æˆæœ¬ï¼‰Ã—å“ç‰Œä¿®æ­£ç³»æ•°
3. æ”¯ä»˜æ„æ„¿æ³•ï¼šç‰¹æ€§ä»·å€¼=å®¢æˆ·å¹³å‡WTP-ç‰¹æ€§è¾¹é™…æˆæœ¬
```

#### 3.3 ä»·å€¼ç‰¹æ€§ç³»æ•°
```
ä»·å€¼ç‰¹æ€§ç³»æ•° = äº§å“å†…åœ¨ä»·å€¼ Ã· äº§å“ç‰¹æ€§ä»·å€¼
å…¶ä¸­ï¼šâ–³äº§å“å†…åœ¨ä»·å€¼ = åŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼çš„å†…åœ¨ä»·å€¼
â–³äº§å“ç‰¹æ€§ä»·å€¼ = åŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼æ–¹æ³•è®¡ç®—çš„æ€»ä¼°å€¼ Ã— éœ€æ±‚åŒ¹é…ä¿®æ­£ç³»æ•°
```

#### 3.4 äº§å“å†…åœ¨ä»·å€¼
```
â–³äº§å“å†…åœ¨ä»·å€¼ = å®¢æˆ·æ”¯ä»˜æ„æ„¿ï¼ˆWTPï¼‰Ã— äº§å“å†…åœ¨ä»·å€¼å¾—åˆ†
å…¶ä¸­ï¼šäº§å“å†…åœ¨ä»·å€¼å¾—åˆ† = éœ€æ±‚åŒ¹é…åº¦æ€»åˆ†Ã—70% + åŠŸèƒ½ç‹¬ç‰¹æ€§æ€»åˆ†Ã—30%

éœ€æ±‚åŒ¹é…åº¦æ€»åˆ† = æ ¸å¿ƒéœ€æ±‚è¦†ç›–ç‡Ã—50% + ç»¼åˆæ»¡è¶³æ·±åº¦Ã—50%
æ ¸å¿ƒéœ€æ±‚è¦†ç›–ç‡ = ï¼ˆäº§å“è¾¾æ ‡éœ€æ±‚é¡¹æ•° Ã· å®¢æˆ·æ ¸å¿ƒéœ€æ±‚æ€»é¡¹æ•°ï¼‰Ã— 100%
ç»¼åˆæ»¡è¶³æ·±åº¦ = Î£ï¼ˆå•éœ€æ±‚æ·±åº¦Ã—éœ€æ±‚é‡è¦æ€§æƒé‡ï¼‰Ã· Î£éœ€æ±‚æƒé‡

åŠŸèƒ½ç‹¬ç‰¹æ€§æ€»åˆ† = ç‹¬ç‰¹åŠŸèƒ½å æ¯”Ã—60% + ç‹¬ç‰¹åŠŸèƒ½éœ€æ±‚æƒé‡Ã—40%Ã—100
ç‹¬ç‰¹åŠŸèƒ½å æ¯” = ï¼ˆç«å“æœªè¦†ç›–çš„éœ€æ±‚åŠŸèƒ½é¡¹æ•° Ã· è‡ªèº«æ ¸å¿ƒåŠŸèƒ½æ€»é¡¹æ•°ï¼‰Ã— 100%
```

#### 3.5 æ’­ä¼ æ•ˆèƒ½
```
â–³æ’­ä¼ æ•ˆèƒ½ = (â–³å®¢æˆ·è®¤çŸ¥ä»·å€¼ - â–³äº§å“å†…åœ¨ä»·å€¼) Ã· (â–³æ’­ä¼ èƒ½åŠ› Ã— a4 + â–³æ’­ä¼ èµ„äº§ Ã— b4)
å…¶ä¸­ï¼ša4 = æ’­ä¼ èƒ½åŠ›æƒé‡ï¼Œb4 = æ’­ä¼ èµ„äº§æƒé‡
```

#### 3.6 å®¢æˆ·è®¤çŸ¥ä»·å€¼
```
â–³å®¢æˆ·è®¤çŸ¥ä»·å€¼ = å®¢æˆ·æ”¯ä»˜æ„æ„¿ï¼ˆWTPï¼‰
å…¶ä¸­ï¼šå®¢æˆ·æ”¯ä»˜æ„æ„¿ï¼ˆWTPï¼‰= å®¢æˆ·å¹³å‡æ„¿æ„æ”¯ä»˜çš„ä»·æ ¼
```

#### 3.7 äº§å“æ•ˆèƒ½
```
â–³äº§å“æ•ˆèƒ½ = â–³äº§å“å†…åœ¨ä»·å€¼ Ã· (â–³è®¾è®¡èƒ½åŠ› Ã— a1 + â–³è®¾è®¡èµ„äº§ Ã— b1)
å…¶ä¸­ï¼ša1 = è®¾è®¡èƒ½åŠ›æƒé‡ï¼Œb1 = è®¾è®¡èµ„äº§æƒé‡
```

#### 3.8 ç”Ÿäº§æ•ˆèƒ½
```
â–³ç”Ÿäº§æ•ˆèƒ½ = â–³äº§å“æˆæœ¬ä¼˜åŠ¿ Ã· (â–³ç”Ÿäº§èƒ½åŠ› Ã— a2 + â–³ç”Ÿäº§èµ„äº§ Ã— b2)
å…¶ä¸­ï¼ša2 = ç”Ÿäº§èƒ½åŠ›æƒé‡ï¼Œb2 = ç”Ÿäº§èµ„äº§æƒé‡
äº§å“æˆæœ¬ä¼˜åŠ¿ = ç«å“æˆæœ¬ - ä¼ä¸šäº§å“æˆæœ¬
```

#### 3.9 ç ”å‘æ•ˆèƒ½
```
â–³ç ”å‘æ•ˆèƒ½ = â–³äº§å“ç‰¹æ€§ä¼°å€¼ Ã· (â–³ç ”å‘èƒ½åŠ› Ã— a3 + â–³ç ”å‘èµ„äº§ Ã— b3)
å…¶ä¸­ï¼ša3 = ç ”å‘èƒ½åŠ›æƒé‡ï¼Œb3 = ç ”å‘èµ„äº§æƒé‡
äº§å“ç‰¹æ€§ä¼°å€¼ = åŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼æ–¹æ³•è®¡ç®—çš„æ€»ä¼°å€¼
```

#### 3.10 æ’­ä¼ æ•ˆèƒ½
```
â–³æ’­ä¼ æ•ˆèƒ½ = â–³å®¢æˆ·è®¤çŸ¥ä»·å€¼ Ã· (â–³æ’­ä¼ èƒ½åŠ› Ã— a4 + â–³æ’­ä¼ èµ„äº§ Ã— b4)
å…¶ä¸­ï¼ša4 = æ’­ä¼ èƒ½åŠ›æƒé‡ï¼Œb4 = æ’­ä¼ èµ„äº§æƒé‡
```

#### 3.11 äº¤ä»˜æ•ˆèƒ½
```
â–³äº¤ä»˜æ•ˆèƒ½ = (â–³å®¢æˆ·ä½“éªŒä»·å€¼ - â–³äº§å“å†…åœ¨ä»·å€¼) Ã· (â–³äº¤ä»˜èƒ½åŠ› Ã— a5 + â–³äº¤ä»˜èµ„äº§ Ã— b5)
å…¶ä¸­ï¼ša5 = äº¤ä»˜èƒ½åŠ›æƒé‡ï¼Œb5 = äº¤ä»˜èµ„äº§æƒé‡
```

#### 3.12 æ¸ é“æ•ˆèƒ½
```
â–³æ¸ é“æ•ˆèƒ½ = â–³é”€å”®è½¬åŒ–æ”¶å…¥ Ã· (â–³æ¸ é“èƒ½åŠ› Ã— a6 + â–³æ¸ é“èµ„äº§ Ã— b6)
å…¶ä¸­ï¼ša6 = æ¸ é“èƒ½åŠ›æƒé‡ï¼Œb6 = æ¸ é“èµ„äº§æƒé‡
â–³é”€å”®è½¬åŒ–æ”¶å…¥ = â–³é¦–å•æ”¶å…¥ + â–³å¤è´­æ”¶å…¥ + â–³è¿½é”€æ”¶å…¥
```

#### 3.13 å®¢æˆ·ä½“éªŒä»·å€¼
```
â–³å®¢æˆ·ä½“éªŒä»·å€¼ = å®¢æˆ·æ”¯ä»˜æ„æ„¿ï¼ˆWTPï¼‰Ã— ä½“éªŒå¾—åˆ†
å…¶ä¸­ï¼šä½“éªŒå¾—åˆ† = ä½“éªŒ-è®¤çŸ¥åå·®Ã—40% + åœºæ™¯æ»¡æ„åº¦Ã—30% + è¡Œä¸ºè½¬åŒ–æ€»åˆ†Ã—30%

ä½“éªŒ-è®¤çŸ¥åå·® = 1 - |ï¼ˆå®é™…ä½¿ç”¨å€¼ - è®¤çŸ¥å€¼ï¼‰Ã· è®¤çŸ¥å€¼|Ã—100%
åœºæ™¯æ»¡æ„åº¦ = ï¼ˆæŸåœºæ™¯ä¸­é€‰æ‹©"æ»¡æ„/éå¸¸æ»¡æ„"çš„å®¢æˆ·æ•° Ã· è¯¥åœºæ™¯è°ƒç ”æ€»å®¢æˆ·æ•°ï¼‰Ã— 100%
è¡Œä¸ºè½¬åŒ–æ€»åˆ† = å¤è´­æ„æ„¿ç‡Ã—60% + ï¼ˆNPSÃ·100ï¼‰Ã—40%Ã—100
```

### 4. æ”¶å…¥åˆ©æ¶¦æ¨¡å—ï¼ˆ5ä¸ªâ–³å‡½æ•°ï¼‰

#### 4.1 é¦–å•æ”¶å…¥
```
â–³é¦–å•æ”¶å…¥ = â–³å®¢æˆ·è®¤çŸ¥ä»·å€¼ Ã— æ–°å®¢æˆ·æ•°é‡ Ã— (1 - ç«å“å¹²æ‰°ç³»æ•°)
å…¶ä¸­ï¼šæ–°å®¢æˆ·æ•°é‡ = è¥é”€é¢„ç®—/è·å®¢æˆæœ¬ = 10ä¸‡/200å…ƒ = 500äºº
ç«å“å¹²æ‰°ç³»æ•° = 5%
```

#### 4.2 å¤è´­æ”¶å…¥
```
â–³å¤è´­æ”¶å…¥ = â–³å®¢æˆ·ä½“éªŒä»·å€¼ Ã— â–³æ¸ é“èƒ½åŠ›ä»·å€¼ Ã— è€å®¢æˆ·åŸºæ•°
å…¶ä¸­ï¼šè€å®¢æˆ·åŸºæ•° = 1000äºº
```

#### 4.3 è¿½é”€æ”¶å…¥
```
â–³è¿½é”€æ”¶å…¥ = â–³å®¢æˆ·è®¤çŸ¥ä»·å€¼ Ã— ä½“éªŒä»·å€¼å¾—åˆ† Ã— è¿½é”€æ¸—é€ç‡
å…¶ä¸­ï¼šè¿½é”€æ¸—é€ç‡ = 10%
```

#### 4.4 æ€»é”€å”®æ”¶å…¥
```
â–³æ€»é”€å”®æ”¶å…¥ = â–³é¦–å•æ”¶å…¥ + â–³å¤è´­æ”¶å…¥ + â–³è¿½é”€æ”¶å…¥
```

#### 4.5 åˆ©æ¶¦
```
â–³åˆ©æ¶¦ = â–³æ€»é”€å”®æ”¶å…¥ - â–³æ€»æˆæœ¬å¼€æ”¯ - â–³å›ºå®šæˆæœ¬åˆ†æ‘Š
å…¶ä¸­ï¼šâ–³æ€»æˆæœ¬å¼€æ”¯ = â–³ç”Ÿäº§èµ„äº§ + â–³ç ”å‘èµ„äº§ + â–³æ’­ä¼ èµ„äº§ + â–³äº¤ä»˜èµ„äº§ + â–³æ¸ é“èµ„äº§
â–³å›ºå®šæˆæœ¬åˆ†æ‘Š = æœ¬æœˆå›ºå®šæˆæœ¬å¢é‡ Ã— (è¯¥èµ„äº§æŠ•å…¥/æ€»èµ„äº§æŠ•å…¥)
```

## ğŸ”§ ç®—æ³•å®ç°

### 1. TypeScriptå®ç°

```typescript
// å…¨é“¾è·¯å¢é‡è®¡ç®—æ¥å£
interface FullChainDeltaCalculation {
  calculationId: string;
  tenantId: string;
  monthDate: Date;
  assetDeltas: AssetDeltas;
  capabilityDeltas: CapabilityDeltas;
  efficiencyDeltas: EfficiencyDeltas;
  valueDeltas: ValueDeltas;
  revenueDeltas: RevenueDeltas;
  profitDelta: number;
  calculationDate: Date;
}

// èµ„äº§å¢é‡
interface AssetDeltas {
  designAsset: number; // äº§å“è®¾è®¡èµ„äº§
  productionAsset: number;
  rdAsset: number;
  marketingAsset: number;
  deliveryAsset: number;
  channelAsset: number;
}

// èƒ½åŠ›å¢é‡
interface CapabilityDeltas {
  designCapability: number; // äº§å“è®¾è®¡èƒ½åŠ›
  productionCapability: number;
  rdCapability: number;
  marketingCapability: number;
  deliveryCapability: number;
  channelCapability: number;
}

// æ•ˆç‡å¢é‡
interface EfficiencyDeltas {
  productEfficiency: number; // äº§å“æ•ˆèƒ½
  productionEfficiency: number;
  rdEfficiency: number;
  marketingEfficiency: number;
  deliveryEfficiency: number;
  channelEfficiency: number;
}

// ä»·å€¼å¢é‡
interface ValueDeltas {
  intrinsicValue: number;
  cognitiveValue: number;
  experientialValue: number;
  productIntrinsicValue: number;
  productFeatureValuation: number; // äº§å“ç‰¹æ€§ä¼°å€¼
  productCostAdvantage: number; // äº§å“æˆæœ¬ä¼˜åŠ¿
  customerCognitiveValue: number;
  customerExperientialValue: number;
}

// æ”¶å…¥å¢é‡
interface RevenueDeltas {
  firstOrderRevenue: number;
  repurchaseRevenue: number;
  upsellRevenue: number;
  productSalesRevenue: number; // äº§å“é”€å”®æ”¶å…¥
  totalRevenue: number;
}

// æ•ˆèƒ½æƒé‡é…ç½®
interface EfficiencyWeights {
  // äº§å“æ•ˆèƒ½æƒé‡
  designCapabilityWeight: number; // a1
  designAssetWeight: number; // b1
  
  // ç”Ÿäº§æ•ˆèƒ½æƒé‡
  productionCapabilityWeight: number; // a2
  productionAssetWeight: number; // b2
  
  // ç ”å‘æ•ˆèƒ½æƒé‡
  rdCapabilityWeight: number; // a3
  rdAssetWeight: number; // b3
  
  // æ’­ä¼ æ•ˆèƒ½æƒé‡
  marketingCapabilityWeight: number; // a4
  marketingAssetWeight: number; // b4
  
  // äº¤ä»˜æ•ˆèƒ½æƒé‡
  deliveryCapabilityWeight: number; // a5
  deliveryAssetWeight: number; // b5
  
  // æ¸ é“æ•ˆèƒ½æƒé‡
  channelCapabilityWeight: number; // a6
  channelAssetWeight: number; // b6
}

// å…¨é“¾è·¯å¢é‡è®¡ç®—å™¨
class FullChainDeltaCalculator {
  private readonly DISCOUNT_RATE = 0.08; // 8% WACC
  private readonly PROJECTION_YEARS = 5;
  
  // é»˜è®¤æ•ˆèƒ½æƒé‡é…ç½®
  private readonly DEFAULT_EFFICIENCY_WEIGHTS: EfficiencyWeights = {
    // äº§å“æ•ˆèƒ½æƒé‡
    designCapabilityWeight: 0.6,
    designAssetWeight: 0.4,
    
    // ç”Ÿäº§æ•ˆèƒ½æƒé‡
    productionCapabilityWeight: 0.6,
    productionAssetWeight: 0.4,
    
    // ç ”å‘æ•ˆèƒ½æƒé‡
    rdCapabilityWeight: 0.6,
    rdAssetWeight: 0.4,
    
    // æ’­ä¼ æ•ˆèƒ½æƒé‡
    marketingCapabilityWeight: 0.6,
    marketingAssetWeight: 0.4,
    
    // äº¤ä»˜æ•ˆèƒ½æƒé‡
    deliveryCapabilityWeight: 0.6,
    deliveryAssetWeight: 0.4,
    
    // æ¸ é“æ•ˆèƒ½æƒé‡
    channelCapabilityWeight: 0.6,
    channelAssetWeight: 0.4
  };
  private readonly MONTHS_PER_YEAR = 12;

  /**
   * è®¡ç®—å…¨é“¾è·¯å¢é‡
   */
  async calculateFullChainDelta(
    tenantId: string,
    monthDate: Date,
    inputData: FullChainInputData
  ): Promise<FullChainDeltaCalculation> {
    // 1. è®¡ç®—èµ„äº§å¢é‡
    const assetDeltas = await this.calculateAssetDeltas(tenantId, monthDate, inputData.assets);
    
    // 2. è®¡ç®—èƒ½åŠ›å¢é‡
    const capabilityDeltas = await this.calculateCapabilityDeltas(tenantId, monthDate, inputData.capabilities);
    
    // 3. è®¡ç®—ä»·å€¼å¢é‡
    const valueDeltas = await this.calculateValueDeltas(capabilityDeltas, inputData.valueAssessments);
    
    // 4. è®¡ç®—æ•ˆç‡å¢é‡
    const efficiencyDeltas = await this.calculateEfficiencyDeltas(assetDeltas, capabilityDeltas, valueDeltas);
    
    // 5. è®¡ç®—æ”¶å…¥å¢é‡
    const revenueDeltas = await this.calculateRevenueDeltas(valueDeltas, inputData.marketData);
    
    // 6. è®¡ç®—åˆ©æ¶¦å¢é‡
    const profitDelta = await this.calculateProfitDelta(revenueDeltas, assetDeltas, inputData.fixedCosts);
    
    return {
      calculationId: this.generateCalculationId(),
      tenantId,
      monthDate,
      assetDeltas,
      capabilityDeltas,
      efficiencyDeltas,
      valueDeltas,
      revenueDeltas,
      profitDelta,
      calculationDate: new Date()
    };
  }

  /**
   * è®¡ç®—èµ„äº§å¢é‡
   */
  private async calculateAssetDeltas(
    tenantId: string,
    monthDate: Date,
    assets: AssetInputData
  ): Promise<AssetDeltas> {
    const designAsset = await this.calculateDesignAsset(tenantId, monthDate, assets.design);
    const productionAsset = await this.calculateProductionAsset(tenantId, monthDate, assets.production);
    const rdAsset = await this.calculateRDAsset(tenantId, monthDate, assets.rd);
    const marketingAsset = await this.calculateMarketingAsset(tenantId, monthDate, assets.marketing);
    const deliveryAsset = await this.calculateDeliveryAsset(tenantId, monthDate, assets.delivery);
    const channelAsset = await this.calculateChannelAsset(tenantId, monthDate, assets.channel);
    
    return {
      designAsset,
      productionAsset,
      rdAsset,
      marketingAsset,
      deliveryAsset,
      channelAsset
    };
  }

  /**
   * è®¡ç®—äº§å“è®¾è®¡èµ„äº§å¢é‡
   */
  private async calculateDesignAsset(
    tenantId: string,
    monthDate: Date,
    designData: DesignAssetData
  ): Promise<number> {
    // è·å–å†å²åŸºå‡†ç°é‡‘æµ
    const baselineCashflow = await this.getBaselineCashflow(tenantId, 'design', monthDate);
    
    // è®¡ç®—æœªæ¥5å¹´ç°é‡‘æµå¢é‡
    const cashflowIncrements = designData.year1to5Cashflows.map(cashflow => 
      cashflow - baselineCashflow
    );
    
    // è®¡ç®—NPVç°å€¼
    let npv = 0;
    for (let year = 1; year <= this.PROJECTION_YEARS; year++) {
      const discountFactor = 1 / Math.pow(1 + this.DISCOUNT_RATE, year);
      const presentValue = cashflowIncrements[year - 1] * discountFactor;
      npv += presentValue;
    }
    
    // è®¡ç®—æœˆåº¦å¢é‡
    return npv / (this.PROJECTION_YEARS * this.MONTHS_PER_YEAR);
  }

  /**
   * è®¡ç®—ç”Ÿäº§èµ„äº§å¢é‡
   */
  private async calculateProductionAsset(
    tenantId: string,
    monthDate: Date,
    productionData: ProductionAssetData
  ): Promise<number> {
    // è·å–å†å²åŸºå‡†ç°é‡‘æµ
    const baselineCashflow = await this.getBaselineCashflow(tenantId, 'production', monthDate);
    
    // è®¡ç®—æœªæ¥5å¹´ç°é‡‘æµå¢é‡
    const cashflowIncrements = productionData.year1to5Cashflows.map(cashflow => 
      cashflow - baselineCashflow
    );
    
    // è®¡ç®—NPVç°å€¼
    let npv = 0;
    for (let year = 1; year <= this.PROJECTION_YEARS; year++) {
      const discountFactor = 1 / Math.pow(1 + this.DISCOUNT_RATE, year);
      const presentValue = cashflowIncrements[year - 1] * discountFactor;
      npv += presentValue;
    }
    
    // è®¡ç®—æœˆåº¦å¢é‡
    return npv / (this.PROJECTION_YEARS * this.MONTHS_PER_YEAR);
  }

  /**
   * è®¡ç®—èƒ½åŠ›å¢é‡
   */
  private async calculateCapabilityDeltas(
    tenantId: string,
    monthDate: Date,
    capabilities: CapabilityInputData
  ): Promise<CapabilityDeltas> {
    const designCapability = await this.calculateDesignCapability(tenantId, monthDate, capabilities.design);
    const productionCapability = await this.calculateProductionCapability(tenantId, monthDate, capabilities.production);
    const rdCapability = await this.calculateRDCapability(tenantId, monthDate, capabilities.rd);
    const marketingCapability = await this.calculateMarketingCapability(tenantId, monthDate, capabilities.marketing);
    const deliveryCapability = await this.calculateDeliveryCapability(tenantId, monthDate, capabilities.delivery);
    const channelCapability = await this.calculateChannelCapability(tenantId, monthDate, capabilities.channel);
    
    return {
      designCapability,
      productionCapability,
      rdCapability,
      marketingCapability,
      deliveryCapability,
      channelCapability
    };
  }

  /**
   * è®¡ç®—äº§å“è®¾è®¡èƒ½åŠ›å¢é‡
   */
  private async calculateDesignCapability(
    tenantId: string,
    monthDate: Date,
    designData: DesignCapabilityData
  ): Promise<number> {
    // è®¡ç®—è´¡çŒ®ç™¾åˆ†æ¯”
    const contributionPercentage = (designData.currentMatchRate - designData.baselineMatchRate) / 
                                  designData.currentMatchRate;
    
    // è®¡ç®—å¹´åº¦æ”¶ç›Š
    const annualRevenue = designData.demandMatchPremium + designData.repurchaseIncrement + designData.validationCostSaving;
    
    // è®¡ç®—æœˆåº¦ä»·å€¼
    return (annualRevenue * contributionPercentage) / 12;
  }

  /**
   * è®¡ç®—ç”Ÿäº§èƒ½åŠ›å¢é‡
   */
  private async calculateProductionCapability(
    tenantId: string,
    monthDate: Date,
    productionData: ProductionCapabilityData
  ): Promise<number> {
    // è®¡ç®—è´¡çŒ®ç™¾åˆ†æ¯”
    const contributionPercentage = (productionData.currentQualityRate - productionData.baselineQualityRate) / 
                                  productionData.currentQualityRate;
    
    // è®¡ç®—å¹´åº¦æ”¶ç›Š
    const annualRevenue = productionData.reworkCostSaving + productionData.repurchaseIncrement;
    
    // è®¡ç®—æœˆåº¦ä»·å€¼
    return (annualRevenue * contributionPercentage) / 12;
  }

  /**
   * è®¡ç®—æ•ˆç‡å¢é‡
   */
  private async calculateEfficiencyDeltas(
    assetDeltas: AssetDeltas,
    capabilityDeltas: CapabilityDeltas,
    valueDeltas: ValueDeltas,
    revenueDeltas: RevenueDeltas,
    efficiencyWeights: EfficiencyWeights
  ): Promise<EfficiencyDeltas> {
    // è®¡ç®—äº§å“æ•ˆèƒ½ï¼šäº§å“å†…åœ¨ä»·å€¼ Ã· (è®¾è®¡èƒ½åŠ›Ã—a1 + è®¾è®¡èµ„äº§Ã—b1)
    const productEfficiency = valueDeltas.productIntrinsicValue / 
      (capabilityDeltas.designCapability * efficiencyWeights.designCapabilityWeight + 
       assetDeltas.designAsset * efficiencyWeights.designAssetWeight);
    
    // è®¡ç®—ç”Ÿäº§æ•ˆèƒ½ï¼šäº§å“æˆæœ¬ä¼˜åŠ¿ Ã· (ç”Ÿäº§èƒ½åŠ›Ã—a2 + ç”Ÿäº§èµ„äº§Ã—b2)
    const productionEfficiency = valueDeltas.productCostAdvantage / 
      (capabilityDeltas.productionCapability * efficiencyWeights.productionCapabilityWeight + 
       assetDeltas.productionAsset * efficiencyWeights.productionAssetWeight);
    
    // è®¡ç®—ç ”å‘æ•ˆèƒ½ï¼šäº§å“ç‰¹æ€§ä¼°å€¼ Ã· (ç ”å‘èƒ½åŠ›Ã—a3 + ç ”å‘èµ„äº§Ã—b3)
    const rdEfficiency = valueDeltas.productFeatureValuation / 
      (capabilityDeltas.rdCapability * efficiencyWeights.rdCapabilityWeight + 
       assetDeltas.rdAsset * efficiencyWeights.rdAssetWeight);
    
    // è®¡ç®—æ’­ä¼ æ•ˆèƒ½ï¼š(å®¢æˆ·è®¤çŸ¥ä»·å€¼-äº§å“å†…åœ¨ä»·å€¼) Ã· (æ’­ä¼ èƒ½åŠ›Ã—a4 + æ’­ä¼ èµ„äº§Ã—b4)
    const marketingEfficiency = (valueDeltas.customerCognitiveValue - valueDeltas.productIntrinsicValue) / 
      (capabilityDeltas.marketingCapability * efficiencyWeights.marketingCapabilityWeight + 
       assetDeltas.marketingAsset * efficiencyWeights.marketingAssetWeight);
    
    // è®¡ç®—äº¤ä»˜æ•ˆèƒ½ï¼š(å®¢æˆ·ä½“éªŒä»·å€¼-äº§å“å†…åœ¨ä»·å€¼) Ã· (äº¤ä»˜èƒ½åŠ›Ã—a5 + äº¤ä»˜èµ„äº§Ã—b5)
    const deliveryEfficiency = (valueDeltas.customerExperientialValue - valueDeltas.productIntrinsicValue) / 
      (capabilityDeltas.deliveryCapability * efficiencyWeights.deliveryCapabilityWeight + 
       assetDeltas.deliveryAsset * efficiencyWeights.deliveryAssetWeight);
    
    // è®¡ç®—æ¸ é“æ•ˆèƒ½ï¼šé”€å”®è½¬åŒ–æ”¶å…¥ Ã· (æ¸ é“èƒ½åŠ›Ã—a6 + æ¸ é“èµ„äº§Ã—b6)
    const salesConversionRevenue = revenueDeltas.firstOrderRevenue + revenueDeltas.repurchaseRevenue + revenueDeltas.upsellRevenue;
    const channelEfficiency = salesConversionRevenue / 
      (capabilityDeltas.channelCapability * efficiencyWeights.channelCapabilityWeight + 
       assetDeltas.channelAsset * efficiencyWeights.channelAssetWeight);
    
    return {
      productEfficiency,
      productionEfficiency,
      rdEfficiency,
      marketingEfficiency,
      deliveryEfficiency,
      channelEfficiency
    };
  }

  /**
   * è®¡ç®—ä»·å€¼å¢é‡
   */
  private async calculateValueDeltas(
    capabilityDeltas: CapabilityDeltas,
    valueAssessments: ValueAssessmentData
  ): Promise<ValueDeltas> {
    // è®¡ç®—äº§å“ç‰¹æ€§æå‡ï¼šç”Ÿäº§èƒ½åŠ›ä»·å€¼ Ã— å†…åœ¨ä»·å€¼éœ€æ±‚åŒ¹é…åº¦
    const productFeatureImprovement = capabilityDeltas.productionCapability * valueAssessments.intrinsicValueMatch;
    
    // è®¡ç®—äº§å“å†…åœ¨ä»·å€¼ï¼šå®¢æˆ·æ”¯ä»˜æ„æ„¿ï¼ˆWTPï¼‰Ã— äº§å“å†…åœ¨ä»·å€¼å¾—åˆ†
    const productIntrinsicValue = valueAssessments.customerWTP * await this.calculateProductIntrinsicValueScore(valueAssessments.intrinsicData);
    
    // è®¡ç®—äº§å“ç‰¹æ€§ä¼°å€¼ï¼šåŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼æ–¹æ³•è®¡ç®—çš„æ€»ä¼°å€¼
    const productFeatureValuation = await this.calculateProductFeatureValuation(valueAssessments.featureValuationData);
    
    // è®¡ç®—äº§å“æˆæœ¬ä¼˜åŠ¿ï¼šç«å“æˆæœ¬ - ä¼ä¸šäº§å“æˆæœ¬
    const productCostAdvantage = await this.calculateProductCostAdvantage(valueAssessments.costData);
    
    // è®¡ç®—ä»·å€¼ç‰¹æ€§ç³»æ•°ï¼šäº§å“å†…åœ¨ä»·å€¼ Ã· äº§å“ç‰¹æ€§æå‡
    const valueCharacteristicCoefficient = productIntrinsicValue / productFeatureImprovement;
    
    // è®¡ç®—å®¢æˆ·è®¤çŸ¥ä»·å€¼ï¼šå®¢æˆ·æ”¯ä»˜æ„æ„¿ï¼ˆWTPï¼‰
    const customerCognitiveValue = valueAssessments.customerWTP;
    
    // è®¡ç®—å®¢æˆ·ä½“éªŒä»·å€¼ï¼šå®¢æˆ·æ”¯ä»˜æ„æ„¿ï¼ˆWTPï¼‰Ã— ä½“éªŒå¾—åˆ†
    const experientialScore = await this.calculateCustomerExperientialValue(valueAssessments.experientialData);
    const customerExperientialValue = valueAssessments.customerWTP * experientialScore;
    
    return {
      intrinsicValue: valueAssessments.intrinsicValueScore,
      cognitiveValue: valueAssessments.cognitiveValueScore,
      experientialValue: valueAssessments.experientialValueScore,
      productIntrinsicValue,
      productFeatureValuation,
      productCostAdvantage,
      customerCognitiveValue,
      customerExperientialValue,
      valueCharacteristicCoefficient
    };
  }

  /**
   * è®¡ç®—äº§å“å†…åœ¨ä»·å€¼ï¼ˆåŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼ï¼‰
   */
  private async calculateProductIntrinsicValue(featureValuationData: any): Promise<number> {
    // åŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼æ–¹æ³•è®¡ç®—äº§å“å†…åœ¨ä»·å€¼
    // è¿™é‡Œè°ƒç”¨ç‰¹æ€§ä¼°å€¼è®¡ç®—å™¨
    const featureValuationCalculator = new FeatureValuationCalculator();
    const totalFeatureValue = await featureValuationCalculator.calculateTotalFeatureValue(featureValuationData);
    return totalFeatureValue;
  }

  /**
   * è®¡ç®—äº§å“æˆæœ¬ä¼˜åŠ¿
   */
  private async calculateProductCostAdvantage(costData: any): Promise<number> {
    // äº§å“æˆæœ¬ä¼˜åŠ¿ = ç«å“æˆæœ¬ - ä¼ä¸šäº§å“æˆæœ¬
    const competitorCost = costData.competitorCost;
    const enterpriseCost = costData.enterpriseCost;
    return competitorCost - enterpriseCost;
  }

  /**
   * è®¡ç®—äº§å“ç‰¹æ€§ä»·å€¼ï¼ˆåŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼æ–¹æ³• + éœ€æ±‚åŒ¹é…ä¿®æ­£ï¼‰
   */
  private async calculateProductFeatureValuation(featureValuationData: any): Promise<number> {
    // åŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼æ–¹æ³•è®¡ç®—äº§å“ç‰¹æ€§ä¼°å€¼
    const featureValuationCalculator = new FeatureValuationCalculator();
    const baseFeatureValue = await featureValuationCalculator.calculateTotalFeatureValue(featureValuationData);
    
    // è®¡ç®—éœ€æ±‚åŒ¹é…ä¿®æ­£ç³»æ•°
    const demandMatchCoefficient = await this.calculateDemandMatchCoefficient(featureValuationData);
    
    // åº”ç”¨éœ€æ±‚åŒ¹é…ä¿®æ­£ç³»æ•°
    return baseFeatureValue * demandMatchCoefficient;
  }

  /**
   * è®¡ç®—éœ€æ±‚åŒ¹é…ä¿®æ­£ç³»æ•°
   */
  private async calculateDemandMatchCoefficient(featureValuationData: any): Promise<number> {
    // éœ€æ±‚åŒ¹é…ä¿®æ­£ç³»æ•° = ï¼ˆéœ€æ±‚æ´å¯Ÿå‡†ç¡®ç‡Ã—0.6 + éœ€æ±‚è½¬åŒ–è½åœ°ç‡Ã—0.4ï¼‰
    const insightAccuracy = featureValuationData.designCapability?.insightAccuracy || 0.85;
    const conversionRate = featureValuationData.designCapability?.conversionRate || 0.90;
    
    return insightAccuracy * 0.6 + conversionRate * 0.4;
  }

  /**
   * è®¡ç®—äº§å“å†…åœ¨ä»·å€¼å¾—åˆ†
   */
  private async calculateProductIntrinsicValueScore(intrinsicData: any): Promise<number> {
    // äº§å“å†…åœ¨ä»·å€¼å¾—åˆ† = éœ€æ±‚åŒ¹é…åº¦æ€»åˆ†Ã—70% + åŠŸèƒ½ç‹¬ç‰¹æ€§æ€»åˆ†Ã—30%
    const demandMatchScore = intrinsicData.demandMatchScore || 0.646;
    const functionUniquenessScore = intrinsicData.functionUniquenessScore || 0.095;
    
    return demandMatchScore * 0.7 + functionUniquenessScore * 0.3;
  }

  /**
   * è®¡ç®—å®¢æˆ·ä½“éªŒå¾—åˆ†
   */
  private async calculateCustomerExperientialValue(experientialData: any): Promise<number> {
    // å®¢æˆ·ä½“éªŒå¾—åˆ† = ä½“éªŒ-è®¤çŸ¥åå·®Ã—40% + åœºæ™¯æ»¡æ„åº¦Ã—30% + è¡Œä¸ºè½¬åŒ–æ€»åˆ†Ã—30%
    const experienceCognitiveDeviation = experientialData.experienceCognitiveDeviation || 0.833;
    const scenarioSatisfaction = experientialData.scenarioSatisfaction || 0.85;
    const behaviorConversion = experientialData.behaviorConversion || 0.54;
    
    return experienceCognitiveDeviation * 0.4 + scenarioSatisfaction * 0.3 + behaviorConversion * 0.3;
  }

  /**
   * è®¡ç®—è®¾è®¡è¦ç´ ä¿®æ­£ç³»æ•°
   */
  private async calculateDesignEnhancementFactor(featureValuationData: any): Promise<number> {
    let totalEnhancementFactor = 0;
    
    // è®¾è®¡èµ„äº§å¯¹ç‰¹æ€§ä¼°å€¼çš„ä¿®æ­£
    if (featureValuationData.designAssets) {
      for (const asset of featureValuationData.designAssets) {
        switch (asset.type) {
          case 'patent':
            totalEnhancementFactor += 0.15; // å¤–è§‚ä¸“åˆ©æ”¯æ’‘ï¼š10%-15%
            break;
          case 'ip':
            totalEnhancementFactor += 0.25; // IPå½¢è±¡è”åï¼š20%-30%
            break;
          case 'template':
            totalEnhancementFactor += 0.06; // æ¨¡æ¿å¤ç”¨èŠ‚çœæˆæœ¬ï¼š5%-8%
            break;
        }
      }
    }
    
    // è®¾è®¡èƒ½åŠ›å¯¹ç‰¹æ€§ä¼°å€¼çš„ä¿®æ­£
    if (featureValuationData.designCapabilities) {
      for (const capability of featureValuationData.designCapabilities) {
        switch (capability.type) {
          case 'wtp_enhancement':
            totalEnhancementFactor += 0.15; // WTPæ¯”è¡Œä¸šé«˜15%-20%
            break;
          case 'efficiency':
            totalEnhancementFactor += 0.08; // è®¾è®¡å‘¨æœŸçŸ­30%+
            break;
        }
      }
    }
    
    return Math.min(totalEnhancementFactor, 0.5); // æœ€å¤§ä¿®æ­£ç³»æ•°50%
  }

  /**
   * è®¡ç®—æ”¶å…¥å¢é‡
   */
  private async calculateRevenueDeltas(
    valueDeltas: ValueDeltas,
    marketData: MarketData
  ): Promise<RevenueDeltas> {
    // è®¡ç®—é¦–å•æ”¶å…¥
    const firstOrderRevenue = valueDeltas.customerCognitiveValue * marketData.newCustomerCount * 
                             (1 - marketData.competitorInterferenceCoefficient);
    
    // è®¡ç®—å¤è´­æ”¶å…¥
    const repurchaseRevenue = valueDeltas.customerExperientialValue * marketData.channelCapabilityValue * 
                             marketData.existingCustomerBase;
    
    // è®¡ç®—è¿½é”€æ”¶å…¥
    const upsellRevenue = valueDeltas.customerCognitiveValue * marketData.experientialValueScore * 
                         marketData.upsellPenetrationRate;
    
    // è®¡ç®—æ€»æ”¶å…¥
    const totalRevenue = firstOrderRevenue + repurchaseRevenue + upsellRevenue;
    
    return {
      firstOrderRevenue,
      repurchaseRevenue,
      upsellRevenue,
      totalRevenue
    };
  }

  /**
   * è®¡ç®—åˆ©æ¶¦å¢é‡
   */
  private async calculateProfitDelta(
    revenueDeltas: RevenueDeltas,
    assetDeltas: AssetDeltas,
    fixedCosts: FixedCostData
  ): Promise<number> {
    // è®¡ç®—æ€»æˆæœ¬å¼€æ”¯
    const totalCostExpenses = assetDeltas.productionAsset + assetDeltas.rdAsset + 
                             assetDeltas.marketingAsset + assetDeltas.deliveryAsset + 
                             assetDeltas.channelAsset;
    
    // è®¡ç®—å›ºå®šæˆæœ¬åˆ†æ‘Š
    const fixedCostAllocation = fixedCosts.monthlyFixedCostIncrement * 
                               (totalCostExpenses / fixedCosts.totalAssetInvestment);
    
    // è®¡ç®—åˆ©æ¶¦å¢é‡
    return revenueDeltas.totalRevenue - totalCostExpenses - fixedCostAllocation;
  }
}
```

### 2. æ•°æ®åº“å­˜å‚¨

```sql
-- å…¨é“¾è·¯å¢é‡è®¡ç®—å‡½æ•°
CREATE OR REPLACE FUNCTION calculate_full_chain_delta(
  p_tenant_id UUID,
  p_month_date DATE,
  p_asset_data JSONB,
  p_capability_data JSONB,
  p_value_assessment_data JSONB,
  p_market_data JSONB,
  p_fixed_cost_data JSONB
) RETURNS TABLE(
  calculation_id UUID,
  asset_deltas JSONB,
  capability_deltas JSONB,
  efficiency_deltas JSONB,
  value_deltas JSONB,
  revenue_deltas JSONB,
  profit_delta DECIMAL(15,2)
) AS $$
DECLARE
  v_calculation_id UUID := gen_random_uuid();
  v_asset_deltas JSONB;
  v_capability_deltas JSONB;
  v_efficiency_deltas JSONB;
  v_value_deltas JSONB;
  v_revenue_deltas JSONB;
  v_profit_delta DECIMAL(15,2);
BEGIN
  -- 1. è®¡ç®—èµ„äº§å¢é‡
  SELECT jsonb_build_object(
    'production_asset', calculate_production_asset(p_asset_data->'production'),
    'rd_asset', calculate_rd_asset(p_asset_data->'rd'),
    'marketing_asset', calculate_marketing_asset(p_asset_data->'marketing'),
    'delivery_asset', calculate_delivery_asset(p_asset_data->'delivery'),
    'channel_asset', calculate_channel_asset(p_asset_data->'channel')
  ) INTO v_asset_deltas;
  
  -- 2. è®¡ç®—èƒ½åŠ›å¢é‡
  SELECT jsonb_build_object(
    'production_capability', calculate_production_capability(p_capability_data->'production'),
    'rd_capability', calculate_rd_capability(p_capability_data->'rd'),
    'marketing_capability', calculate_marketing_capability(p_capability_data->'marketing'),
    'delivery_capability', calculate_delivery_capability(p_capability_data->'delivery'),
    'channel_capability', calculate_channel_capability(p_capability_data->'channel')
  ) INTO v_capability_deltas;
  
  -- 3. è®¡ç®—æ•ˆç‡å¢é‡
  SELECT jsonb_build_object(
    'production_efficiency', (v_asset_deltas->>'production_asset')::DECIMAL * (v_capability_deltas->>'production_capability')::DECIMAL / get_asset_base('production'),
    'rd_efficiency', (v_asset_deltas->>'rd_asset')::DECIMAL * (v_capability_deltas->>'rd_capability')::DECIMAL / get_asset_base('rd'),
    'marketing_efficiency', (v_asset_deltas->>'marketing_asset')::DECIMAL * (v_capability_deltas->>'marketing_capability')::DECIMAL / get_asset_base('marketing'),
    'delivery_efficiency', (v_asset_deltas->>'delivery_asset')::DECIMAL * (v_capability_deltas->>'delivery_capability')::DECIMAL / get_asset_base('delivery'),
    'channel_efficiency', (v_asset_deltas->>'channel_asset')::DECIMAL * (v_capability_deltas->>'channel_capability')::DECIMAL / get_asset_base('channel')
  ) INTO v_efficiency_deltas;
  
  -- 4. è®¡ç®—ä»·å€¼å¢é‡
  SELECT jsonb_build_object(
    'intrinsic_value', p_value_assessment_data->>'intrinsic_value_score',
    'cognitive_value', p_value_assessment_data->>'cognitive_value_score',
    'experiential_value', p_value_assessment_data->>'experiential_value_score',
    'product_intrinsic_value', calculate_product_intrinsic_value(v_efficiency_deltas, p_value_assessment_data),
    'customer_cognitive_value', calculate_customer_cognitive_value(v_efficiency_deltas, p_value_assessment_data),
    'customer_experiential_value', calculate_customer_experiential_value(v_efficiency_deltas, p_value_assessment_data)
  ) INTO v_value_deltas;
  
  -- 5. è®¡ç®—æ”¶å…¥å¢é‡
  SELECT jsonb_build_object(
    'first_order_revenue', calculate_first_order_revenue(v_value_deltas, p_market_data),
    'repurchase_revenue', calculate_repurchase_revenue(v_value_deltas, p_market_data),
    'upsell_revenue', calculate_upsell_revenue(v_value_deltas, p_market_data),
    'total_revenue', calculate_total_revenue(v_value_deltas, p_market_data)
  ) INTO v_revenue_deltas;
  
  -- 6. è®¡ç®—åˆ©æ¶¦å¢é‡
  v_profit_delta := calculate_profit_delta(v_revenue_deltas, v_asset_deltas, p_fixed_cost_data);
  
  RETURN QUERY SELECT v_calculation_id, v_asset_deltas, v_capability_deltas, v_efficiency_deltas, v_value_deltas, v_revenue_deltas, v_profit_delta;
END;
$$ LANGUAGE plpgsql;
```

## ğŸ“Š å…·ä½“è®¡ç®—ç¤ºä¾‹

### 6å¤§ä½“ç³»è½åœ°å·¥å…·è¡¨ï¼ˆéœ€æ±‚å¯¼å‘ï¼Œå¼ºååŒï¼‰

| æ ¸å¿ƒæ¨¡å— | èµ„äº§æœˆåº¦æ€»å¢é‡ï¼ˆä¸‡å…ƒï¼‰ | èƒ½åŠ›æœˆåº¦å¢é‡ï¼ˆä¸‡å…ƒï¼‰ | ä¸æ¨¡å‹è¡”æ¥ç³»æ•°ï¼ˆéœ€æ±‚é©±åŠ¨ååŒï¼‰ | æ ¸å¿ƒåº”ç”¨åœºæ™¯ï¼ˆæ— é‡å ï¼‰ |
|----------|------------------------|---------------------|--------------------------------|------------------------|
| äº§å“è®¾è®¡ï¼ˆéœ€æ±‚å¯¼å‘ï¼‰ | 181.34 | 121.67 | è®¾è®¡èµ„äº§Ã—1.3=éœ€æ±‚æ´å¯Ÿæ•ˆç‡åŸºæ•°ï¼›è®¾è®¡èƒ½åŠ›Ã—1.1=äº§å“å†…åœ¨ä»·å€¼-éœ€æ±‚åŒ¹é…åº¦ä¿®æ­£ | å®¢æˆ·éœ€æ±‚è°ƒç ”ã€éœ€æ±‚-äº§å“æ˜ å°„ã€ç”¨æˆ·éªŒè¯ |
| ç ”å‘ï¼ˆæŠ€æœ¯åˆ›æ–°ï¼‰ | 255.34 | 142.5 | ç ”å‘èµ„äº§Ã—0.9=æŠ€æœ¯é€‚é…éœ€æ±‚åŸºæ•°ï¼›ç ”å‘èƒ½åŠ›Ã—0.8=æŠ€æœ¯æ»¡è¶³éœ€æ±‚é€‚é…åº¦ | æ–°æŠ€æœ¯æ”»å…³ã€æŠ€æœ¯éœ€æ±‚åŒ¹é… |
| ç”Ÿäº§ï¼ˆè§„æ¨¡åŒ–åˆ¶é€ ï¼‰ | 255.08 | 148.33 | ç”Ÿäº§èµ„äº§Ã—1.2=åˆ¶é€ æ»¡è¶³éœ€æ±‚åŸºæ•°ï¼›ç”Ÿäº§èƒ½åŠ›Ã—0.7=åˆ¶é€ éœ€æ±‚åˆæ ¼ç‡ | å·¥è‰ºé€‚é…éœ€æ±‚ã€äº§èƒ½æ»¡è¶³éœ€æ±‚ |
| æ’­ä¼ ï¼ˆä»·å€¼ä¼ é€’ï¼‰ | 209.03 | 128.33 | æ’­ä¼ èµ„äº§Ã—1.0=éœ€æ±‚ä»·å€¼ä¼ é€’åŸºæ•°ï¼›æ’­ä¼ èƒ½åŠ›Ã—0.9=éœ€æ±‚ä»·å€¼è®¤çŸ¥ä¿®æ­£ | ä¼ é€’äº§å“æ»¡è¶³éœ€æ±‚çš„å–ç‚¹ |
| æ¸ é“ï¼ˆé”€å”®è½åœ°ï¼‰ | 264.84 | 135 | æ¸ é“èµ„äº§Ã—1.3=éœ€æ±‚åé¦ˆæ”¶é›†åŸºæ•°ï¼›æ¸ é“èƒ½åŠ›Ã—0.8=é”€å”®è½¬åŒ–ç‡ï¼ˆé¦–å•+å¤è´­+è¿½é”€ï¼‰ | æ”¶é›†å®¢æˆ·éœ€æ±‚ã€éœ€æ±‚å¯¼å‘é”€å”®ã€é”€å”®è½¬åŒ–ä¼˜åŒ– |
| äº¤ä»˜ï¼ˆå±¥çº¦æœåŠ¡ï¼‰ | 163.62 | 96.25 | äº¤ä»˜èµ„äº§Ã—0.8=éœ€æ±‚ä½“éªŒéªŒè¯åŸºæ•°ï¼›äº¤ä»˜èƒ½åŠ›Ã—1.2=éœ€æ±‚ä½“éªŒæ»¡æ„åº¦ä¿®æ­£ | éªŒè¯éœ€æ±‚è½åœ°ä½“éªŒã€æ”¶é›†ä½“éªŒåé¦ˆ |

### è®¾è®¡èµ„äº§ä¸èƒ½åŠ›ä¼°å€¼ç¤ºä¾‹ï¼ˆ2025å¹´10æœˆï¼Œå•ä½ï¼šä¸‡å…ƒï¼‰

| è¦ç´ ç±»å‹ | ç»†åˆ†æ„æˆ | é‡åŒ–æ–¹æ³• | åŸºç¡€æ•°æ®ï¼ˆä¸‡å…ƒ/å¹´ï¼‰ | å¹´åº¦æ”¶ç›Š/ç°é‡‘æµï¼ˆä¸‡å…ƒï¼‰ | ä»·å€¼è®¡ç®—ï¼ˆä¸‡å…ƒï¼‰ | ä¸ç‰¹æ€§ä¼°å€¼è¡”æ¥ï¼ˆå¢ç›Šç³»æ•°ï¼‰ |
|----------|----------|----------|---------------------|-------------------------|------------------|----------------------------|
| äº§å“è®¾è®¡èµ„äº§ | å®¢æˆ·éœ€æ±‚æ•°æ®åº“ | æœªæ¥5å¹´ç°é‡‘æµç°å€¼ | è°ƒç ”èŠ‚çœ150ï¼Œæº¢ä»·800ï¼Œå¤è´­600/å¹´ | 1550ï¼ˆå¹´ç°é‡‘æµï¼‰ï¼Œ5å¹´æŠ˜ç°7240 | æœˆåº¦å¢é‡120.67 | éœ€æ±‚æ´å¯Ÿæ•ˆç‡æå‡ |
| äº§å“è®¾è®¡èµ„äº§ | éœ€æ±‚-äº§å“æ˜ å°„æ¨¡æ¿ | æœªæ¥5å¹´ç°é‡‘æµç°å€¼ | å‘¨æœŸèŠ‚çœ100ï¼Œæˆæƒ200/å¹´ | 300ï¼ˆå¹´ç°é‡‘æµï¼‰ï¼Œ5å¹´æŠ˜ç°1560 | æœˆåº¦å¢é‡26 | éœ€æ±‚è½¬åŒ–è½åœ°ç‡æå‡ |
| äº§å“è®¾è®¡èµ„äº§ | å®¢æˆ·éªŒè¯å·¥å…·åº“ | æœªæ¥5å¹´ç°é‡‘æµç°å€¼ | æˆæœ¬èŠ‚çœ120ï¼Œæå‰å¢æ”¶300/å¹´ | 420ï¼ˆå¹´ç°é‡‘æµï¼‰ï¼Œ5å¹´æŠ˜ç°2080 | æœˆåº¦å¢é‡34.67 | éœ€æ±‚éªŒè¯æ»¡æ„åº¦æå‡ |
| äº§å“è®¾è®¡èƒ½åŠ› | éœ€æ±‚åŒ¹é…æº¢ä»· | ç¨³å®šæˆæœ+æ”¶ç›Šç™¾åˆ†æ¯” | éœ€æ±‚æ´å¯Ÿå‡†ç¡®å¸¦æ¥æº¢ä»·800 | 800ï¼ˆè®¾è®¡è´¡çŒ®100%ï¼‰ | æœˆåº¦å¢é‡66.67 | éœ€æ±‚æ´å¯Ÿå‡†ç¡®ç‡â‰¥85% |
| äº§å“è®¾è®¡èƒ½åŠ› | å¤è´­å¢é‡æ”¶ç›Š | ç¨³å®šæˆæœ+æ”¶ç›Šç™¾åˆ†æ¯” | éœ€æ±‚éªŒè¯æ»¡æ„å¸¦æ¥å¤è´­600 | 540ï¼ˆè®¾è®¡è´¡çŒ®90%ï¼‰ | æœˆåº¦å¢é‡45 | éœ€æ±‚éªŒè¯æ»¡æ„åº¦â‰¥92% |
| äº§å“è®¾è®¡èƒ½åŠ› | éªŒè¯æˆæœ¬èŠ‚çœ | ç¨³å®šæˆæœ+æ”¶ç›Šç™¾åˆ†æ¯” | æ ‡å‡†åŒ–å·¥å…·å¸¦æ¥æˆæœ¬èŠ‚çœ120 | 120ï¼ˆè®¾è®¡è´¡çŒ®100%ï¼‰ | æœˆåº¦å¢é‡10 | éœ€æ±‚è½¬åŒ–è½åœ°ç‡â‰¥90% |

### ç¤ºä¾‹æ•°æ®ï¼ˆ2025å¹´10æœˆï¼Œå•ä½ï¼šä¸‡å…ƒï¼‰

| å˜é‡ | æ•°å€¼ | è®¡ç®—è¿‡ç¨‹ | ç»“æœ |
|------|------|----------|------|
| â–³ç”Ÿäº§èµ„äº§ | 5.54 | æœªæ¥5å¹´ç°é‡‘æµå¢é‡ç°å€¼332.5ä¸‡Ã·60 | 5.54 |
| â–³ç ”å‘èµ„äº§ | 4.21 | æœªæ¥5å¹´ä¸“åˆ©ç°é‡‘æµå¢é‡ç°å€¼252.6ä¸‡Ã·60 | 4.21 |
| â–³æ’­ä¼ èµ„äº§ | 3.85 | æœªæ¥5å¹´å“ç‰Œç°é‡‘æµå¢é‡ç°å€¼231ä¸‡Ã·60 | 3.85 |
| â–³äº¤ä»˜èµ„äº§ | 2.93 | æœªæ¥5å¹´ç‰©æµç°é‡‘æµå¢é‡ç°å€¼175.8ä¸‡Ã·60 | 2.93 |
| â–³æ¸ é“èµ„äº§ | 4.62 | æœªæ¥5å¹´é—¨åº—ç°é‡‘æµå¢é‡ç°å€¼277.2ä¸‡Ã·60 | 4.62 |
| â–³ç”Ÿäº§èƒ½åŠ›ä»·å€¼ | 2.81 | å¹´åº¦æ”¶ç›Š540ä¸‡Ã—è´¡çŒ®ç™¾åˆ†æ¯”6.25%Ã·12 | 2.81 |
| â–³ç ”å‘èƒ½åŠ›ä»·å€¼ | 3.13 | å¹´åº¦æ”¶ç›Š450ä¸‡Ã—è´¡çŒ®ç™¾åˆ†æ¯”80%Ã·12 | 3.13 |
| â–³æ’­ä¼ èƒ½åŠ›ä»·å€¼ | 2.92 | å¹´åº¦æ”¶ç›Š450ä¸‡Ã—è´¡çŒ®ç™¾åˆ†æ¯”46.4%Ã·12 | 2.92 |
| â–³äº¤ä»˜èƒ½åŠ›ä»·å€¼ | 2.50 | å¹´åº¦æ”¶ç›Š360ä¸‡Ã—è´¡çŒ®ç™¾åˆ†æ¯”66.7%Ã·12 | 2.50 |
| â–³æ¸ é“èƒ½åŠ›ä»·å€¼ | 3.13 | å¹´åº¦æ”¶ç›Š450ä¸‡Ã—è´¡çŒ®ç™¾åˆ†æ¯”46.4%Ã·12 | 3.13 |
| â–³äº§å“ç‰¹æ€§æå‡ | 0.18 | 2.81Ã—0.646 | 0.18 |
| â–³ä»·å€¼ç‰¹æ€§ç³»æ•° | 1.28 | 0.23Ã·0.18 | 1.28 |
| â–³äº§å“å†…åœ¨ä»·å€¼ | 0.23 | åŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼è®¡ç®— | 0.23 |
| â–³äº§å“ç‰¹æ€§ä¼°å€¼ | 0.15 | åŸºäºç‰¹æ€§å•ç‹¬ä¼°å€¼æ–¹æ³•è®¡ç®—çš„æ€»ä¼°å€¼ | 0.15 |
| â–³äº§å“æˆæœ¬ä¼˜åŠ¿ | 0.12 | ç«å“æˆæœ¬ - ä¼ä¸šäº§å“æˆæœ¬ | 0.12 |
| â–³å®¢æˆ·è®¤çŸ¥ä»·å€¼ | 0.23 | å®¢æˆ·æ”¯ä»˜æ„æ„¿ï¼ˆWTPï¼‰ | 0.23 |
| â–³å®¢æˆ·ä½“éªŒä»·å€¼ | 0.17 | 0.23Ã—0.746 | 0.17 |
| â–³é”€å”®è½¬åŒ–æ”¶å…¥ | 1.37 | é¦–å•æ”¶å…¥+å¤è´­æ”¶å…¥+è¿½é”€æ”¶å…¥ | 1.37 |
| â–³äº§å“æ•ˆèƒ½ | 0.08 | 0.23Ã·(2.5Ã—0.6+3.0Ã—0.4) | 0.08 |
| â–³ç”Ÿäº§æ•ˆèƒ½ | 0.03 | 0.12Ã·(2.81Ã—0.6+5.54Ã—0.4) | 0.03 |
| â–³æ’­ä¼ æ•ˆèƒ½ | 0.00 | (0.23-0.23)Ã·(2.92Ã—0.6+3.85Ã—0.4) | 0.00 |
| â–³äº¤ä»˜æ•ˆèƒ½ | -0.02 | (0.17-0.23)Ã·(2.50Ã—0.6+2.93Ã—0.4) | -0.02 |
| â–³ç ”å‘æ•ˆèƒ½ | 0.36 | 0.15Ã·(3.13Ã—0.6+4.21Ã—0.4) | 0.36 |
| â–³æ¸ é“æ•ˆèƒ½ | 0.44 | 1.37Ã·(3.13Ã—0.6+4.62Ã—0.4) | 0.44 |
| â–³é¦–å•æ”¶å…¥ | 0.407 | 0.04Ã—0.05Ã—(1-5%) | 0.407 |
| â–³å¤è´­æ”¶å…¥ | 0.327 | 0.04Ã—3.13Ã—0.1 | 0.327 |
| â–³è¿½é”€æ”¶å…¥ | 0.636 | 0.04Ã—0.746Ã—10% | 0.636 |
| â–³æ€»é”€å”®æ”¶å…¥ | 1.37 | 0.407+0.327+0.636 | 1.37 |
| â–³æ€»æˆæœ¬å¼€æ”¯ | 21.15 | 5.54+4.21+3.85+2.93+4.62 | 21.15 |
| â–³å›ºå®šæˆæœ¬åˆ†æ‘Š | 0.85 | 15ä¸‡Ã—(21.15/æ€»èµ„äº§æŠ•å…¥) | 0.85 |
| â–³åˆ©æ¶¦ | -20.63 | 1.37-21.15-0.85 | -20.63 |

## ğŸ”„ åŠ¨æ€åé¦ˆå›è·¯

### 1. åˆ©æ¶¦åå“ºèµ„äº§

```typescript
// åˆ©æ¶¦åå“ºèµ„äº§è®¡ç®—å™¨
class ProfitReinvestmentCalculator {
  private readonly DEFAULT_REINVESTMENT_RATIOS = {
    production: 0.20,
    rd: 0.30,
    marketing: 0.20,
    delivery: 0.10,
    channel: 0.20
  };

  /**
   * è®¡ç®—ä¸‹å­£åº¦èµ„äº§åå“º
   */
  async calculateNextQuarterAssetReinvestment(
    currentProfit: number,
    assetROIs: AssetROIs
  ): Promise<AssetReinvestment> {
    const adjustedRatios = this.adjustReinvestmentRatios(assetROIs);
    
    return {
      productionAsset: currentProfit * adjustedRatios.production,
      rdAsset: currentProfit * adjustedRatios.rd,
      marketingAsset: currentProfit * adjustedRatios.marketing,
      deliveryAsset: currentProfit * adjustedRatios.delivery,
      channelAsset: currentProfit * adjustedRatios.channel
    };
  }

  /**
   * è°ƒæ•´åå“ºæ¯”ä¾‹
   */
  private adjustReinvestmentRatios(assetROIs: AssetROIs): ReinvestmentRatios {
    const ratios = { ...this.DEFAULT_REINVESTMENT_RATIOS };
    
    // å¦‚æœæŸèƒ½åŠ›ROIâ‰¥15%ï¼Œæ¯”ä¾‹+5%
    if (assetROIs.rd >= 0.15) {
      ratios.rd += 0.05;
      ratios.production -= 0.025;
      ratios.marketing -= 0.025;
    }
    
    if (assetROIs.channel >= 0.15) {
      ratios.channel += 0.05;
      ratios.production -= 0.025;
      ratios.marketing -= 0.025;
    }
    
    return ratios;
  }
}
```

### 2. èƒ½åŠ›-ä»·å€¼åé¦ˆ

```typescript
// èƒ½åŠ›-ä»·å€¼åé¦ˆè®¡ç®—å™¨
class CapabilityValueFeedbackCalculator {
  /**
   * è®¡ç®—ä¸‹å­£åº¦èƒ½åŠ›ä¼˜åŒ–
   */
  async calculateNextQuarterCapabilityOptimization(
    currentCapabilities: CapabilityValues,
    valueScores: ValueScores
  ): Promise<CapabilityOptimization> {
    const optimizations: CapabilityOptimization = {};
    
    // è®¤çŸ¥ä»·å€¼å¾—åˆ†<70åˆ†ï¼Œä¼˜åŒ–æ’­ä¼ èƒ½åŠ›
    if (valueScores.cognitive < 70) {
      optimizations.marketing = {
        adjustmentCoefficient: 0.10,
        reason: 'è®¤çŸ¥ä»·å€¼å¾—åˆ†åä½ï¼Œéœ€è¦åŠ å¤§æ’­ä¼ å†…å®¹ä¼˜åŒ–'
      };
    }
    
    // ä½“éªŒä»·å€¼å¾—åˆ†<75åˆ†ï¼Œä¼˜åŒ–äº¤ä»˜èƒ½åŠ›
    if (valueScores.experiential < 75) {
      optimizations.delivery = {
        adjustmentCoefficient: 0.08,
        reason: 'ä½“éªŒä»·å€¼å¾—åˆ†åä½ï¼Œéœ€è¦ä¼˜åŒ–ç‰©æµæ—¶æ•ˆ'
      };
    }
    
    return optimizations;
  }
}
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. æ‰¹é‡è®¡ç®—

```typescript
// æ‰¹é‡å…¨é“¾è·¯å¢é‡è®¡ç®—
class BatchFullChainDeltaCalculator {
  private batchSize = 5;
  private batchTimeout = 2000; // 2ç§’

  /**
   * æ‰¹é‡è®¡ç®—å¤šä¸ªç§Ÿæˆ·çš„å…¨é“¾è·¯å¢é‡
   */
  async batchCalculateFullChainDeltas(
    tenantCalculations: TenantCalculationInput[]
  ): Promise<FullChainDeltaCalculation[]> {
    const results: FullChainDeltaCalculation[] = [];
    
    for (let i = 0; i < tenantCalculations.length; i += this.batchSize) {
      const batch = tenantCalculations.slice(i, i + this.batchSize);
      const batchResults = await Promise.all(
        batch.map(calculation => this.calculateSingleFullChainDelta(calculation))
      );
      results.push(...batchResults);
      
      // é¿å…é˜»å¡ï¼Œè®©å‡ºæ§åˆ¶æƒ
      if (i + this.batchSize < tenantCalculations.length) {
        await this.delay(this.batchTimeout);
      }
    }
    
    return results;
  }
}
```

### 2. ç¼“å­˜ç­–ç•¥

```typescript
// å…¨é“¾è·¯å¢é‡è®¡ç®—ç¼“å­˜
class FullChainDeltaCache {
  private cache = new Map<string, any>();
  private ttl = 1800000; // 30åˆ†é’Ÿ

  /**
   * è·å–ç¼“å­˜çš„å…¨é“¾è·¯å¢é‡è®¡ç®—ç»“æœ
   */
  get(tenantId: string, monthDate: Date, inputs: any): FullChainDeltaCalculation | null {
    const key = this.generateCacheKey(tenantId, monthDate, inputs);
    const item = this.cache.get(key);
    
    if (!item || Date.now() > item.expires) {
      this.cache.delete(key);
      return null;
    }
    
    return item.value;
  }

  /**
   * ç¼“å­˜å…¨é“¾è·¯å¢é‡è®¡ç®—ç»“æœ
   */
  set(tenantId: string, monthDate: Date, inputs: any, result: FullChainDeltaCalculation): void {
    const key = this.generateCacheKey(tenantId, monthDate, inputs);
    this.cache.set(key, {
      value: result,
      expires: Date.now() + this.ttl
    });
  }
}
```

## ğŸš€ å®æ–½è®¡åˆ’

### é˜¶æ®µ1ï¼šåŸºç¡€ç®—æ³•å®ç°ï¼ˆWeek 1ï¼‰
1. **TypeScriptè®¡ç®—å™¨**ï¼šå®ç°FullChainDeltaCalculatorç±»
2. **æ•°æ®åº“å‡½æ•°**ï¼šå®ç°calculate_full_chain_deltaå‡½æ•°
3. **22ä¸ªâ–³å‡½æ•°**ï¼šå®ç°æ‰€æœ‰å¢é‡è®¡ç®—å…¬å¼

### é˜¶æ®µ2ï¼šåŠ¨æ€åé¦ˆé›†æˆï¼ˆWeek 2ï¼‰
1. **åˆ©æ¶¦åå“º**ï¼šå®ç°åˆ©æ¶¦åå“ºèµ„äº§è®¡ç®—
2. **èƒ½åŠ›ä¼˜åŒ–**ï¼šå®ç°èƒ½åŠ›-ä»·å€¼åé¦ˆè®¡ç®—
3. **åé¦ˆå›è·¯**ï¼šå®ç°åŠ¨æ€åé¦ˆå›è·¯

### é˜¶æ®µ3ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆWeek 3ï¼‰
1. **æ‰¹é‡è®¡ç®—**ï¼šå®ç°æ‰¹é‡å…¨é“¾è·¯å¢é‡è®¡ç®—
2. **ç¼“å­˜ç­–ç•¥**ï¼šå®ç°è®¡ç®—ç»“æœç¼“å­˜
3. **æ€§èƒ½æµ‹è¯•**ï¼šéªŒè¯æ€§èƒ½æŒ‡æ ‡

---

**æœ¬ç®—æ³•è®¾è®¡ç¡®ä¿å…¨é“¾è·¯å¢é‡è®¡ç®—çš„å®Œæ•´æ€§å’Œå‡†ç¡®æ€§ï¼Œæ”¯æŒ22ä¸ªâ–³å‡½æ•°çš„å®Œæ•´è®¡ç®—ï¼Œæ»¡è¶³100å®¶ä¼ä¸šçš„å…¨é“¾è·¯åˆ†æéœ€æ±‚ã€‚**
