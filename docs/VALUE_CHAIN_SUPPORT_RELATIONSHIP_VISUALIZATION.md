# 价值链支撑关系可视化设计（自下而上布局）

**创建时间**: 2025-01-23  
**版本**: 2.1  
**状态**: ✅ **自下而上支撑关系可视化设计方案**

---

## 🎯 设计理念

**核心理念**：采用**自下而上的布局方式**，清晰展示**支撑关系**：
- **底部**：投资与成本（基础支撑层）🏗️
- **向上支撑**：核心资产+能力 → 流程层 → 价值要素层
- **顶部**：收益层（目标层）🎯

这样的布局更符合商业逻辑：**底层基础支撑上层目标**。

---

## 📊 自下而上布局设计

### 整体布局示意图

```
┌─────────────────────────────────────────────────────────────────────────┐
│              价值链网络分析仪表盘（一页式）                                │
│                    【自下而上展示支撑关系】                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                           │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │              价值链网络图（主区域，70%高度）                      │   │
│  │                                                                 │   │
│  │                                                                 │   │
│  │        ┌─────────────────────────────────────────┐             │   │
│  │        │  收益层（输出）🎯 目标层                 │             │   │
│  │        │  ┌────┬────┬────┐                       │             │   │
│  │        │  │首单│追销│复购│                       │             │   │
│  │        │  │收入│收入│收入│                       │             │   │
│  │        │  │↑15%│↑20%│↑10%│                       │             │   │
│  │        │  └────┴────┴────┘                       │             │   │
│  │        └─────────────────▲──────────────────────┘             │   │
│  │                          │ 支撑方向：自下而上                    │   │
│  │        ┌─────────────────┴──────────────────────┐              │   │
│  │        │  价值要素层（网络交汇点）                  │              │   │
│  │        │  ┌────────┬────────┬────────┬────────┐  │              │   │
│  │        │  │产品特性│产品内在│客户感知│客户体验│  │              │   │
│  │        │  │  价值  │  价值  │  价值  │  价值  │  │              │   │
│  │        │  │  600元 │  741分 │ 1000元 │  746分 │  │              │   │
│  │        │  └────────┴────────┴────────┴────────┘  │              │   │
│  │        └───────▲────────▲────────▲────────▲───────┘              │   │
│  │                │        │        │        │                      │   │
│  │      ┌─────────┴────────┼────────┼────────┼─────────┐            │   │
│  │      │                  │        │        │        │            │   │
│  │  ┌───┴───┐  ┌───┴───┐  ┌───┴───┐  ┌───┴───┐  ┌───┴───┐  ┌───┴───┐ │
│  │  │生产   │  │播传   │  │首单   │  │交付   │  │追销   │  │复购   │ │
│  │  │流程   │  │流程   │  │流程   │  │流程   │  │流程   │  │流程   │ │
│  │  │效能   │  │效能   │  │转化率 │  │效能   │  │转化率 │  │转化率 │ │
│  │  │ 0.08  │  │ 0.06  │  │ 25%   │  │ 0.05  │  │ 15%   │  │ 40%   │ │
│  │  └───▲───┘  └───▲───┘  └───▲───┘  └───▲───┘  └───▲───┘  └───▲───┘ │
│  │      │          │          │          │          │          │      │   │
│  │  ┌───┴───┐  ┌───┴───┐  ┌───┴───┐  ┌───┴───┐  ┌───┴───┐  ┌───┴───┐ │
│  │  │生产   │  │播传   │  │首单   │  │交付   │  │追销   │  │复购   │ │
│  │  │资产+  │  │资产+  │  │资产+  │  │资产+  │  │资产+  │  │资产+  │ │
│  │  │能力   │  │能力   │  │能力   │  │能力   │  │能力   │  │能力   │ │
│  │  │200+80 │  │150+70 │  │120+60 │  │100+50 │  │80+40  │  │60+30  │ │
│  │  └───▲───┘  └───▲───┘  └───▲───┘  └───▲───┘  └───▲───┘  └───▲───┘ │
│  │      │          │          │          │          │          │      │   │
│  │      └──────────┼──────────┼──────────┼──────────┼──────────┘      │   │
│  │                 │          │          │          │                  │   │
│  │        ┌─────────▼──────────▼──────────▼──────────▼──────────┐   │   │
│  │        │  投资与成本层（基础支撑层）🏗️                          │   │   │
│  │        │  ┌──────────────────────────────────────────┐       │   │   │
│  │        │  │  【投资】1000万      【成本】500万        │       │   │   │
│  │        │  │     ↓10%               ↓5%                │       │   │   │
│  │        │  └──────────────────────────────────────────┘       │   │   │
│  │        └──────────────────────────────────────────────────┘   │   │   │
│  │                                                                 │   │   │
│  └───────────────────────────────────────────────────────────────────┘   │
│                                                                           │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │              关键指标与优化点（底部区域，30%高度）              │   │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │  ┌─────────────┬─────────────┬─────────────┬─────────────┐     │   │
│  │  │投入层指标   │资产层指标   │价值层指标   │收益层指标   │     │   │
│  │  │投资：1000万 │生产资产：   │产品特性：   │首单收入：   │     │   │
│  │  │成本：500万  │200万        │600元        │100万        │     │   │
│  │  └─────────────┴─────────────┴─────────────┴─────────────┘     │   │
│  │                                                                 │   │
│  │  ┌─────────────────────────────────────────────────────────┐   │   │
│  │  │  优化点识别（支撑关系分析）                              │   │   │
│  │  │  🔴 客户感知价值下降5% → 首单收入下降（价值层支撑不足）   │   │   │
│  │  │  ⚠️  播传投资边际ROI偏低（资产层效率低）                  │   │   │
│  │  │  ✅ 交付投资边际ROI高（资产层支撑强）                      │   │   │
│  │  └─────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                           │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 🎯 支撑关系说明

### 自下而上的支撑逻辑

```
【第5层：收益层（顶部）】🎯 目标层
    ↑ 由价值要素支撑
【第4层：价值要素层】     价值汇聚
    ↑ 由流程层支撑
【第3层：流程层】         价值转化
    ↑ 由资产+能力层支撑
【第2层：资产+能力层】     能力输出
    ↑ 由投资+成本层支撑
【第1层：投资+成本层（底部）】🏗️ 基础支撑层
```

### 支撑关系可视化

**箭头方向**：从下往上（↑），表示**底层支撑上层**

```typescript
// 支撑关系映射
const SUPPORT_RELATIONSHIPS = {
  // 第1层支撑第2层
  'investment → asset_capability': {
    direction: 'up', // 向上支撑
    type: 'solid', // 实线（直接支撑）
    width: 3, // 线宽（表示支撑强度）
    label: '投资支撑资产+能力建设'
  },
  
  // 第2层支撑第3层
  'asset_capability → process': {
    direction: 'up',
    type: 'solid',
    width: 3,
    label: '资产+能力支撑流程执行'
  },
  
  // 第3层支撑第4层
  'process → value': {
    direction: 'up',
    type: 'solid',
    width: 2,
    label: '流程支撑价值创造'
  },
  
  // 第4层支撑第5层
  'value → revenue': {
    direction: 'up',
    type: 'solid',
    width: 4, // 最粗（直接转化为收益）
    label: '价值要素直接转化为收益'
  }
};
```

---

## 🎨 可视化增强

### 1. 支撑强度可视化

```typescript
// 支撑强度通过连接线宽度表示
const SUPPORT_STRENGTH = {
  strong: { width: 4, color: '#4CAF50' }, // 强支撑 - 绿色粗线
  medium: { width: 2, color: '#FFC107' }, // 中支撑 - 黄色中线
  weak: { width: 1, color: '#F44336' } // 弱支撑 - 红色细线
};

// 支撑强度计算
function calculateSupportStrength(fromNode, toNode) {
  const efficiency = calculateEfficiency(fromNode, toNode);
  
  if (efficiency >= 0.8) return 'strong';
  if (efficiency >= 0.5) return 'medium';
  return 'weak';
}
```

### 2. 层级标识

```typescript
// 层级标识
const LEVEL_LABELS = {
  level1: {
    label: '基础支撑层',
    icon: '🏗️',
    position: 'bottom',
    color: '#FFD700' // 金色（基础）
  },
  level2: {
    label: '能力支撑层',
    icon: '⚙️',
    position: 'middle-bottom',
    color: '#4CAF50' // 绿色（能力）
  },
  level3: {
    label: '流程转化层',
    icon: '🔄',
    position: 'middle',
    color: '#2196F3' // 蓝色（流程）
  },
  level4: {
    label: '价值汇聚层',
    icon: '💎',
    position: 'middle-top',
    color: '#9C27B0' // 紫色（价值）
  },
  level5: {
    label: '目标收益层',
    icon: '🎯',
    position: 'top',
    color: '#FF9800' // 橙色（收益）
  }
};
```

### 3. 支撑路径追踪

```typescript
// 追踪支撑路径（从投资到收益）
function traceSupportPath(investmentNodeId: string, revenueNodeId: string) {
  // 从底部往上追踪支撑路径
  const path = [];
  
  // 第1层：投资 → 资产+能力
  path.push(findConnection(investmentNodeId, 'asset_capability'));
  
  // 第2层：资产+能力 → 流程
  path.push(findConnection('asset_capability', 'process'));
  
  // 第3层：流程 → 价值要素
  path.push(findConnection('process', 'value'));
  
  // 第4层：价值要素 → 收益
  path.push(findConnection('value', revenueNodeId));
  
  return path;
}
```

---

## 💻 技术实现

### 自下而上布局算法

```typescript
// 自下而上层级布局
class BottomToTopLayout {
  private nodes: NetworkNode[];
  private connections: NetworkConnection[];
  
  calculateLayout(): NetworkNode[] {
    // 1. 定义层级（自下而上）
    const levels = {
      level1: { y: 50, label: '基础支撑层', nodes: [] }, // 底部
      level2: { y: 150, label: '能力支撑层', nodes: [] },
      level3: { y: 250, label: '流程转化层', nodes: [] },
      level4: { y: 350, label: '价值汇聚层', nodes: [] },
      level5: { y: 450, label: '目标收益层', nodes: [] } // 顶部
    };
    
    // 2. 按类型分配节点到层级
    this.nodes.forEach(node => {
      switch (node.type) {
        case 'investment':
        case 'cost':
          levels.level1.nodes.push(node);
          break;
        case 'asset':
        case 'capability':
          levels.level2.nodes.push(node);
          break;
        case 'process':
          levels.level3.nodes.push(node);
          break;
        case 'value':
          levels.level4.nodes.push(node);
          break;
        case 'revenue':
          levels.level5.nodes.push(node);
          break;
      }
    });
    
    // 3. 计算每层节点的水平位置
    Object.values(levels).forEach(level => {
      const spacing = 120; // 节点间距
      const startX = (width - (level.nodes.length - 1) * spacing) / 2;
      
      level.nodes.forEach((node, index) => {
        node.position.x = startX + index * spacing;
        node.position.y = level.y;
      });
    });
    
    // 4. 调整连接线方向（从下往上）
    this.connections.forEach(conn => {
      conn.direction = 'up'; // 向上
      conn.arrow = 'forward'; // 向前（向上）
    });
    
    return this.nodes;
  }
}
```

---

## 📋 数据模型调整

### 支撑关系数据模型

```typescript
// 支撑关系数据模型
interface SupportRelationship {
  from: {
    level: number; // 支撑层级（从下往上）
    nodeId: string;
    type: string;
  };
  to: {
    level: number; // 被支撑层级（从下往上）
    nodeId: string;
    type: string;
  };
  supportStrength: 'strong' | 'medium' | 'weak';
  efficiency: number; // 支撑效率
  data: {
    value: number; // 支撑值
    unit: string; // 单位
    changeRate: number; // 变化率
  };
}
```

---

## 🎯 关键设计优势

### 1. 支撑关系清晰

- ✅ **自下而上布局**：清晰展示底层支撑上层的逻辑
- ✅ **箭头向上**：直观表示支撑方向
- ✅ **层级分明**：每层的作用和位置一目了然

### 2. 商业逻辑符合

- ✅ **目标在顶部**：收益层作为目标，位于顶部
- ✅ **基础在底部**：投资和成本作为基础，位于底部
- ✅ **支撑链完整**：从基础到目标的完整支撑链

### 3. 优化点突出

- ✅ **支撑强度标识**：通过连接线宽度和颜色标识支撑强度
- ✅ **瓶颈高亮**：弱支撑路径自动高亮显示
- ✅ **优化建议**：基于支撑关系分析提供优化建议

---

## 📚 相关文档

- [价值链网络可视化设计](./VALUE_CHAIN_NETWORK_VISUALIZATION_DESIGN.md) - 网络结构可视化设计
- [管理仪表盘设计](./EXECUTIVE_DASHBOARD_DESIGN.md) - 管理仪表盘设计
- [价值链优化方法论](./VALUE_CHAIN_OPTIMIZATION_METHODOLOGY.md) - 优化方法论

---

**文档版本**: 2.1  
**最后更新**: 2025-01-23  
**状态**: ✅ **自下而上支撑关系可视化设计方案完整说明**

